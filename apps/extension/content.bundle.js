(()=>{var Bn=Object.create;var It=Object.defineProperty;var Dn=Object.getOwnPropertyDescriptor;var Fn=Object.getOwnPropertyNames;var kn=Object.getPrototypeOf,Sn=Object.prototype.hasOwnProperty;var U0=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var Tn=(i,e)=>()=>(i&&(e=i(i=0)),e);var $=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),Rn=(i,e)=>{for(var t in e)It(i,t,{get:e[t],enumerable:!0})},H0=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Fn(e))!Sn.call(i,n)&&n!==t&&It(i,n,{get:()=>e[n],enumerable:!(r=Dn(e,n))||r.enumerable});return i};var N0=(i,e,t)=>(t=i!=null?Bn(kn(i)):{},H0(e||!i||!i.__esModule?It(t,"default",{value:i,enumerable:!0}):t,i)),Pn=i=>H0(It({},"__esModule",{value:!0}),i);var be={};Rn(be,{Headers:()=>Vr,Request:()=>jn,Response:()=>$n,default:()=>Jr,fetch:()=>In});var On,He,In,Jr,Vr,jn,$n,pe=Tn(()=>{"use strict";On=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},He=On(),In=He.fetch,Jr=He.fetch.bind(He),Vr=He.Headers,jn=He.Request,$n=He.Response});var Yr=$(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var Xr=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Qr.default=Xr});var e0=$(at=>{"use strict";var M0=at&&at.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(at,"__esModule",{value:!0});var Ln=M0((pe(),Pn(be))),Un=M0(Yr()),Zr=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ln.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,c;let h=null,l=null,d=null,u=s.status,x=s.statusText;if(s.ok){if(this.method!=="HEAD"){let f=await s.text();f===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?l=f:l=JSON.parse(f))}let y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),_=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");y&&_&&_.length>1&&(d=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(l)&&(l.length>1?(h={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,d=null,u=406,x="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{let y=await s.text();try{h=JSON.parse(y),Array.isArray(h)&&s.status===404&&(l=[],h=null,u=200,x="OK")}catch{s.status===404&&y===""?(u=204,x="No Content"):h={message:y}}if(h&&this.isMaybeSingle&&(!((c=h?.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,u=200,x="OK"),h&&this.shouldThrowOnError)throw new Un.default(h)}return{error:h,data:l,count:d,status:u,statusText:x}});return this.shouldThrowOnError||(n=n.catch(s=>{var a,o,c;return{error:{message:`${(a=s?.name)!==null&&a!==void 0?a:"FetchError"}: ${s?.message}`,details:`${(o=s?.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=s?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};at.default=Zr});var r0=$(ct=>{"use strict";var Hn=ct&&ct.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ct,"__esModule",{value:!0});var Nn=Hn(e0()),t0=class extends Nn.default{select(e){let t=!1,r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){let a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){let s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var o;let c=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${h}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ct.default=t0});var Ut=$(lt=>{"use strict";var zn=lt&&lt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(lt,"__esModule",{value:!0});var Mn=zn(r0()),i0=class extends Mn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");let a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};lt.default=i0});var n0=$(ht=>{"use strict";var Wn=ht&&ht.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ht,"__esModule",{value:!0});var ut=Wn(Ut()),s0=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){let n=t?"HEAD":"GET",s=!1,a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new ut.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let n="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){let o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new ut.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){let a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){let c=e.reduce((h,l)=>h.concat(Object.keys(l)),[]);if(c.length>0){let h=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",h.join(","))}}return new ut.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new ut.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ut.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ht.default=s0});var W0=$(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.version=void 0;Ht.version="0.0.0-automated"});var K0=$(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.DEFAULT_HEADERS=void 0;var Kn=W0();Nt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kn.version}`}});var J0=$(dt=>{"use strict";var G0=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(dt,"__esModule",{value:!0});var Gn=G0(n0()),Jn=G0(Ut()),Vn=K0(),o0=class i{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Vn.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){let t=new URL(`${this.url}/${e}`);return new Gn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:s}={}){let a,o=new URL(`${this.url}/rpc/${e}`),c;r||n?(a=r?"HEAD":"GET",Object.entries(t).filter(([l,d])=>d!==void 0).map(([l,d])=>[l,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([l,d])=>{o.searchParams.append(l,d)})):(a="POST",c=t);let h=Object.assign({},this.headers);return s&&(h.Prefer=`count=${s}`),new Jn.default({method:a,url:o,headers:h,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};dt.default=o0});var ti=$(V=>{"use strict";var Ne=V&&V.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(V,"__esModule",{value:!0});V.PostgrestError=V.PostgrestBuilder=V.PostgrestTransformBuilder=V.PostgrestFilterBuilder=V.PostgrestQueryBuilder=V.PostgrestClient=void 0;var V0=Ne(J0());V.PostgrestClient=V0.default;var X0=Ne(n0());V.PostgrestQueryBuilder=X0.default;var Q0=Ne(Ut());V.PostgrestFilterBuilder=Q0.default;var Y0=Ne(r0());V.PostgrestTransformBuilder=Y0.default;var Z0=Ne(e0());V.PostgrestBuilder=Z0.default;var ei=Ne(Yr());V.PostgrestError=ei.default;V.default={PostgrestClient:V0.default,PostgrestQueryBuilder:X0.default,PostgrestFilterBuilder:Q0.default,PostgrestTransformBuilder:Y0.default,PostgrestBuilder:Z0.default,PostgrestError:ei.default}});var is=$(()=>{});var N=$((ar,ss)=>{(function(i,e){typeof ar=="object"?ss.exports=ar=e():typeof define=="function"&&define.amd?define([],e):i.CryptoJS=e()})(ar,function(){var i=i||function(e,t){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof U0=="function")try{r=is()}catch{}var n=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function f(){}return function(v){var g;return f.prototype=v,g=new f,f.prototype=null,g}}(),a={},o=a.lib={},c=o.Base=function(){return{extend:function(f){var v=s(this);return f&&v.mixIn(f),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var v in f)f.hasOwnProperty(v)&&(this[v]=f[v]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=o.WordArray=c.extend({init:function(f,v){f=this.words=f||[],v!=t?this.sigBytes=v:this.sigBytes=f.length*4},toString:function(f){return(f||d).stringify(this)},concat:function(f){var v=this.words,g=f.words,m=this.sigBytes,w=f.sigBytes;if(this.clamp(),m%4)for(var b=0;b<w;b++){var B=g[b>>>2]>>>24-b%4*8&255;v[m+b>>>2]|=B<<24-(m+b)%4*8}else for(var A=0;A<w;A+=4)v[m+A>>>2]=g[A>>>2];return this.sigBytes+=w,this},clamp:function(){var f=this.words,v=this.sigBytes;f[v>>>2]&=4294967295<<32-v%4*8,f.length=e.ceil(v/4)},clone:function(){var f=c.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var v=[],g=0;g<f;g+=4)v.push(n());return new h.init(v,f)}}),l=a.enc={},d=l.Hex={stringify:function(f){for(var v=f.words,g=f.sigBytes,m=[],w=0;w<g;w++){var b=v[w>>>2]>>>24-w%4*8&255;m.push((b>>>4).toString(16)),m.push((b&15).toString(16))}return m.join("")},parse:function(f){for(var v=f.length,g=[],m=0;m<v;m+=2)g[m>>>3]|=parseInt(f.substr(m,2),16)<<24-m%8*4;return new h.init(g,v/2)}},u=l.Latin1={stringify:function(f){for(var v=f.words,g=f.sigBytes,m=[],w=0;w<g;w++){var b=v[w>>>2]>>>24-w%4*8&255;m.push(String.fromCharCode(b))}return m.join("")},parse:function(f){for(var v=f.length,g=[],m=0;m<v;m++)g[m>>>2]|=(f.charCodeAt(m)&255)<<24-m%4*8;return new h.init(g,v)}},x=l.Utf8={stringify:function(f){try{return decodeURIComponent(escape(u.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return u.parse(unescape(encodeURIComponent(f)))}},p=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=x.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var v,g=this._data,m=g.words,w=g.sigBytes,b=this.blockSize,B=b*4,A=w/B;f?A=e.ceil(A):A=e.max((A|0)-this._minBufferSize,0);var R=A*b,P=e.min(R*4,w);if(R){for(var E=0;E<R;E+=b)this._doProcessBlock(m,E);v=m.splice(0,R),g.sigBytes-=P}return new h.init(v,P)},clone:function(){var f=c.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0}),y=o.Hasher=p.extend({cfg:c.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var v=this._doFinalize();return v},blockSize:512/32,_createHelper:function(f){return function(v,g){return new f.init(g).finalize(v)}},_createHmacHelper:function(f){return function(v,g){return new _.HMAC.init(f,g).finalize(v)}}}),_=a.algo={};return a}(Math);return i})});var Ft=$((cr,ns)=>{(function(i,e){typeof cr=="object"?ns.exports=cr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(cr,function(i){return function(e){var t=i,r=t.lib,n=r.Base,s=r.WordArray,a=t.x64={},o=a.Word=n.extend({init:function(h,l){this.high=h,this.low=l}}),c=a.WordArray=n.extend({init:function(h,l){h=this.words=h||[],l!=e?this.sigBytes=l:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,l=h.length,d=[],u=0;u<l;u++){var x=h[u];d.push(x.high),d.push(x.low)}return s.create(d,this.sigBytes)},clone:function(){for(var h=n.clone.call(this),l=h.words=this.words.slice(0),d=l.length,u=0;u<d;u++)l[u]=l[u].clone();return h}})}(),i})});var as=$((lr,os)=>{(function(i,e){typeof lr=="object"?os.exports=lr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(lr,function(i){return function(){if(typeof ArrayBuffer=="function"){var e=i,t=e.lib,r=t.WordArray,n=r.init,s=r.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var o=a.byteLength,c=[],h=0;h<o;h++)c[h>>>2]|=a[h]<<24-h%4*8;n.call(this,c,o)}else n.apply(this,arguments)};s.prototype=r}}(),i.lib.WordArray})});var ls=$((ur,cs)=>{(function(i,e){typeof ur=="object"?cs.exports=ur=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(ur,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,n=e.enc,s=n.Utf16=n.Utf16BE={stringify:function(o){for(var c=o.words,h=o.sigBytes,l=[],d=0;d<h;d+=2){var u=c[d>>>2]>>>16-d%4*8&65535;l.push(String.fromCharCode(u))}return l.join("")},parse:function(o){for(var c=o.length,h=[],l=0;l<c;l++)h[l>>>1]|=o.charCodeAt(l)<<16-l%2*16;return r.create(h,c*2)}};n.Utf16LE={stringify:function(o){for(var c=o.words,h=o.sigBytes,l=[],d=0;d<h;d+=2){var u=a(c[d>>>2]>>>16-d%4*8&65535);l.push(String.fromCharCode(u))}return l.join("")},parse:function(o){for(var c=o.length,h=[],l=0;l<c;l++)h[l>>>1]|=a(o.charCodeAt(l)<<16-l%2*16);return r.create(h,c*2)}};function a(o){return o<<8&4278255360|o>>>8&16711935}}(),i.enc.Utf16})});var me=$((hr,us)=>{(function(i,e){typeof hr=="object"?us.exports=hr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(hr,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,n=e.enc,s=n.Base64={stringify:function(o){var c=o.words,h=o.sigBytes,l=this._map;o.clamp();for(var d=[],u=0;u<h;u+=3)for(var x=c[u>>>2]>>>24-u%4*8&255,p=c[u+1>>>2]>>>24-(u+1)%4*8&255,y=c[u+2>>>2]>>>24-(u+2)%4*8&255,_=x<<16|p<<8|y,f=0;f<4&&u+f*.75<h;f++)d.push(l.charAt(_>>>6*(3-f)&63));var v=l.charAt(64);if(v)for(;d.length%4;)d.push(v);return d.join("")},parse:function(o){var c=o.length,h=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var d=0;d<h.length;d++)l[h.charCodeAt(d)]=d}var u=h.charAt(64);if(u){var x=o.indexOf(u);x!==-1&&(c=x)}return a(o,c,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(o,c,h){for(var l=[],d=0,u=0;u<c;u++)if(u%4){var x=h[o.charCodeAt(u-1)]<<u%4*2,p=h[o.charCodeAt(u)]>>>6-u%4*2,y=x|p;l[d>>>2]|=y<<24-d%4*8,d++}return r.create(l,d)}}(),i.enc.Base64})});var ds=$((dr,hs)=>{(function(i,e){typeof dr=="object"?hs.exports=dr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(dr,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,n=e.enc,s=n.Base64url={stringify:function(o,c){c===void 0&&(c=!0);var h=o.words,l=o.sigBytes,d=c?this._safe_map:this._map;o.clamp();for(var u=[],x=0;x<l;x+=3)for(var p=h[x>>>2]>>>24-x%4*8&255,y=h[x+1>>>2]>>>24-(x+1)%4*8&255,_=h[x+2>>>2]>>>24-(x+2)%4*8&255,f=p<<16|y<<8|_,v=0;v<4&&x+v*.75<l;v++)u.push(d.charAt(f>>>6*(3-v)&63));var g=d.charAt(64);if(g)for(;u.length%4;)u.push(g);return u.join("")},parse:function(o,c){c===void 0&&(c=!0);var h=o.length,l=c?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var u=0;u<l.length;u++)d[l.charCodeAt(u)]=u}var x=l.charAt(64);if(x){var p=o.indexOf(x);p!==-1&&(h=p)}return a(o,h,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(o,c,h){for(var l=[],d=0,u=0;u<c;u++)if(u%4){var x=h[o.charCodeAt(u-1)]<<u%4*2,p=h[o.charCodeAt(u)]>>>6-u%4*2,y=x|p;l[d>>>2]|=y<<24-d%4*8,d++}return r.create(l,d)}}(),i.enc.Base64url})});var ye=$((fr,fs)=>{(function(i,e){typeof fr=="object"?fs.exports=fr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(fr,function(i){return function(e){var t=i,r=t.lib,n=r.WordArray,s=r.Hasher,a=t.algo,o=[];(function(){for(var x=0;x<64;x++)o[x]=e.abs(e.sin(x+1))*4294967296|0})();var c=a.MD5=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,p){for(var y=0;y<16;y++){var _=p+y,f=x[_];x[_]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var v=this._hash.words,g=x[p+0],m=x[p+1],w=x[p+2],b=x[p+3],B=x[p+4],A=x[p+5],R=x[p+6],P=x[p+7],E=x[p+8],D=x[p+9],O=x[p+10],k=x[p+11],j=x[p+12],I=x[p+13],L=x[p+14],z=x[p+15],C=v[0],S=v[1],T=v[2],F=v[3];C=h(C,S,T,F,g,7,o[0]),F=h(F,C,S,T,m,12,o[1]),T=h(T,F,C,S,w,17,o[2]),S=h(S,T,F,C,b,22,o[3]),C=h(C,S,T,F,B,7,o[4]),F=h(F,C,S,T,A,12,o[5]),T=h(T,F,C,S,R,17,o[6]),S=h(S,T,F,C,P,22,o[7]),C=h(C,S,T,F,E,7,o[8]),F=h(F,C,S,T,D,12,o[9]),T=h(T,F,C,S,O,17,o[10]),S=h(S,T,F,C,k,22,o[11]),C=h(C,S,T,F,j,7,o[12]),F=h(F,C,S,T,I,12,o[13]),T=h(T,F,C,S,L,17,o[14]),S=h(S,T,F,C,z,22,o[15]),C=l(C,S,T,F,m,5,o[16]),F=l(F,C,S,T,R,9,o[17]),T=l(T,F,C,S,k,14,o[18]),S=l(S,T,F,C,g,20,o[19]),C=l(C,S,T,F,A,5,o[20]),F=l(F,C,S,T,O,9,o[21]),T=l(T,F,C,S,z,14,o[22]),S=l(S,T,F,C,B,20,o[23]),C=l(C,S,T,F,D,5,o[24]),F=l(F,C,S,T,L,9,o[25]),T=l(T,F,C,S,b,14,o[26]),S=l(S,T,F,C,E,20,o[27]),C=l(C,S,T,F,I,5,o[28]),F=l(F,C,S,T,w,9,o[29]),T=l(T,F,C,S,P,14,o[30]),S=l(S,T,F,C,j,20,o[31]),C=d(C,S,T,F,A,4,o[32]),F=d(F,C,S,T,E,11,o[33]),T=d(T,F,C,S,k,16,o[34]),S=d(S,T,F,C,L,23,o[35]),C=d(C,S,T,F,m,4,o[36]),F=d(F,C,S,T,B,11,o[37]),T=d(T,F,C,S,P,16,o[38]),S=d(S,T,F,C,O,23,o[39]),C=d(C,S,T,F,I,4,o[40]),F=d(F,C,S,T,g,11,o[41]),T=d(T,F,C,S,b,16,o[42]),S=d(S,T,F,C,R,23,o[43]),C=d(C,S,T,F,D,4,o[44]),F=d(F,C,S,T,j,11,o[45]),T=d(T,F,C,S,z,16,o[46]),S=d(S,T,F,C,w,23,o[47]),C=u(C,S,T,F,g,6,o[48]),F=u(F,C,S,T,P,10,o[49]),T=u(T,F,C,S,L,15,o[50]),S=u(S,T,F,C,A,21,o[51]),C=u(C,S,T,F,j,6,o[52]),F=u(F,C,S,T,b,10,o[53]),T=u(T,F,C,S,O,15,o[54]),S=u(S,T,F,C,m,21,o[55]),C=u(C,S,T,F,E,6,o[56]),F=u(F,C,S,T,z,10,o[57]),T=u(T,F,C,S,R,15,o[58]),S=u(S,T,F,C,I,21,o[59]),C=u(C,S,T,F,B,6,o[60]),F=u(F,C,S,T,k,10,o[61]),T=u(T,F,C,S,w,15,o[62]),S=u(S,T,F,C,D,21,o[63]),v[0]=v[0]+C|0,v[1]=v[1]+S|0,v[2]=v[2]+T|0,v[3]=v[3]+F|0},_doFinalize:function(){var x=this._data,p=x.words,y=this._nDataBytes*8,_=x.sigBytes*8;p[_>>>5]|=128<<24-_%32;var f=e.floor(y/4294967296),v=y;p[(_+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,p[(_+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x.sigBytes=(p.length+1)*4,this._process();for(var g=this._hash,m=g.words,w=0;w<4;w++){var b=m[w];m[w]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}return g},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x}});function h(x,p,y,_,f,v,g){var m=x+(p&y|~p&_)+f+g;return(m<<v|m>>>32-v)+p}function l(x,p,y,_,f,v,g){var m=x+(p&_|y&~_)+f+g;return(m<<v|m>>>32-v)+p}function d(x,p,y,_,f,v,g){var m=x+(p^y^_)+f+g;return(m<<v|m>>>32-v)+p}function u(x,p,y,_,f,v,g){var m=x+(y^(p|~_))+f+g;return(m<<v|m>>>32-v)+p}t.MD5=s._createHelper(c),t.HmacMD5=s._createHmacHelper(c)}(Math),i.MD5})});var y0=$((xr,xs)=>{(function(i,e){typeof xr=="object"?xs.exports=xr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(xr,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,n=t.Hasher,s=e.algo,a=[],o=s.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var l=this._hash.words,d=l[0],u=l[1],x=l[2],p=l[3],y=l[4],_=0;_<80;_++){if(_<16)a[_]=c[h+_]|0;else{var f=a[_-3]^a[_-8]^a[_-14]^a[_-16];a[_]=f<<1|f>>>31}var v=(d<<5|d>>>27)+y+a[_];_<20?v+=(u&x|~u&p)+1518500249:_<40?v+=(u^x^p)+1859775393:_<60?v+=(u&x|u&p|x&p)-1894007588:v+=(u^x^p)-899497514,y=p,p=x,x=u<<30|u>>>2,u=d,d=v}l[0]=l[0]+d|0,l[1]=l[1]+u|0,l[2]=l[2]+x|0,l[3]=l[3]+p|0,l[4]=l[4]+y|0},_doFinalize:function(){var c=this._data,h=c.words,l=this._nDataBytes*8,d=c.sigBytes*8;return h[d>>>5]|=128<<24-d%32,h[(d+64>>>9<<4)+14]=Math.floor(l/4294967296),h[(d+64>>>9<<4)+15]=l,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=n.clone.call(this);return c._hash=this._hash.clone(),c}});e.SHA1=n._createHelper(o),e.HmacSHA1=n._createHmacHelper(o)}(),i.SHA1})});var pr=$((vr,vs)=>{(function(i,e){typeof vr=="object"?vs.exports=vr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(vr,function(i){return function(e){var t=i,r=t.lib,n=r.WordArray,s=r.Hasher,a=t.algo,o=[],c=[];(function(){function d(y){for(var _=e.sqrt(y),f=2;f<=_;f++)if(!(y%f))return!1;return!0}function u(y){return(y-(y|0))*4294967296|0}for(var x=2,p=0;p<64;)d(x)&&(p<8&&(o[p]=u(e.pow(x,1/2))),c[p]=u(e.pow(x,1/3)),p++),x++})();var h=[],l=a.SHA256=s.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(d,u){for(var x=this._hash.words,p=x[0],y=x[1],_=x[2],f=x[3],v=x[4],g=x[5],m=x[6],w=x[7],b=0;b<64;b++){if(b<16)h[b]=d[u+b]|0;else{var B=h[b-15],A=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,R=h[b-2],P=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;h[b]=A+h[b-7]+P+h[b-16]}var E=v&g^~v&m,D=p&y^p&_^y&_,O=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),k=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),j=w+k+E+c[b]+h[b],I=O+D;w=m,m=g,g=v,v=f+j|0,f=_,_=y,y=p,p=j+I|0}x[0]=x[0]+p|0,x[1]=x[1]+y|0,x[2]=x[2]+_|0,x[3]=x[3]+f|0,x[4]=x[4]+v|0,x[5]=x[5]+g|0,x[6]=x[6]+m|0,x[7]=x[7]+w|0},_doFinalize:function(){var d=this._data,u=d.words,x=this._nDataBytes*8,p=d.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=e.floor(x/4294967296),u[(p+64>>>9<<4)+15]=x,d.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});t.SHA256=s._createHelper(l),t.HmacSHA256=s._createHmacHelper(l)}(Math),i.SHA256})});var _s=$((_r,ps)=>{(function(i,e,t){typeof _r=="object"?ps.exports=_r=e(N(),pr()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(i.CryptoJS)})(_r,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,n=e.algo,s=n.SHA256,a=n.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var o=s._doFinalize.call(this);return o.sigBytes-=4,o}});e.SHA224=s._createHelper(a),e.HmacSHA224=s._createHmacHelper(a)}(),i.SHA224})});var b0=$((gr,gs)=>{(function(i,e,t){typeof gr=="object"?gs.exports=gr=e(N(),Ft()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(i.CryptoJS)})(gr,function(i){return function(){var e=i,t=e.lib,r=t.Hasher,n=e.x64,s=n.Word,a=n.WordArray,o=e.algo;function c(){return s.create.apply(s,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var u=0;u<80;u++)l[u]=c()})();var d=o.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(u,x){for(var p=this._hash.words,y=p[0],_=p[1],f=p[2],v=p[3],g=p[4],m=p[5],w=p[6],b=p[7],B=y.high,A=y.low,R=_.high,P=_.low,E=f.high,D=f.low,O=v.high,k=v.low,j=g.high,I=g.low,L=m.high,z=m.low,C=w.high,S=w.low,T=b.high,F=b.low,K=B,M=A,Q=R,H=P,Ye=E,qe=D,Kr=O,Ze=k,ne=j,Z=I,Rt=L,et=z,Pt=C,tt=S,Gr=T,rt=F,oe=0;oe<80;oe++){var re,xe,Ot=l[oe];if(oe<16)xe=Ot.high=u[x+oe*2]|0,re=Ot.low=u[x+oe*2+1]|0;else{var F0=l[oe-15],Le=F0.high,it=F0.low,fn=(Le>>>1|it<<31)^(Le>>>8|it<<24)^Le>>>7,k0=(it>>>1|Le<<31)^(it>>>8|Le<<24)^(it>>>7|Le<<25),S0=l[oe-2],Ue=S0.high,st=S0.low,xn=(Ue>>>19|st<<13)^(Ue<<3|st>>>29)^Ue>>>6,T0=(st>>>19|Ue<<13)^(st<<3|Ue>>>29)^(st>>>6|Ue<<26),R0=l[oe-7],vn=R0.high,pn=R0.low,P0=l[oe-16],_n=P0.high,O0=P0.low;re=k0+pn,xe=fn+vn+(re>>>0<k0>>>0?1:0),re=re+T0,xe=xe+xn+(re>>>0<T0>>>0?1:0),re=re+O0,xe=xe+_n+(re>>>0<O0>>>0?1:0),Ot.high=xe,Ot.low=re}var gn=ne&Rt^~ne&Pt,I0=Z&et^~Z&tt,mn=K&Q^K&Ye^Q&Ye,yn=M&H^M&qe^H&qe,bn=(K>>>28|M<<4)^(K<<30|M>>>2)^(K<<25|M>>>7),j0=(M>>>28|K<<4)^(M<<30|K>>>2)^(M<<25|K>>>7),wn=(ne>>>14|Z<<18)^(ne>>>18|Z<<14)^(ne<<23|Z>>>9),En=(Z>>>14|ne<<18)^(Z>>>18|ne<<14)^(Z<<23|ne>>>9),$0=h[oe],An=$0.high,q0=$0.low,ee=rt+En,ve=Gr+wn+(ee>>>0<rt>>>0?1:0),ee=ee+I0,ve=ve+gn+(ee>>>0<I0>>>0?1:0),ee=ee+q0,ve=ve+An+(ee>>>0<q0>>>0?1:0),ee=ee+re,ve=ve+xe+(ee>>>0<re>>>0?1:0),L0=j0+yn,Cn=bn+mn+(L0>>>0<j0>>>0?1:0);Gr=Pt,rt=tt,Pt=Rt,tt=et,Rt=ne,et=Z,Z=Ze+ee|0,ne=Kr+ve+(Z>>>0<Ze>>>0?1:0)|0,Kr=Ye,Ze=qe,Ye=Q,qe=H,Q=K,H=M,M=ee+L0|0,K=ve+Cn+(M>>>0<ee>>>0?1:0)|0}A=y.low=A+M,y.high=B+K+(A>>>0<M>>>0?1:0),P=_.low=P+H,_.high=R+Q+(P>>>0<H>>>0?1:0),D=f.low=D+qe,f.high=E+Ye+(D>>>0<qe>>>0?1:0),k=v.low=k+Ze,v.high=O+Kr+(k>>>0<Ze>>>0?1:0),I=g.low=I+Z,g.high=j+ne+(I>>>0<Z>>>0?1:0),z=m.low=z+et,m.high=L+Rt+(z>>>0<et>>>0?1:0),S=w.low=S+tt,w.high=C+Pt+(S>>>0<tt>>>0?1:0),F=b.low=F+rt,b.high=T+Gr+(F>>>0<rt>>>0?1:0)},_doFinalize:function(){var u=this._data,x=u.words,p=this._nDataBytes*8,y=u.sigBytes*8;x[y>>>5]|=128<<24-y%32,x[(y+128>>>10<<5)+30]=Math.floor(p/4294967296),x[(y+128>>>10<<5)+31]=p,u.sigBytes=x.length*4,this._process();var _=this._hash.toX32();return _},clone:function(){var u=r.clone.call(this);return u._hash=this._hash.clone(),u},blockSize:1024/32});e.SHA512=r._createHelper(d),e.HmacSHA512=r._createHmacHelper(d)}(),i.SHA512})});var ys=$((mr,ms)=>{(function(i,e,t){typeof mr=="object"?ms.exports=mr=e(N(),Ft(),b0()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(i.CryptoJS)})(mr,function(i){return function(){var e=i,t=e.x64,r=t.Word,n=t.WordArray,s=e.algo,a=s.SHA512,o=s.SHA384=a.extend({_doReset:function(){this._hash=new n.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c}});e.SHA384=a._createHelper(o),e.HmacSHA384=a._createHmacHelper(o)}(),i.SHA384})});var ws=$((yr,bs)=>{(function(i,e,t){typeof yr=="object"?bs.exports=yr=e(N(),Ft()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(i.CryptoJS)})(yr,function(i){return function(e){var t=i,r=t.lib,n=r.WordArray,s=r.Hasher,a=t.x64,o=a.Word,c=t.algo,h=[],l=[],d=[];(function(){for(var p=1,y=0,_=0;_<24;_++){h[p+5*y]=(_+1)*(_+2)/2%64;var f=y%5,v=(2*p+3*y)%5;p=f,y=v}for(var p=0;p<5;p++)for(var y=0;y<5;y++)l[p+5*y]=y+(2*p+3*y)%5*5;for(var g=1,m=0;m<24;m++){for(var w=0,b=0,B=0;B<7;B++){if(g&1){var A=(1<<B)-1;A<32?b^=1<<A:w^=1<<A-32}g&128?g=g<<1^113:g<<=1}d[m]=o.create(w,b)}})();var u=[];(function(){for(var p=0;p<25;p++)u[p]=o.create()})();var x=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var p=this._state=[],y=0;y<25;y++)p[y]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(p,y){for(var _=this._state,f=this.blockSize/2,v=0;v<f;v++){var g=p[y+2*v],m=p[y+2*v+1];g=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,m=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360;var w=_[v];w.high^=m,w.low^=g}for(var b=0;b<24;b++){for(var B=0;B<5;B++){for(var A=0,R=0,P=0;P<5;P++){var w=_[B+5*P];A^=w.high,R^=w.low}var E=u[B];E.high=A,E.low=R}for(var B=0;B<5;B++)for(var D=u[(B+4)%5],O=u[(B+1)%5],k=O.high,j=O.low,A=D.high^(k<<1|j>>>31),R=D.low^(j<<1|k>>>31),P=0;P<5;P++){var w=_[B+5*P];w.high^=A,w.low^=R}for(var I=1;I<25;I++){var A,R,w=_[I],L=w.high,z=w.low,C=h[I];C<32?(A=L<<C|z>>>32-C,R=z<<C|L>>>32-C):(A=z<<C-32|L>>>64-C,R=L<<C-32|z>>>64-C);var S=u[l[I]];S.high=A,S.low=R}var T=u[0],F=_[0];T.high=F.high,T.low=F.low;for(var B=0;B<5;B++)for(var P=0;P<5;P++){var I=B+5*P,w=_[I],K=u[I],M=u[(B+1)%5+5*P],Q=u[(B+2)%5+5*P];w.high=K.high^~M.high&Q.high,w.low=K.low^~M.low&Q.low}var w=_[0],H=d[b];w.high^=H.high,w.low^=H.low}},_doFinalize:function(){var p=this._data,y=p.words,_=this._nDataBytes*8,f=p.sigBytes*8,v=this.blockSize*32;y[f>>>5]|=1<<24-f%32,y[(e.ceil((f+1)/v)*v>>>5)-1]|=128,p.sigBytes=y.length*4,this._process();for(var g=this._state,m=this.cfg.outputLength/8,w=m/8,b=[],B=0;B<w;B++){var A=g[B],R=A.high,P=A.low;R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,b.push(P),b.push(R)}return new n.init(b,m)},clone:function(){for(var p=s.clone.call(this),y=p._state=this._state.slice(0),_=0;_<25;_++)y[_]=y[_].clone();return p}});t.SHA3=s._createHelper(x),t.HmacSHA3=s._createHmacHelper(x)}(Math),i.SHA3})});var As=$((br,Es)=>{(function(i,e){typeof br=="object"?Es.exports=br=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(br,function(i){return function(e){var t=i,r=t.lib,n=r.WordArray,s=r.Hasher,a=t.algo,o=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=n.create([0,1518500249,1859775393,2400959708,2840853838]),u=n.create([1352829926,1548603684,1836072691,2053994217,0]),x=a.RIPEMD160=s.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,w){for(var b=0;b<16;b++){var B=w+b,A=m[B];m[B]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var R=this._hash.words,P=d.words,E=u.words,D=o.words,O=c.words,k=h.words,j=l.words,I,L,z,C,S,T,F,K,M,Q;T=I=R[0],F=L=R[1],K=z=R[2],M=C=R[3],Q=S=R[4];for(var H,b=0;b<80;b+=1)H=I+m[w+D[b]]|0,b<16?H+=p(L,z,C)+P[0]:b<32?H+=y(L,z,C)+P[1]:b<48?H+=_(L,z,C)+P[2]:b<64?H+=f(L,z,C)+P[3]:H+=v(L,z,C)+P[4],H=H|0,H=g(H,k[b]),H=H+S|0,I=S,S=C,C=g(z,10),z=L,L=H,H=T+m[w+O[b]]|0,b<16?H+=v(F,K,M)+E[0]:b<32?H+=f(F,K,M)+E[1]:b<48?H+=_(F,K,M)+E[2]:b<64?H+=y(F,K,M)+E[3]:H+=p(F,K,M)+E[4],H=H|0,H=g(H,j[b]),H=H+Q|0,T=Q,Q=M,M=g(K,10),K=F,F=H;H=R[1]+z+M|0,R[1]=R[2]+C+Q|0,R[2]=R[3]+S+T|0,R[3]=R[4]+I+F|0,R[4]=R[0]+L+K|0,R[0]=H},_doFinalize:function(){var m=this._data,w=m.words,b=this._nDataBytes*8,B=m.sigBytes*8;w[B>>>5]|=128<<24-B%32,w[(B+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,m.sigBytes=(w.length+1)*4,this._process();for(var A=this._hash,R=A.words,P=0;P<5;P++){var E=R[P];R[P]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}return A},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m}});function p(m,w,b){return m^w^b}function y(m,w,b){return m&w|~m&b}function _(m,w,b){return(m|~w)^b}function f(m,w,b){return m&b|w&~b}function v(m,w,b){return m^(w|~b)}function g(m,w){return m<<w|m>>>32-w}t.RIPEMD160=s._createHelper(x),t.HmacRIPEMD160=s._createHmacHelper(x)}(Math),i.RIPEMD160})});var Er=$((wr,Cs)=>{(function(i,e){typeof wr=="object"?Cs.exports=wr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(wr,function(i){(function(){var e=i,t=e.lib,r=t.Base,n=e.enc,s=n.Utf8,a=e.algo,o=a.HMAC=r.extend({init:function(c,h){c=this._hasher=new c.init,typeof h=="string"&&(h=s.parse(h));var l=c.blockSize,d=l*4;h.sigBytes>d&&(h=c.finalize(h)),h.clamp();for(var u=this._oKey=h.clone(),x=this._iKey=h.clone(),p=u.words,y=x.words,_=0;_<l;_++)p[_]^=1549556828,y[_]^=909522486;u.sigBytes=x.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var h=this._hasher,l=h.finalize(c);h.reset();var d=h.finalize(this._oKey.clone().concat(l));return d}})})()})});var Ds=$((Ar,Bs)=>{(function(i,e,t){typeof Ar=="object"?Bs.exports=Ar=e(N(),pr(),Er()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(i.CryptoJS)})(Ar,function(i){return function(){var e=i,t=e.lib,r=t.Base,n=t.WordArray,s=e.algo,a=s.SHA256,o=s.HMAC,c=s.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,l){for(var d=this.cfg,u=o.create(d.hasher,h),x=n.create(),p=n.create([1]),y=x.words,_=p.words,f=d.keySize,v=d.iterations;y.length<f;){var g=u.update(l).finalize(p);u.reset();for(var m=g.words,w=m.length,b=g,B=1;B<v;B++){b=u.finalize(b),u.reset();for(var A=b.words,R=0;R<w;R++)m[R]^=A[R]}x.concat(g),_[0]++}return x.sigBytes=f*4,x}});e.PBKDF2=function(h,l,d){return c.create(d).compute(h,l)}}(),i.PBKDF2})});var fe=$((Cr,Fs)=>{(function(i,e,t){typeof Cr=="object"?Fs.exports=Cr=e(N(),y0(),Er()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(i.CryptoJS)})(Cr,function(i){return function(){var e=i,t=e.lib,r=t.Base,n=t.WordArray,s=e.algo,a=s.MD5,o=s.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,h){for(var l,d=this.cfg,u=d.hasher.create(),x=n.create(),p=x.words,y=d.keySize,_=d.iterations;p.length<y;){l&&u.update(l),l=u.update(c).finalize(h),u.reset();for(var f=1;f<_;f++)l=u.finalize(l),u.reset();x.concat(l)}return x.sigBytes=y*4,x}});e.EvpKDF=function(c,h,l){return o.create(l).compute(c,h)}}(),i.EvpKDF})});var J=$((Br,ks)=>{(function(i,e,t){typeof Br=="object"?ks.exports=Br=e(N(),fe()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(i.CryptoJS)})(Br,function(i){i.lib.Cipher||function(e){var t=i,r=t.lib,n=r.Base,s=r.WordArray,a=r.BufferedBlockAlgorithm,o=t.enc,c=o.Utf8,h=o.Base64,l=t.algo,d=l.EvpKDF,u=r.Cipher=a.extend({cfg:n.extend(),createEncryptor:function(E,D){return this.create(this._ENC_XFORM_MODE,E,D)},createDecryptor:function(E,D){return this.create(this._DEC_XFORM_MODE,E,D)},init:function(E,D,O){this.cfg=this.cfg.extend(O),this._xformMode=E,this._key=D,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){E&&this._append(E);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(D){return typeof D=="string"?P:B}return function(D){return{encrypt:function(O,k,j){return E(k).encrypt(D,O,k,j)},decrypt:function(O,k,j){return E(k).decrypt(D,O,k,j)}}}}()}),x=r.StreamCipher=u.extend({_doFinalize:function(){var E=this._process(!0);return E},blockSize:1}),p=t.mode={},y=r.BlockCipherMode=n.extend({createEncryptor:function(E,D){return this.Encryptor.create(E,D)},createDecryptor:function(E,D){return this.Decryptor.create(E,D)},init:function(E,D){this._cipher=E,this._iv=D}}),_=p.CBC=function(){var E=y.extend();E.Encryptor=E.extend({processBlock:function(O,k){var j=this._cipher,I=j.blockSize;D.call(this,O,k,I),j.encryptBlock(O,k),this._prevBlock=O.slice(k,k+I)}}),E.Decryptor=E.extend({processBlock:function(O,k){var j=this._cipher,I=j.blockSize,L=O.slice(k,k+I);j.decryptBlock(O,k),D.call(this,O,k,I),this._prevBlock=L}});function D(O,k,j){var I,L=this._iv;L?(I=L,this._iv=e):I=this._prevBlock;for(var z=0;z<j;z++)O[k+z]^=I[z]}return E}(),f=t.pad={},v=f.Pkcs7={pad:function(E,D){for(var O=D*4,k=O-E.sigBytes%O,j=k<<24|k<<16|k<<8|k,I=[],L=0;L<k;L+=4)I.push(j);var z=s.create(I,k);E.concat(z)},unpad:function(E){var D=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=D}},g=r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:_,padding:v}),reset:function(){var E;u.reset.call(this);var D=this.cfg,O=D.iv,k=D.mode;this._xformMode==this._ENC_XFORM_MODE?E=k.createEncryptor:(E=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,O&&O.words):(this._mode=E.call(k,this,O&&O.words),this._mode.__creator=E)},_doProcessBlock:function(E,D){this._mode.processBlock(E,D)},_doFinalize:function(){var E,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),D.unpad(E)),E},blockSize:128/32}),m=r.CipherParams=n.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),w=t.format={},b=w.OpenSSL={stringify:function(E){var D,O=E.ciphertext,k=E.salt;return k?D=s.create([1398893684,1701076831]).concat(k).concat(O):D=O,D.toString(h)},parse:function(E){var D,O=h.parse(E),k=O.words;return k[0]==1398893684&&k[1]==1701076831&&(D=s.create(k.slice(2,4)),k.splice(0,4),O.sigBytes-=16),m.create({ciphertext:O,salt:D})}},B=r.SerializableCipher=n.extend({cfg:n.extend({format:b}),encrypt:function(E,D,O,k){k=this.cfg.extend(k);var j=E.createEncryptor(O,k),I=j.finalize(D),L=j.cfg;return m.create({ciphertext:I,key:O,iv:L.iv,algorithm:E,mode:L.mode,padding:L.padding,blockSize:E.blockSize,formatter:k.format})},decrypt:function(E,D,O,k){k=this.cfg.extend(k),D=this._parse(D,k.format);var j=E.createDecryptor(O,k).finalize(D.ciphertext);return j},_parse:function(E,D){return typeof E=="string"?D.parse(E,this):E}}),A=t.kdf={},R=A.OpenSSL={execute:function(E,D,O,k,j){if(k||(k=s.random(64/8)),j)var I=d.create({keySize:D+O,hasher:j}).compute(E,k);else var I=d.create({keySize:D+O}).compute(E,k);var L=s.create(I.words.slice(D),O*4);return I.sigBytes=D*4,m.create({key:I,iv:L,salt:k})}},P=r.PasswordBasedCipher=B.extend({cfg:B.cfg.extend({kdf:R}),encrypt:function(E,D,O,k){k=this.cfg.extend(k);var j=k.kdf.execute(O,E.keySize,E.ivSize,k.salt,k.hasher);k.iv=j.iv;var I=B.encrypt.call(this,E,D,j.key,k);return I.mixIn(j),I},decrypt:function(E,D,O,k){k=this.cfg.extend(k),D=this._parse(D,k.format);var j=k.kdf.execute(O,E.keySize,E.ivSize,D.salt,k.hasher);k.iv=j.iv;var I=B.decrypt.call(this,E,D,j.key,k);return I}})}()})});var Ts=$((Dr,Ss)=>{(function(i,e,t){typeof Dr=="object"?Ss.exports=Dr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Dr,function(i){return i.mode.CFB=function(){var e=i.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(r,n){var s=this._cipher,a=s.blockSize;t.call(this,r,n,a,s),this._prevBlock=r.slice(n,n+a)}}),e.Decryptor=e.extend({processBlock:function(r,n){var s=this._cipher,a=s.blockSize,o=r.slice(n,n+a);t.call(this,r,n,a,s),this._prevBlock=o}});function t(r,n,s,a){var o,c=this._iv;c?(o=c.slice(0),this._iv=void 0):o=this._prevBlock,a.encryptBlock(o,0);for(var h=0;h<s;h++)r[n+h]^=o[h]}return e}(),i.mode.CFB})});var Ps=$((Fr,Rs)=>{(function(i,e,t){typeof Fr=="object"?Rs.exports=Fr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Fr,function(i){return i.mode.CTR=function(){var e=i.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,n){var s=this._cipher,a=s.blockSize,o=this._iv,c=this._counter;o&&(c=this._counter=o.slice(0),this._iv=void 0);var h=c.slice(0);s.encryptBlock(h,0),c[a-1]=c[a-1]+1|0;for(var l=0;l<a;l++)r[n+l]^=h[l]}});return e.Decryptor=t,e}(),i.mode.CTR})});var Is=$((kr,Os)=>{(function(i,e,t){typeof kr=="object"?Os.exports=kr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(kr,function(i){return i.mode.CTRGladman=function(){var e=i.lib.BlockCipherMode.extend();function t(s){if((s>>24&255)===255){var a=s>>16&255,o=s>>8&255,c=s&255;a===255?(a=0,o===255?(o=0,c===255?c=0:++c):++o):++a,s=0,s+=a<<16,s+=o<<8,s+=c}else s+=1<<24;return s}function r(s){return(s[0]=t(s[0]))===0&&(s[1]=t(s[1])),s}var n=e.Encryptor=e.extend({processBlock:function(s,a){var o=this._cipher,c=o.blockSize,h=this._iv,l=this._counter;h&&(l=this._counter=h.slice(0),this._iv=void 0),r(l);var d=l.slice(0);o.encryptBlock(d,0);for(var u=0;u<c;u++)s[a+u]^=d[u]}});return e.Decryptor=n,e}(),i.mode.CTRGladman})});var $s=$((Sr,js)=>{(function(i,e,t){typeof Sr=="object"?js.exports=Sr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Sr,function(i){return i.mode.OFB=function(){var e=i.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,n){var s=this._cipher,a=s.blockSize,o=this._iv,c=this._keystream;o&&(c=this._keystream=o.slice(0),this._iv=void 0),s.encryptBlock(c,0);for(var h=0;h<a;h++)r[n+h]^=c[h]}});return e.Decryptor=t,e}(),i.mode.OFB})});var Ls=$((Tr,qs)=>{(function(i,e,t){typeof Tr=="object"?qs.exports=Tr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Tr,function(i){return i.mode.ECB=function(){var e=i.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,r){this._cipher.encryptBlock(t,r)}}),e.Decryptor=e.extend({processBlock:function(t,r){this._cipher.decryptBlock(t,r)}}),e}(),i.mode.ECB})});var Hs=$((Rr,Us)=>{(function(i,e,t){typeof Rr=="object"?Us.exports=Rr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Rr,function(i){return i.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=t*4,s=n-r%n,a=r+s-1;e.clamp(),e.words[a>>>2]|=s<<24-a%4*8,e.sigBytes+=s},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},i.pad.Ansix923})});var zs=$((Pr,Ns)=>{(function(i,e,t){typeof Pr=="object"?Ns.exports=Pr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Pr,function(i){return i.pad.Iso10126={pad:function(e,t){var r=t*4,n=r-e.sigBytes%r;e.concat(i.lib.WordArray.random(n-1)).concat(i.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},i.pad.Iso10126})});var Ws=$((Or,Ms)=>{(function(i,e,t){typeof Or=="object"?Ms.exports=Or=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Or,function(i){return i.pad.Iso97971={pad:function(e,t){e.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(e,t)},unpad:function(e){i.pad.ZeroPadding.unpad(e),e.sigBytes--}},i.pad.Iso97971})});var Gs=$((Ir,Ks)=>{(function(i,e,t){typeof Ir=="object"?Ks.exports=Ir=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(Ir,function(i){return i.pad.ZeroPadding={pad:function(e,t){var r=t*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},i.pad.ZeroPadding})});var Vs=$((jr,Js)=>{(function(i,e,t){typeof jr=="object"?Js.exports=jr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})(jr,function(i){return i.pad.NoPadding={pad:function(){},unpad:function(){}},i.pad.NoPadding})});var Qs=$(($r,Xs)=>{(function(i,e,t){typeof $r=="object"?Xs.exports=$r=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(i.CryptoJS)})($r,function(i){return function(e){var t=i,r=t.lib,n=r.CipherParams,s=t.enc,a=s.Hex,o=t.format,c=o.Hex={stringify:function(h){return h.ciphertext.toString(a)},parse:function(h){var l=a.parse(h);return n.create({ciphertext:l})}}}(),i.format.Hex})});var Zs=$((qr,Ys)=>{(function(i,e,t){typeof qr=="object"?Ys.exports=qr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(i.CryptoJS)})(qr,function(i){return function(){var e=i,t=e.lib,r=t.BlockCipher,n=e.algo,s=[],a=[],o=[],c=[],h=[],l=[],d=[],u=[],x=[],p=[];(function(){for(var f=[],v=0;v<256;v++)v<128?f[v]=v<<1:f[v]=v<<1^283;for(var g=0,m=0,v=0;v<256;v++){var w=m^m<<1^m<<2^m<<3^m<<4;w=w>>>8^w&255^99,s[g]=w,a[w]=g;var b=f[g],B=f[b],A=f[B],R=f[w]*257^w*16843008;o[g]=R<<24|R>>>8,c[g]=R<<16|R>>>16,h[g]=R<<8|R>>>24,l[g]=R;var R=A*16843009^B*65537^b*257^g*16843008;d[w]=R<<24|R>>>8,u[w]=R<<16|R>>>16,x[w]=R<<8|R>>>24,p[w]=R,g?(g=b^f[f[f[A^b]]],m^=f[f[m]]):g=m=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],_=n.AES=r.extend({_doReset:function(){var f;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,g=v.words,m=v.sigBytes/4,w=this._nRounds=m+6,b=(w+1)*4,B=this._keySchedule=[],A=0;A<b;A++)A<m?B[A]=g[A]:(f=B[A-1],A%m?m>6&&A%m==4&&(f=s[f>>>24]<<24|s[f>>>16&255]<<16|s[f>>>8&255]<<8|s[f&255]):(f=f<<8|f>>>24,f=s[f>>>24]<<24|s[f>>>16&255]<<16|s[f>>>8&255]<<8|s[f&255],f^=y[A/m|0]<<24),B[A]=B[A-m]^f);for(var R=this._invKeySchedule=[],P=0;P<b;P++){var A=b-P;if(P%4)var f=B[A];else var f=B[A-4];P<4||A<=4?R[P]=f:R[P]=d[s[f>>>24]]^u[s[f>>>16&255]]^x[s[f>>>8&255]]^p[s[f&255]]}}},encryptBlock:function(f,v){this._doCryptBlock(f,v,this._keySchedule,o,c,h,l,s)},decryptBlock:function(f,v){var g=f[v+1];f[v+1]=f[v+3],f[v+3]=g,this._doCryptBlock(f,v,this._invKeySchedule,d,u,x,p,a);var g=f[v+1];f[v+1]=f[v+3],f[v+3]=g},_doCryptBlock:function(f,v,g,m,w,b,B,A){for(var R=this._nRounds,P=f[v]^g[0],E=f[v+1]^g[1],D=f[v+2]^g[2],O=f[v+3]^g[3],k=4,j=1;j<R;j++){var I=m[P>>>24]^w[E>>>16&255]^b[D>>>8&255]^B[O&255]^g[k++],L=m[E>>>24]^w[D>>>16&255]^b[O>>>8&255]^B[P&255]^g[k++],z=m[D>>>24]^w[O>>>16&255]^b[P>>>8&255]^B[E&255]^g[k++],C=m[O>>>24]^w[P>>>16&255]^b[E>>>8&255]^B[D&255]^g[k++];P=I,E=L,D=z,O=C}var I=(A[P>>>24]<<24|A[E>>>16&255]<<16|A[D>>>8&255]<<8|A[O&255])^g[k++],L=(A[E>>>24]<<24|A[D>>>16&255]<<16|A[O>>>8&255]<<8|A[P&255])^g[k++],z=(A[D>>>24]<<24|A[O>>>16&255]<<16|A[P>>>8&255]<<8|A[E&255])^g[k++],C=(A[O>>>24]<<24|A[P>>>16&255]<<16|A[E>>>8&255]<<8|A[D&255])^g[k++];f[v]=I,f[v+1]=L,f[v+2]=z,f[v+3]=C},keySize:256/32});e.AES=r._createHelper(_)}(),i.AES})});var tn=$((Lr,en)=>{(function(i,e,t){typeof Lr=="object"?en.exports=Lr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(i.CryptoJS)})(Lr,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,n=t.BlockCipher,s=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=n.extend({_doReset:function(){for(var y=this._key,_=y.words,f=[],v=0;v<56;v++){var g=a[v]-1;f[v]=_[g>>>5]>>>31-g%32&1}for(var m=this._subKeys=[],w=0;w<16;w++){for(var b=m[w]=[],B=c[w],v=0;v<24;v++)b[v/6|0]|=f[(o[v]-1+B)%28]<<31-v%6,b[4+(v/6|0)]|=f[28+(o[v+24]-1+B)%28]<<31-v%6;b[0]=b[0]<<1|b[0]>>>31;for(var v=1;v<7;v++)b[v]=b[v]>>>(v-1)*4+3;b[7]=b[7]<<5|b[7]>>>27}for(var A=this._invSubKeys=[],v=0;v<16;v++)A[v]=m[15-v]},encryptBlock:function(y,_){this._doCryptBlock(y,_,this._subKeys)},decryptBlock:function(y,_){this._doCryptBlock(y,_,this._invSubKeys)},_doCryptBlock:function(y,_,f){this._lBlock=y[_],this._rBlock=y[_+1],u.call(this,4,252645135),u.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),u.call(this,1,1431655765);for(var v=0;v<16;v++){for(var g=f[v],m=this._lBlock,w=this._rBlock,b=0,B=0;B<8;B++)b|=h[B][((w^g[B])&l[B])>>>0];this._lBlock=w,this._rBlock=m^b}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,u.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),y[_]=this._lBlock,y[_+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function u(y,_){var f=(this._lBlock>>>y^this._rBlock)&_;this._rBlock^=f,this._lBlock^=f<<y}function x(y,_){var f=(this._rBlock>>>y^this._lBlock)&_;this._lBlock^=f,this._rBlock^=f<<y}e.DES=n._createHelper(d);var p=s.TripleDES=n.extend({_doReset:function(){var y=this._key,_=y.words;if(_.length!==2&&_.length!==4&&_.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var f=_.slice(0,2),v=_.length<4?_.slice(0,2):_.slice(2,4),g=_.length<6?_.slice(0,2):_.slice(4,6);this._des1=d.createEncryptor(r.create(f)),this._des2=d.createEncryptor(r.create(v)),this._des3=d.createEncryptor(r.create(g))},encryptBlock:function(y,_){this._des1.encryptBlock(y,_),this._des2.decryptBlock(y,_),this._des3.encryptBlock(y,_)},decryptBlock:function(y,_){this._des3.decryptBlock(y,_),this._des2.encryptBlock(y,_),this._des1.decryptBlock(y,_)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=n._createHelper(p)}(),i.TripleDES})});var sn=$((Ur,rn)=>{(function(i,e,t){typeof Ur=="object"?rn.exports=Ur=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(i.CryptoJS)})(Ur,function(i){return function(){var e=i,t=e.lib,r=t.StreamCipher,n=e.algo,s=n.RC4=r.extend({_doReset:function(){for(var c=this._key,h=c.words,l=c.sigBytes,d=this._S=[],u=0;u<256;u++)d[u]=u;for(var u=0,x=0;u<256;u++){var p=u%l,y=h[p>>>2]>>>24-p%4*8&255;x=(x+d[u]+y)%256;var _=d[u];d[u]=d[x],d[x]=_}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=a.call(this)},keySize:256/32,ivSize:0});function a(){for(var c=this._S,h=this._i,l=this._j,d=0,u=0;u<4;u++){h=(h+1)%256,l=(l+c[h])%256;var x=c[h];c[h]=c[l],c[l]=x,d|=c[(c[h]+c[l])%256]<<24-u*8}return this._i=h,this._j=l,d}e.RC4=r._createHelper(s);var o=n.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)}});e.RC4Drop=r._createHelper(o)}(),i.RC4})});var on=$((Hr,nn)=>{(function(i,e,t){typeof Hr=="object"?nn.exports=Hr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(i.CryptoJS)})(Hr,function(i){return function(){var e=i,t=e.lib,r=t.StreamCipher,n=e.algo,s=[],a=[],o=[],c=n.Rabbit=r.extend({_doReset:function(){for(var l=this._key.words,d=this.cfg.iv,u=0;u<4;u++)l[u]=(l[u]<<8|l[u]>>>24)&16711935|(l[u]<<24|l[u]>>>8)&4278255360;var x=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],p=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var u=0;u<4;u++)h.call(this);for(var u=0;u<8;u++)p[u]^=x[u+4&7];if(d){var y=d.words,_=y[0],f=y[1],v=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,g=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,m=v>>>16|g&4294901760,w=g<<16|v&65535;p[0]^=v,p[1]^=m,p[2]^=g,p[3]^=w,p[4]^=v,p[5]^=m,p[6]^=g,p[7]^=w;for(var u=0;u<4;u++)h.call(this)}},_doProcessBlock:function(l,d){var u=this._X;h.call(this),s[0]=u[0]^u[5]>>>16^u[3]<<16,s[1]=u[2]^u[7]>>>16^u[5]<<16,s[2]=u[4]^u[1]>>>16^u[7]<<16,s[3]=u[6]^u[3]>>>16^u[1]<<16;for(var x=0;x<4;x++)s[x]=(s[x]<<8|s[x]>>>24)&16711935|(s[x]<<24|s[x]>>>8)&4278255360,l[d+x]^=s[x]},blockSize:128/32,ivSize:64/32});function h(){for(var l=this._X,d=this._C,u=0;u<8;u++)a[u]=d[u];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<a[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<a[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<a[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<a[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<a[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<a[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<a[6]>>>0?1:0)|0,this._b=d[7]>>>0<a[7]>>>0?1:0;for(var u=0;u<8;u++){var x=l[u]+d[u],p=x&65535,y=x>>>16,_=((p*p>>>17)+p*y>>>15)+y*y,f=((x&4294901760)*x|0)+((x&65535)*x|0);o[u]=_^f}l[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,l[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,l[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,l[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,l[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,l[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,l[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,l[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=r._createHelper(c)}(),i.Rabbit})});var cn=$((Nr,an)=>{(function(i,e,t){typeof Nr=="object"?an.exports=Nr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(i.CryptoJS)})(Nr,function(i){return function(){var e=i,t=e.lib,r=t.StreamCipher,n=e.algo,s=[],a=[],o=[],c=n.RabbitLegacy=r.extend({_doReset:function(){var l=this._key.words,d=this.cfg.iv,u=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],x=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var p=0;p<4;p++)h.call(this);for(var p=0;p<8;p++)x[p]^=u[p+4&7];if(d){var y=d.words,_=y[0],f=y[1],v=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,g=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,m=v>>>16|g&4294901760,w=g<<16|v&65535;x[0]^=v,x[1]^=m,x[2]^=g,x[3]^=w,x[4]^=v,x[5]^=m,x[6]^=g,x[7]^=w;for(var p=0;p<4;p++)h.call(this)}},_doProcessBlock:function(l,d){var u=this._X;h.call(this),s[0]=u[0]^u[5]>>>16^u[3]<<16,s[1]=u[2]^u[7]>>>16^u[5]<<16,s[2]=u[4]^u[1]>>>16^u[7]<<16,s[3]=u[6]^u[3]>>>16^u[1]<<16;for(var x=0;x<4;x++)s[x]=(s[x]<<8|s[x]>>>24)&16711935|(s[x]<<24|s[x]>>>8)&4278255360,l[d+x]^=s[x]},blockSize:128/32,ivSize:64/32});function h(){for(var l=this._X,d=this._C,u=0;u<8;u++)a[u]=d[u];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<a[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<a[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<a[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<a[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<a[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<a[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<a[6]>>>0?1:0)|0,this._b=d[7]>>>0<a[7]>>>0?1:0;for(var u=0;u<8;u++){var x=l[u]+d[u],p=x&65535,y=x>>>16,_=((p*p>>>17)+p*y>>>15)+y*y,f=((x&4294901760)*x|0)+((x&65535)*x|0);o[u]=_^f}l[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,l[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,l[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,l[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,l[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,l[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,l[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,l[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=r._createHelper(c)}(),i.RabbitLegacy})});var un=$((zr,ln)=>{(function(i,e,t){typeof zr=="object"?ln.exports=zr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(i.CryptoJS)})(zr,function(i){return function(){var e=i,t=e.lib,r=t.BlockCipher,n=e.algo;let s=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(p,y){let _=y>>24&255,f=y>>16&255,v=y>>8&255,g=y&255,m=p.sbox[0][_]+p.sbox[1][f];return m=m^p.sbox[2][v],m=m+p.sbox[3][g],m}function l(p,y,_){let f=y,v=_,g;for(let m=0;m<s;++m)f=f^p.pbox[m],v=h(p,f)^v,g=f,f=v,v=g;return g=f,f=v,v=g,v=v^p.pbox[s],f=f^p.pbox[s+1],{left:f,right:v}}function d(p,y,_){let f=y,v=_,g;for(let m=s+1;m>1;--m)f=f^p.pbox[m],v=h(p,f)^v,g=f,f=v,v=g;return g=f,f=v,v=g,v=v^p.pbox[1],f=f^p.pbox[0],{left:f,right:v}}function u(p,y,_){for(let w=0;w<4;w++){p.sbox[w]=[];for(let b=0;b<256;b++)p.sbox[w][b]=o[w][b]}let f=0;for(let w=0;w<s+2;w++)p.pbox[w]=a[w]^y[f],f++,f>=_&&(f=0);let v=0,g=0,m=0;for(let w=0;w<s+2;w+=2)m=l(p,v,g),v=m.left,g=m.right,p.pbox[w]=v,p.pbox[w+1]=g;for(let w=0;w<4;w++)for(let b=0;b<256;b+=2)m=l(p,v,g),v=m.left,g=m.right,p.sbox[w][b]=v,p.sbox[w][b+1]=g;return!0}var x=n.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var p=this._keyPriorReset=this._key,y=p.words,_=p.sigBytes/4;u(c,y,_)}},encryptBlock:function(p,y){var _=l(c,p[y],p[y+1]);p[y]=_.left,p[y+1]=_.right},decryptBlock:function(p,y){var _=d(c,p[y],p[y+1]);p[y]=_.left,p[y+1]=_.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(x)}(),i.Blowfish})});var dn=$((Mr,hn)=>{(function(i,e,t){typeof Mr=="object"?hn.exports=Mr=e(N(),Ft(),as(),ls(),me(),ds(),ye(),y0(),pr(),_s(),b0(),ys(),ws(),As(),Er(),Ds(),fe(),J(),Ts(),Ps(),Is(),$s(),Ls(),Hs(),zs(),Ws(),Gs(),Vs(),Qs(),Zs(),tn(),sn(),on(),cn(),un()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):i.CryptoJS=e(i.CryptoJS)})(Mr,function(i){return i})});var z0=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(pe(),be)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var nt=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},jt=class extends nt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},$t=class extends nt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},qt=class extends nt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Lt;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Lt||(Lt={}));var qn=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},ot=class{constructor(e,{headers:t={},customFetch:r,region:n=Lt.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=z0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return qn(this,void 0,void 0,function*(){try{let{headers:n,method:s,body:a}=t,o={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let h;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(o["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(o["Content-Type"]="application/json",h=JSON.stringify(a)));let l=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:h}).catch(p=>{throw new jt(p)}),d=l.headers.get("x-relay-error");if(d&&d==="true")throw new $t(l);if(!l.ok)throw new qt(l);let u=((r=l.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return u==="application/json"?x=yield l.json():u==="application/octet-stream"?x=yield l.blob():u==="text/event-stream"?x=l:u==="multipart/form-data"?x=yield l.formData():x=yield l.text(),{data:x,error:null}}catch(n){return{data:null,error:n}}})}};var ri=N0(ti(),1),{PostgrestClient:ii,PostgrestQueryBuilder:xa,PostgrestFilterBuilder:va,PostgrestTransformBuilder:pa,PostgrestBuilder:_a,PostgrestError:Xn}=ri.default;function si(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var ni=si();var oi="2.11.15";var ai=`realtime-js/${oi}`,ci="1.0.0";var Mt=1e4,li=1e3,ze;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ze||(ze={}));var X;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(X||(X={}));var te;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(te||(te={}));var zt;(function(i){i.websocket="websocket"})(zt||(zt={}));var _e;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(_e||(_e={}));var ft=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let n=t.getUint8(1),s=t.getUint8(2),a=this.HEADER_LENGTH+2,o=r.decode(e.slice(a,a+n));a=a+n;let c=r.decode(e.slice(a,a+s));a=a+s;let h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:h}}};var we=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var W;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(W||(W={}));var c0=(i,e,t={})=>{var r;let n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=Qn(a,i,e,n),s),{})},Qn=(i,e,t,r)=>{let n=e.find(o=>o.name===i),s=n?.type,a=t[i];return s&&!r.includes(s)?ui(s,a):a0(a)},ui=(i,e)=>{if(i.charAt(0)==="_"){let t=i.slice(1,i.length);return to(e,t)}switch(i){case W.bool:return Yn(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Zn(e);case W.json:case W.jsonb:return eo(e);case W.timestamp:return ro(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return a0(e);default:return a0(e)}},a0=i=>i,Yn=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Zn=i=>{if(typeof i=="string"){let e=parseFloat(i);if(!Number.isNaN(e))return e}return i},eo=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},to=(i,e)=>{if(typeof i!="string")return i;let t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let s,a=i.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>ui(e,o))}return i},ro=i=>typeof i=="string"?i.replace(" ","T"):i,Wt=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var Ee=class{constructor(e,t,r={},n=Mt){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var l0;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(l0||(l0={}));var Me=class i{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{let{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=i.syncState(this.state,n,s,a),this.pendingDiffs.forEach(c=>{this.state=i.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},n=>{let{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=i.syncDiff(this.state,n,s,a),o())}),this.onJoin((n,s,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:s,newPresences:a})}),this.onLeave((n,s,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){let s=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(s,(h,l)=>{a[h]||(c[h]=l)}),this.map(a,(h,l)=>{let d=s[h];if(d){let u=l.map(_=>_.presence_ref),x=d.map(_=>_.presence_ref),p=l.filter(_=>x.indexOf(_.presence_ref)<0),y=d.filter(_=>u.indexOf(_.presence_ref)<0);p.length>0&&(o[h]=p),y.length>0&&(c[h]=y)}else o[h]=l}),this.syncDiff(s,{joins:o,leaves:c},r,n)}static syncDiff(e,t,r,n){let{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,(o,c)=>{var h;let l=(h=e[o])!==null&&h!==void 0?h:[];if(e[o]=this.cloneDeep(c),l.length>0){let d=e[o].map(x=>x.presence_ref),u=l.filter(x=>d.indexOf(x.presence_ref)<0);e[o].unshift(...u)}r(o,l,c)}),this.map(a,(o,c)=>{let h=e[o];if(!h)return;let l=c.map(d=>d.presence_ref);h=h.filter(d=>l.indexOf(d.presence_ref)<0),e[o]=h,n(o,h,c),h.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let n=e[r];return"metas"in n?t[r]=n.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var u0;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(u0||(u0={}));var h0;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(h0||(h0={}));var ae;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(ae||(ae={}));var We=class i{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ee(this,te.join,this.params,this.timeout),this.rejoinTimer=new we(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(te.reply,{},(n,s)=>{this._trigger(this._replyEventName(s),n)}),this.presence=new Me(this),this.broadcastEndpointURL=Wt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==X.closed){let{config:{broadcast:s,presence:a,private:o}}=this.params;this._onError(l=>e?.(ae.CHANNEL_ERROR,l)),this._onClose(()=>e?.(ae.CLOSED));let c={},h={broadcast:s,presence:a,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(l=>l.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:l})=>{var d;if(this.socket.setAuth(),l===void 0){e?.(ae.SUBSCRIBED);return}else{let u=this.bindings.postgres_changes,x=(d=u?.length)!==null&&d!==void 0?d:0,p=[];for(let y=0;y<x;y++){let _=u[y],{filter:{event:f,schema:v,table:g,filter:m}}=_,w=l&&l[y];if(w&&w.event===f&&w.schema===v&&w.table===g&&w.filter===m)p.push(Object.assign(Object.assign({},_),{id:w.id}));else{this.unsubscribe(),this.state=X.errored,e?.(ae.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ae.SUBSCRIBED);return}}).receive("error",l=>{this.state=X.errored,e?.(ae.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e?.(ae.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){let{event:s,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=h.body)===null||n===void 0?void 0:n.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,c;let h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(te.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Ee(this,te.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){let n=new AbortController,s=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ee(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;let a=e.toLocaleLowerCase(),{close:o,error:c,leave:h,join:l}=te;if(r&&[o,c,h,l].indexOf(a)>=0&&r!==this._joinRef())return;let u=this._onMessage(a,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var p,y,_;return((p=x.filter)===null||p===void 0?void 0:p.event)==="*"||((_=(y=x.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(x=>x.callback(u,r)):(s=this.bindings[a])===null||s===void 0||s.filter(x=>{var p,y,_,f,v,g;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){let m=x.id,w=(p=x.filter)===null||p===void 0?void 0:p.event;return m&&((y=t.ids)===null||y===void 0?void 0:y.includes(m))&&(w==="*"||w?.toLocaleLowerCase()===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{let m=(v=(f=x?.filter)===null||f===void 0?void 0:f.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return m==="*"||m===((g=t?.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof u=="object"&&"ids"in u){let p=u.data,{schema:y,table:_,commit_timestamp:f,type:v,errors:g}=p;u=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:f,eventType:v,new:{},old:{},errors:g}),this._getPayloadRecords(p))}x.callback(u,r)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var s;return!(((s=n.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&i.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(te.close,{},e)}_onError(e){this._on(te.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=c0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=c0(e.columns,e.old_record)),t}};var hi=()=>{},so=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ke=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mt,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hi,this.ref=0,this.logger=hi,this.conn=null,this.sendBuffer=[],this.serializer=new ft,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Promise.resolve().then(()=>(pe(),be)).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${zt.websocket}`,this.httpEndpoint=Wt(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let n=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new we(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=ni),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ci}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ze.connecting:return _e.Connecting;case ze.open:return _e.Open;case ze.closing:return _e.Closing;default:return _e.Closed}}isConnected(){return this.connectionState()===_e.Open}channel(e,t={config:{}}){let r=`realtime:${e}`,n=this.getChannels().find(s=>s.topic===r);if(n)return n;{let s=new We(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){let{topic:t,event:r,payload:n,ref:s}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${r} (${s})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{let n={access_token:t,version:ai};t&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(te.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(li,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:s,ref:a}=t;r==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${n} ${a&&"("+a+")"||""}`,s),Array.from(this.channels).filter(o=>o._isMember(r)).forEach(o=>o._trigger(n,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(te.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([so],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}};var Ge=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function G(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Kt=class extends Ge{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Ae=class extends Ge{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var no=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},Jt=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(pe(),be)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},di=()=>no(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>(pe(),be))).Response:Response}),Gt=i=>{if(Array.isArray(i))return i.map(t=>Gt(t));if(typeof i=="function"||i!==Object(i))return i;let e={};return Object.entries(i).forEach(([t,r])=>{let n=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[n]=Gt(r)}),e};var Ce=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},d0=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),oo=(i,e,t)=>Ce(void 0,void 0,void 0,function*(){let r=yield di();i instanceof r&&!t?.noResolveJson?i.json().then(n=>{e(new Kt(d0(n),i.status||500))}).catch(n=>{e(new Ae(d0(n),n))}):e(new Ae(d0(i),i))}),ao=(i,e,t,r)=>{let n={method:i,headers:e?.headers||{}};return i==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),t))};function xt(i,e,t,r,n,s){return Ce(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(t,ao(e,r,n,s)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>oo(c,o,r))})})}function Je(i,e,t,r){return Ce(this,void 0,void 0,function*(){return xt(i,"GET",e,t,r)})}function ce(i,e,t,r,n){return Ce(this,void 0,void 0,function*(){return xt(i,"POST",e,r,n,t)})}function fi(i,e,t,r,n){return Ce(this,void 0,void 0,function*(){return xt(i,"PUT",e,r,n,t)})}function xi(i,e,t,r){return Ce(this,void 0,void 0,function*(){return xt(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Vt(i,e,t,r,n){return Ce(this,void 0,void 0,function*(){return xt(i,"DELETE",e,r,n,t)})}var Y=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},co={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},vt=class{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Jt(n)}uploadOrUpdate(e,t,r,n){return Y(this,void 0,void 0,function*(){try{let s,a=Object.assign(Object.assign({},vi),n),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)}),c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n?.headers&&(o=Object.assign(Object.assign({},o),n.headers));let h=this._removeEmptyFolders(t),l=this._getFinalPath(h),d=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:s,headers:o},a?.duplex?{duplex:a.duplex}:{})),u=yield d.json();return d.ok?{data:{path:h,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(s){if(G(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Y(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c,h=Object.assign({upsert:vi.upsert},n),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,l["cache-control"]=`max-age=${h.cacheControl}`,l["content-type"]=h.contentType);let d=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:l}),u=yield d.json();return d.ok?{data:{path:s,fullPath:u.Key},error:null}:{data:null,error:u}}catch(c){if(G(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Y(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");let s=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new Ge("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}update(e,t,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Y(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Y(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield ce(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Y(this,void 0,void 0,function*(){try{let n=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}download(e,t){return Y(this,void 0,void 0,function*(){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),a=s?`?${s}`:"";try{let o=this._getFinalPath(e);return{data:yield(yield Je(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(G(o))return{data:null,error:o};throw o}})}info(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Je(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Gt(r),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}exists(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield xi(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(G(r)&&r instanceof Ae){let n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);let o=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&n.push(c);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${h}`)}}}remove(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}list(e,t,r){return Y(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},co),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var pi="2.7.1";var _i={"X-Client-Info":`storage-js/${pi}`};var Ve=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},pt=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},_i),t),this.fetch=Jt(r)}listBuckets(){return Ve(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(G(e))return{data:null,error:e};throw e}})}getBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ve(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}};var _t=class extends pt{constructor(e,t={},r){super(e,t,r)}from(e){return new vt(this.url,this.headers,e,this.fetch)}};var gi="2.50.2";var gt="";typeof Deno<"u"?gt="deno":typeof document<"u"?gt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gt="react-native":gt="node";var lo={"X-Client-Info":`supabase-js-${gt}/${gi}`},mi={headers:lo},yi={schema:"public"},bi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wi={};pe();var uo=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},ho=i=>{let e;return i?e=i:typeof fetch>"u"?e=Jr:e=fetch,(...t)=>e(...t)},fo=()=>typeof Headers>"u"?Vr:Headers,Ei=(i,e,t)=>{let r=ho(t),n=fo();return(s,a)=>uo(void 0,void 0,void 0,function*(){var o;let c=(o=yield e())!==null&&o!==void 0?o:i,h=new n(a?.headers);return h.has("apikey")||h.set("apikey",i),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:h}))})};var xo=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})};function Ai(i){return i.endsWith("/")?i:i+"/"}function Ci(i,e){var t,r;let{db:n,auth:s,realtime:a,global:o}=i,{db:c,auth:h,realtime:l,global:d}=e,u={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},h),s),realtime:Object.assign(Object.assign({},l),a),global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(t=d?.headers)!==null&&t!==void 0?t:{}),(r=o?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>xo(this,void 0,void 0,function*(){return""})};return i.accessToken?u.accessToken=i.accessToken:delete u.accessToken,u}var Xt="2.70.0";var Be=30*1e3,Qt=3,Yt=Qt*Be,Bi="http://localhost:9999",Di="supabase.auth.token";var Fi={"X-Client-Info":`gotrue-js/${Xt}`};var mt="X-Supabase-Api-Version",f0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ki=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Si=6e5;var yt=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function q(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}var Zt=class extends yt{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function Ti(i){return q(i)&&i.name==="AuthApiError"}var Xe=class extends yt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},le=class extends yt{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}},ie=class extends le{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Ri(i){return q(i)&&i.name==="AuthSessionMissingError"}var De=class extends le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Fe=class extends le{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ke=class extends le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Pi(i){return q(i)&&i.name==="AuthImplicitGrantRedirectError"}var bt=class extends le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Qe=class extends le{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function er(i){return q(i)&&i.name==="AuthRetryableFetchError"}var wt=class extends le{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var de=class extends le{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Oi=` 	
\r=`.split(""),vo=(()=>{let i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Oi.length;e+=1)i[Oi[e].charCodeAt(0)]=-2;for(let e=0;e<tr.length;e+=1)i[tr[e].charCodeAt(0)]=e;return i})();function Ii(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(tr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(tr[r]),e.queuedBits-=6}}function ji(i,e,t){let r=vo[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function x0(i){let e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},s=a=>{go(a,r,t)};for(let a=0;a<i.length;a+=1)ji(i.charCodeAt(a),n,s);return e.join("")}function po(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function _o(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){let n=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}po(r,e)}}function go(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function $i(i){let e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<i.length;n+=1)ji(i.charCodeAt(n),t,r);return new Uint8Array(e)}function qi(i){let e=[];return _o(i,t=>e.push(t)),new Uint8Array(e)}function Li(i){let e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};return i.forEach(n=>Ii(n,t,r)),Ii(null,t,r),e.join("")}function Ui(i){return Math.round(Date.now()/1e3)+i}function Hi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}var se=()=>typeof window<"u"&&typeof document<"u",Se={tested:!1,writable:!1},ge=()=>{if(!se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Se.tested)return Se.writable;let i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Se.tested=!0,Se.writable=!0}catch{Se.tested=!0,Se.writable=!1}return Se.writable};function Ni(i){let e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,s)=>{e[s]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}var rr=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(pe(),be)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},zi=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",v0=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},At=async(i,e)=>{let t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ct=async(i,e)=>{await i.removeItem(e)},Et=class i{constructor(){this.promise=new i.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Et.promiseConstructor=Promise;function ir(i){let e=i.split(".");if(e.length!==3)throw new de("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ki.test(e[r]))throw new de("JWT not in base64url format");return{header:JSON.parse(x0(e[0])),payload:JSON.parse(x0(e[1])),signature:$i(e[2]),raw:{header:e[0],payload:e[1]}}}async function Mi(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function Wi(i,e){return new Promise((r,n)=>{(async()=>{for(let s=0;s<1/0;s++)try{let a=await i(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){n(a);return}}})()})}function mo(i){return("0"+i.toString(16)).substr(-2)}function yo(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,n="";for(let s=0;s<56;s++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,mo).join("")}async function bo(i){let t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(s=>String.fromCharCode(s)).join("")}async function wo(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;let t=await bo(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Te(i,e,t=!1){let r=yo(),n=r;t&&(n+="/PASSWORD_RECOVERY"),await v0(i,`${e}-code-verifier`,n);let s=await wo(r);return[s,r===s?"plain":"s256"]}var Eo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ki(i){let e=i.headers.get(mt);if(!e||!e.match(Eo))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Gi(i){if(!i)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Ji(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Ao=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Re(i){if(!Ao.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Co=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},Pe=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Bo=[502,503,504];async function Vi(i){var e;if(!zi(i))throw new Qe(Pe(i),0);if(Bo.includes(i.status))throw new Qe(Pe(i),i.status);let t;try{t=await i.json()}catch(s){throw new Xe(Pe(s),s)}let r,n=Ki(i);if(n&&n.getTime()>=f0["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new wt(Pe(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ie}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new wt(Pe(t),i.status,t.weak_password.reasons);throw new Zt(Pe(t),i.status||500,r)}var Do=(i,e,t,r)=>{let n={method:i,headers:e?.headers||{}};return i==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};async function U(i,e,t,r){var n;let s=Object.assign({},r?.headers);s[mt]||(s[mt]=f0["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let a=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Fo(i,e,t+o,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function Fo(i,e,t,r,n,s){let a=Do(e,r,n,s),o;try{o=await i(t,Object.assign({},a))}catch(c){throw console.error(c),new Qe(Pe(c),0)}if(o.ok||await Vi(o),r?.noResolveJson)return o;try{return await o.json()}catch(c){await Vi(c)}}function ue(i){var e;let t=null;ko(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=Ui(i.expires_in)));let r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function p0(i){let e=ue(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function he(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function Xi(i){return{data:i,error:null}}function Qi(i){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:s}=i,a=Co(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:s},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function Yi(i){return i}function ko(i){return i.access_token&&i.refresh_token&&i.expires_in}var sr=["global","local","others"];var So=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},Oe=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=rr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=sr[0]){if(sr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sr.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:he})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:t}=e,r=So(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Qi,redirectTo:t?.redirectTo})}catch(t){if(q(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:he})}catch(t){if(q(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,s,a,o,c;try{let h={nextPage:null,lastPage:0,total:0},l=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""},xform:Yi});if(l.error)throw l.error;let d=await l.json(),u=(a=l.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(o=l.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(p=>{let y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);h[`${_}Page`]=y}),h.total=parseInt(u)),{data:Object.assign(Object.assign({},d),h),error:null}}catch(h){if(q(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Re(e);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:he})}catch(t){if(q(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Re(e);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:he})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Re(e);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:he})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Re(e.userId);try{let{data:t,error:r}=await U(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(q(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Re(e.userId),Re(e.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}}};var Zi={getItem:i=>ge()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{ge()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{ge()&&globalThis.localStorage.removeItem(i)}};function _0(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function es(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Ie={debug:!!(globalThis&&ge()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Bt=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},nr=class extends Bt{};async function g0(i,e,t){Ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ie.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,n.name);try{return await t()}finally{Ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,n.name)}}else{if(e===0)throw Ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new nr(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ie.debug)try{let s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}es();var To={url:Bi,storageKey:Di,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ts(i,e,t){return await t()}var je=class i{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=i.nextInstanceID,i.nextInstanceID+=1,this.instanceID>0&&se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let n=Object.assign(Object.assign({},To),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Oe({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=rr(n.fetch),this.lock=n.lock||ts,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:se()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=g0:this.lock=ts,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ge()?this.storage=Zi:(this.memoryStorage={},this.storage=_0(this.memoryStorage)):(this.memoryStorage={},this.storage=_0(this.memoryStorage)),se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t=Ni(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),se()&&this.detectSessionInUrl&&r!=="none"){let{data:n,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Pi(s)){let c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}let{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return q(t)?{error:t}:{error:new Xe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{let s=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:ue}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};let c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,n;try{let s;if("email"in e){let{email:l,password:d,options:u}=e,x=null,p=null;this.flowType==="pkce"&&([x,p]=await Te(this.storage,this.storageKey)),s=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u?.emailRedirectTo,body:{email:l,password:d,data:(t=u?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:x,code_challenge_method:p},xform:ue})}else if("phone"in e){let{phone:l,password:d,options:u}=e;s=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:d,data:(r=u?.data)!==null&&r!==void 0?r:{},channel:(n=u?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ue})}else throw new Fe("You must provide either an email or phone number and a password");let{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};let c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){let{email:s,password:a,options:o}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:p0})}else if("phone"in e){let{phone:s,password:a,options:o}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:p0})}else throw new Fe("You must provide either an email or phone number and a password");let{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new De}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,n,s,a,o,c,h,l,d,u,x;let p,y;if("message"in e)p=e.message,y=e.signature;else{let{chain:_,wallet:f,statement:v,options:g}=e,m;if(se())if(typeof f=="object")m=f;else{let b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))m=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!g?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=f}let w=new URL((t=g?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in m&&m.signIn){let b=await m.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g?.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),v?{statement:v}:null)),B;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")B=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)B=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)p=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),y=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in m)||typeof m.signMessage!="function"||!("publicKey"in m)||typeof m!="object"||!m.publicKey||!("toBase58"in m.publicKey)||typeof m.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${w.host} wants you to sign in with your Solana account:`,m.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(n=(r=g?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((s=g?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((h=g?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((d=(l=g?.signInWithSolana)===null||l===void 0?void 0:l.resources)===null||d===void 0)&&d.length?["Resources",...g.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);let b=await m.signMessage(new TextEncoder().encode(p),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=b}}try{let{data:_,error:f}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Li(y)},!((u=e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ue});if(f)throw f;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new De}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:f})}catch(_){if(q(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){let t=await At(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t??"").split("/");try{let{data:s,error:a}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ue});if(await Ct(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new De}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:n??null}),error:a})}catch(s){if(q(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{let{options:t,provider:r,token:n,access_token:s,nonce:a}=e,o=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ue}),{data:c,error:h}=o;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new De}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,s,a;try{if("email"in e){let{email:o,options:c}=e,h=null,l=null;this.flowType==="pkce"&&([h,l]=await Te(this.storage,this.storageKey));let{error:d}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:h,code_challenge_method:l},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){let{phone:o,options:c}=e,{data:h,error:l}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:l}}throw new Fe("You must provide either an email or phone number.")}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let n,s;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:a,error:o}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:n,xform:ue});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,h=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Te(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Xi})}catch(s){if(q(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ie;let{error:n}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:n,options:s}=e,{error:a}=await U(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:r,type:n,options:s}=e,{data:a,error:o}=await U(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:o}}throw new Fe("You must provide either an email or phone number and a type")}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){let n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=await At(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at*1e3-Date.now()<Yt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,l)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,l))})}return{data:{session:e},error:null}}let{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:he}):await this._useSession(async t=>{var r,n,s;let{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ie}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0,xform:he})})}catch(t){if(q(t))return Ri(t)&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:n,error:s}=r;if(s)throw s;if(!n.session)throw new ie;let a=n.session,o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Te(this.storage,this.storageKey));let{data:h,error:l}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:he});if(l)throw l;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ie;let t=Date.now()/1e3,r=t,n=!0,s=null,{payload:a}=ir(e.access_token);if(a.exp&&(r=a.exp,n=r<=t),n){let{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};s=o}else{let{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(q(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ie;let{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!se())throw new ke("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ke(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new bt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ke("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bt("No code detected.");let{data:v,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;let m=new URL(window.location.href);return m.searchParams.delete("code"),window.history.replaceState(window.history.state,"",m.toString()),{data:{session:v.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:n,access_token:s,refresh_token:a,expires_in:o,expires_at:c,token_type:h}=e;if(!s||!o||!a||!h)throw new ke("No session defined in URL");let l=Math.round(Date.now()/1e3),d=parseInt(o),u=l+d;c&&(u=parseInt(c));let x=u-l;x*1e3<=Be&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${d}s`);let p=u-d;l-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,l):l-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,l);let{data:y,error:_}=await this._getUser(s);if(_)throw _;let f={provider_token:r,provider_refresh_token:n,access_token:s,expires_in:d,expires_at:u,refresh_token:a,token_type:h,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await At(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:n,error:s}=t;if(s)return{error:s};let a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){let{error:o}=await this.admin.signOut(a,e);if(o&&!(Ti(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t=Hi(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{let{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Te(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(q(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{let{data:r,error:n}=await this._useSession(async s=>{var a,o,c,h,l;let{data:d,error:u}=s;if(u)throw u;let x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",x,{headers:this.headers,jwt:(l=(h=d.session)===null||h===void 0?void 0:h.access_token)!==null&&l!==void 0?l:void 0})});if(n)throw n;return se()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;let{data:s,error:a}=t;if(a)throw a;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(q(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let r=Date.now();return await Wi(async n=>(n>0&&await Mi(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ue})),(n,s)=>{let a=200*Math.pow(2,n);return s&&er(s)&&Date.now()+a-r<Be})}catch(r){if(this._debug(t,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),se()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let r=await At(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}let n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Yt;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Yt}s`),n){if(this.autoRefreshToken&&r.refresh_token){let{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),er(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Et;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new ie;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(n,"error",s),q(s)){let a={session:null,error:s};return er(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){let n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await v0(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ct(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&se()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Be);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let n=Math.floor((r.expires_at*1e3-e)/Be);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Be}ms, refresh threshold is ${Qt} ticks`),n<=Qt&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bt)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!se()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let n=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[s,a]=await Te(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r?.queryParams){let s=new URLSearchParams(r.queryParams);n.push(s.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:n,error:s}=t;return s?{data:null,error:s}:await U(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(q(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;let{data:s,error:a}=t;if(a)return{data:null,error:a};let o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await U(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((n=c?.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(q(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:s}=t;if(s)return{data:null,error:s};let{data:a,error:o}=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(q(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:n,error:s}=t;return s?{data:null,error:s}:await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(q(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let r=e?.factors||[],n=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:n,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;let{data:{session:n},error:s}=e;if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=ir(n.access_token),o=null;a.aal&&(o=a.aal);let c=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let l=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:l},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r||(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Si>Date.now()))return r;let{data:n,error:s}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!n.keys||n.keys.length===0)throw new de("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),r=n.keys.find(a=>a.kid===e),!r)throw new de("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){let{data:x,error:p}=await this.getSession();if(p||!x.session)return{data:null,error:p};r=x.session.access_token}let{header:n,payload:s,signature:a,raw:{header:o,payload:c}}=ir(r);if(Gi(s.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:s,header:n,signature:a},error:null}}let h=Ji(n.alg),l=await this.fetchJwk(n.kid,t),d=await crypto.subtle.importKey("jwk",l,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,a,qi(`${o}.${c}`)))throw new de("Invalid JWT signature");return{data:{claims:s,header:n,signature:a},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}};je.nextInstanceID=0;var Ro=je,m0=Ro;var or=class extends m0{constructor(e){super(e)}};var Po=function(i,e,t,r){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(l){try{h(r.next(l))}catch(d){a(d)}}function c(l){try{h(r.throw(l))}catch(d){a(d)}}function h(l){l.done?s(l.value):n(l.value).then(o,c)}h((r=r.apply(i,e||[])).next())})},Dt=class{constructor(e,t,r){var n,s,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let o=Ai(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let h=`sb-${c.hostname.split(".")[0]}-auth-token`,l={db:yi,realtime:wi,auth:Object.assign(Object.assign({},bi),{storageKey:h}),global:mi},d=Ci(r??{},l);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(u,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Ei(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ii(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new ot(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _t(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Po(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:s,flowType:a,lock:o,debug:c},h,l){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new or({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),h),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:a,lock:o,debug:c,fetch:l,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ke(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var rs=(i,e,t)=>new Dt(i,e,t);var C0=N0(dn());(window.location.hostname.includes("localhost")||window.location.hostname.includes("vega"))&&(window.addEventListener("message",i=>{if(i.source===window&&i.data?.type==="VEGA_AUTH"){let e={access_token:i.data.access_token,user_id:i.data.user_id};chrome.runtime.sendMessage({type:"SET_USER_TOKEN",access_token:e.access_token,user_id:e.user_id},()=>{})}}),console.log("\u{1F442} Aguardando VEGA_AUTH via window.postMessage..."));var Wr=null,$e=null;async function Oo(i=5e3){return new Promise((e,t)=>{let n=i/500,s=0,a=()=>{chrome.runtime.sendMessage({type:"GET_USER_TOKEN"},o=>{o?.access_token&&o?.user_id?(console.log("\u{1F510} Credenciais recuperadas com sucesso:",o),e(o)):(s++,console.warn("\u{1F552} Aguardando token no background... tentativa",s),s>=n?t("\u274C Token/user_id ausentes ap\xF3s aguardo."):setTimeout(a,500))})};a()})}var kt=[],B0="https://rgkvzoeanbkbeqjbntdq.supabase.co",D0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJna3Z6b2VhbmJrYmVxamJudGRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5MDczMjEsImV4cCI6MjA2NjQ4MzMyMX0.Qhy9GQOJD0wLSBmGLdS6QGxvERfST2FYqCDBo-F1njk";window.location.href.includes("https://experiencia.xpi.com.br/conta/#/")&&(async()=>{console.log("\u{1F50E} Buscando saldo na tela da conta...");function i(){return new Promise((e,t)=>{let n=0,s=setInterval(()=>{let a=[...document.querySelectorAll("soma-description")].find(d=>d.textContent?.trim()==="Saldo dispon\xEDvel");if(!a){n++,n>=20&&(clearInterval(s),t("\u274C Descri\xE7\xE3o 'Saldo dispon\xEDvel' n\xE3o encontrada."));return}let c=a.closest("div")?.querySelector("soma-paragraph span");if(!c||!c.textContent?.includes("R$")){n++,n>=20&&(clearInterval(s),t("\u274C Span com valor em R$ n\xE3o encontrado."));return}let h=c.textContent.match(/R\$\s*([\d\.]+,\d{2})/);if(!h){n++,n>=20&&(clearInterval(s),t("\u274C Valor num\xE9rico n\xE3o p\xF4de ser extra\xEDdo."));return}clearInterval(s);let l=parseFloat(h[1].replace(/\./g,"").replace(",","."));console.log("\u{1F4B0} Saldo dispon\xEDvel identificado:",l),e(l)},500)})}try{let e=await i();console.log("\u{1F4B0} Saldo capturado com sucesso:",e),localStorage.setItem("saldoXP",e),window.location.href="https://experiencia.xpi.com.br/renda-fixa/#/emissao-bancaria?offertoken=true"}catch(e){console.error(e)}})();function Io(i){return i<=180?.225:i>180&&i<=360?.2:i>360&&i<=720?.175:.15}function Tt(i){let e=new PointerEvent("pointerdown",{bubbles:!0,composed:!0,pointerType:"mouse"}),t=new PointerEvent("pointerup",{bubbles:!0,composed:!0,pointerType:"mouse"}),r=new PointerEvent("click",{bubbles:!0,composed:!0,pointerType:"mouse"});i.dispatchEvent(e),i.dispatchEvent(t),i.dispatchEvent(r)}function jo(i){let e=i.toUpperCase();return e.includes("IPCA")?"ipca":e.includes("CDI")?"cdi":"pre_fixado"}function $o(i){let e=i.match(/([0-9]+[,\.]?[0-9]*)/);return e?parseFloat(e[1].replace(",",".")):null}function qo(i){return parseFloat(i.replace(/[R$\s\.]/g,"").replace(",","."))||1e3}function w0(i){let e=new Date,r=new Date(i)-e;return Math.ceil(r/(1e3*60*60*24))}function E0(i,e){let t=Io(e),r=i/(1-t);return parseFloat(r.toFixed(2))}function Lo(i){if(!i||!i.includes("/"))return null;let[e,t,r]=i.split("/");return!e||!t||!r?null:`${r}-${t.padStart(2,"0")}-${e.padStart(2,"0")}`}function A0(i){let e=i.toUpperCase();return e.includes("LCA")||e.includes("LCI")||e.includes("LCD")}var Uo={ate_5k:i=>i<=5e3,ate_10k:i=>i<=1e4,ate_50k:i=>i<=5e4,acima_50k:i=>i>5e4},Ho={indexador:{pre_fixado:"Pr\xE9-fixado",ipca:"Infla\xE7\xE3o",cdi:"P\xF3s-fixado (CDI)"},liquidez:{no_venc:"No Vencimento",diaria:"Di\xE1ria",carencia:"Com Car\xEAncia"},outros:{garantia_fgc:"Prote\xE7\xE3o FGC",isento_ir:"Isento de IR",oferta_primaria:"Oferta prim\xE1ria",investidor_qualificado:"Investidor qualificado",investidor_profissional:"Investidor profissional",publico_geral:"P\xFAblico geral"},vencimento:{ate_6_meses:"De 1 m\xEAs a 6 meses",ate_1_ano:"De 6 meses a 12 meses",ate_2_anos:"de 1 ano a 2 anos",ate_3_anos:"de 2 anos a 3 anos",ate_5_anos:"de 3 anos a 5 anos",acima_5_anos:"Acima de 5 anos"},aplicacao_minima:{ate_5k:"At\xE9 R$ 5.000",ate_10k:"At\xE9 10.000",ate_50k:"At\xE9 R$ 50.000",acima_50k:"Acima de R$ 50.000"}};async function St(i,e=2e3,t=!0){let n=e/500,s=0;return new Promise((a,o)=>{let c=()=>{let h;t?h=document.evaluate(i,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue:h=document.querySelector(i),h?a(h):++s>n?o("Elemento n\xE3o encontrado: "+i):setTimeout(c,500)};c()})}async function No(i,e){try{let t="Digite a quantidade que deseja investir";console.log("\u{1F552} Aguardando campo de quantidade aparecer..."),await St(`soma-text-field[label="${t}"]`,7e3,!1);let r=[...document.querySelectorAll("soma-text-field")].find(o=>o.getAttribute("label")===t);if(!r)throw new Error(`Campo soma-text-field com label "${t}" n\xE3o encontrado.`);let n=10;for(;!r.shadowRoot&&n-- >0;)console.log("\u23F3 Aguardando shadowRoot do campo de quantidade..."),await new Promise(o=>setTimeout(o,300));let s=r.shadowRoot?.querySelector("input[type='number']");if(!s)throw new Error("Input do tipo number n\xE3o localizado no shadowRoot.");let a=Math.floor(i/e);return s.value=a,s.dispatchEvent(new Event("input",{bubbles:!0})),s.dispatchEvent(new Event("change",{bubbles:!0})),await new Promise(o=>setTimeout(o,100)),console.log("\u{1F4E6} Quantidade preenchida:",a),!0}catch(t){return console.error("\u274C Erro ao preencher campo de quantidade:",t?.message||t),!1}}async function zo(i=5e3){let t=i/500,r=0;for(;r<t;){let s=document.querySelectorAll("soma-description")[1];if(s&&/Saldo disponível/i.test(s.textContent||"")){let a=s.textContent.match(/R\$\s*([\d\.]+,\d{2})/);if(a){let o=parseFloat(a[1].replace(/\./g,"").replace(",","."));return console.log("\u{1F4B0} Saldo detectado:",o),o}}r++,await new Promise(a=>setTimeout(a,500))}return console.error("\u274C Timeout ao ler saldo dispon\xEDvel."),0}async function Mo(){try{await St("soma-checkbox",2e3,!1);let e=[...document.querySelectorAll("soma-checkbox")].find(n=>n.getAttribute("label")?.toLowerCase().includes("ciente dos riscos"));if(!e)return!1;let r=e.shadowRoot?.querySelector("input[type='checkbox']");return r?(r.checked||(r.checked=!0,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}))),!0):!1}catch(i){return console.error("\u274C Erro ao marcar checkbox:",i?.message||i),!1}}async function Wo(){try{let r=0,n=null;for(;r++<14;){let s=[...document.querySelectorAll("soma-button")].find(a=>a.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"));if(s&&s.shadowRoot&&(n=s.shadowRoot.querySelector("button:not([disabled])"),n))break;await new Promise(a=>setTimeout(a,500))}return n?(Tt(n),console.log("\u2705 Clique no bot\xE3o 'Avan\xE7ar etapa' realizado com sucesso."),!0):(console.warn("\u26A0\uFE0F Bot\xE3o 'Avan\xE7ar etapa' n\xE3o encontrado ou continua desabilitado."),!1)}catch(i){return console.error("\u274C Erro ao clicar no bot\xE3o 'Avan\xE7ar etapa':",i?.message||i),!1}}async function Ko(i){let e={pre_fixado:"Pr\xE9-fixado",ipca:"Infla\xE7\xE3o",cdi:"P\xF3s-fixado (CDI)"},t=e[i],r=Object.values(e);for(let n of r){let s=`//soma-chip[contains(., '${n}')]`,a=document.evaluate(s,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!a){console.warn(`\u26A0\uFE0F Chip '${n}' n\xE3o encontrado na tela.`);continue}let o=a.getAttribute("selected")==="true";n!==t&&o&&(a.click(),console.log(`\u{1F504} Filtro removido: ${n}`),await new Promise(c=>setTimeout(c,300))),n===t&&!o&&(a.click(),console.log(`\u2705 Filtro aplicado: ${n}`),await new Promise(c=>setTimeout(c,300)))}await new Promise(n=>setTimeout(n,1500))}async function Go(){console.log("\u{1F53D} Iniciando rolagem autom\xE1tica da tabela para carregar todos os ativos...");let i=document.querySelector("soma-table-body")?.parentElement;if(!i){console.warn("\u26A0\uFE0F Container da tabela de ativos n\xE3o encontrado.");return}let e=-1,t=0;for(;t<30;){i.scrollBy(0,500),await new Promise(n=>setTimeout(n,300));let r=i.scrollTop;if(r===e){console.log("\u2705 Final da tabela atingido.");break}e=r,t++}}async function Jo(){let i=[...document.querySelectorAll("soma-checkbox")].find(n=>n.getAttribute("label")?.toLowerCase().includes("declaro que li"));if(!i)return console.warn("\u274C Checkbox com label 'declaro que li' n\xE3o encontrado."),!1;let e=5;for(;!i.shadowRoot&&e-- >0;)await new Promise(n=>setTimeout(n,300));let t=i.shadowRoot?.querySelector("input[type='checkbox']");if(!t)return console.warn("\u274C Input checkbox n\xE3o encontrado no shadowRoot."),!1;Tt(t),console.log("\u2705 Clique real no checkbox disparado.");let r=null;for(e=20;e-- >0;){let s=[...document.querySelectorAll("soma-button")].find(a=>a.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"))?.shadowRoot?.querySelector("button");if(s&&!s.disabled){r=s;break}await new Promise(a=>setTimeout(a,500))}return r?(Tt(r),console.log("\u2705 Bot\xE3o 'Avan\xE7ar etapa' clicado com sucesso ap\xF3s o checkbox."),!0):(console.warn("\u274C Bot\xE3o 'Avan\xE7ar etapa' n\xE3o habilitado ap\xF3s marcar checkbox."),!1)}async function Vo(i){let e=i.split("");console.log("\u{1F510} Iniciando digita\xE7\xE3o da assinatura eletr\xF4nica...");let t=10,r=null;for(;t-- >0&&(r=document.querySelector("soma-input-bank-password"),!r?.shadowRoot);)await new Promise(s=>setTimeout(s,500));if(!r?.shadowRoot)return console.error("\u274C Teclado num\xE9rico da senha eletr\xF4nica n\xE3o apareceu."),!1;let n=[...r.shadowRoot.querySelectorAll("button")];if(!n.length)return console.error("\u274C Nenhum bot\xE3o encontrado no teclado."),!1;for(let s of e){let a=n.find(o=>o.textContent?.includes(s));if(!a)return console.error(`\u274C D\xEDgito '${s}' n\xE3o encontrado entre os bot\xF5es.`),!1;Tt(a),console.log(`\u2705 D\xEDgito '${s}' clicado.`),await new Promise(o=>setTimeout(o,250))}return!0}Oo().then(i=>{Wr=i.access_token,$e=i.user_id;let e=rs(B0,D0,{global:{headers:{Authorization:`Bearer ${Wr}`}}});Xo(e)}).catch(i=>{console.error(i)});async function Xo(i){try{if(window.location.href.includes("experiencia.xpi.com.br/renda-fixa")){let h=function(u){return c.length===0?!0:c.some(x=>Uo[x]?.(u))},{data:e,error:t}=await i.from("filtros").select("*").eq("user_id",$e).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(t||!e){console.error("\u274C Erro ao buscar filtros do Supabase:",t);return}let r={...e.selecionados,assinatura:e.assinatura||"",limite_compra:e.limite_compra||0,ordem_classe:Array.isArray(e.ordem_classe)?e.ordem_classe:[],taxa_minima:e.taxa_minima||{cdi:0,ipca:0,pre_fixado:0}};try{if(e.assinatura&&$e){let x=C0.default.AES.decrypt(e.assinatura,$e).toString(C0.default.enc.Utf8);x?(r.assinatura=x,console.log("\u{1F510} Assinatura descriptografada e atribu\xEDda aos filtros.")):console.warn("\u26A0\uFE0F Assinatura inv\xE1lida ou chave incorreta.")}else console.warn("\u26A0\uFE0F Campo de assinatura ou user_id ausente.")}catch(u){console.error("\u274C Erro ao descriptografar assinatura:",u)}console.log("\u2705 Filtros carregados:",r);try{console.log("\u{1F552} Aguardando bot\xE3o 'Filtrar' aparecer na tela...");let u=await St("//soma-chip[contains(., 'Filtrar')]",7e3);if(!u){console.error("\u274C Bot\xE3o 'Filtrar' n\xE3o encontrado ap\xF3s aguardo.");return}u.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(x=>setTimeout(x,300)),u.click(),console.log("\u2705 Bot\xE3o 'Filtrar' clicado com sucesso."),await new Promise(x=>setTimeout(x,1e3))}catch(u){console.error("\u274C Erro ao localizar ou clicar no bot\xE3o 'Filtrar':",u);return}try{console.log("\u{1F3AF} Iniciando aplica\xE7\xE3o de filtros visuais...");for(let u in r){if(["assinatura","limite_compra","ordem_classe","taxa_minima"].includes(u))continue;let x=r[u];for(let p of x){let y=Ho[u.toLowerCase()]?.[p];if(!y){console.warn(`\u26A0\uFE0F Label n\xE3o encontrado no mapa para grupo '${u}', valor '${p}'`);continue}let _=`//soma-chip[contains(., '${y}')]`,f=document.evaluate(_,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;f?(f.click(),console.log(`\u2705 Filtro aplicado: [${u}] \u2192 ${y}`)):console.warn(`\u26A0\uFE0F soma-chip '${y}' n\xE3o encontrado na tela.`),await new Promise(v=>setTimeout(v,300))}}console.log("\u2705 Filtros visuais aplicados com sucesso.")}catch(u){console.error("\u274C Erro ao aplicar filtros visuais:",u)}let n=r.assinatura,s=r.limite_compra,a=r.ordem_classe,o=r.taxa_minima||{cdi:0,ipca:0,pre_fixado:0},c=r.aplicacao_minima||[];Array.isArray(a)||(a=["cdi","ipca","pre_fixado"]);try{console.log("\u{1F552} Aguardando carregamento da tabela de ativos..."),await St("soma-table-body soma-table-row",5e3,!1),await Go()}catch(u){console.error("\u274C Erro ao aguardar a tabela de ativos:",u);return}let d=parseFloat(localStorage.getItem("saldoXP")||"0")||await zo();console.log("\u{1F4B0} Saldo total carregado para compara\xE7\xE3o:",d);for(let u of a){await Ko(u);try{await St("soma-table-body soma-table-row",5e3,!1),await new Promise(_=>setTimeout(_,500)),console.log(`\u2705 Tabela de ativos carregada para classe: ${u}`)}catch(_){console.error(`\u274C Erro ao carregar tabela da classe ${u}:`,_);continue}let x=document.querySelectorAll("soma-table-body soma-table-row"),p=[];for(let[_,f]of[...x].entries()){let v=f.querySelectorAll("soma-table-cell");if(v.length<10)return;let g=v[2]?.textContent?.trim()||"",m=v[8]?.textContent?.trim()||"",b=f.querySelector("soma-button[aria-label='Investir']")?.shadowRoot?.querySelector("button"),B=jo(g),A=$o(g),R=g.trim(),P=qo(m),E=v[1]?.textContent?.trim()||"",D=Lo(E),O=v[0]?.textContent?.trim()||"Ativo sem nome";if(B===u&&A&&b){let k=O.includes("LCA")||O.includes("LCI")||O.includes("LCD");p.push({nome:O,tipo:B,taxa:A,taxaTexto:R,valorMinimo:P,vencimentoStr:D,botao:b,isento:k}),console.log(`\u2705 Ativo detectado: ${O}, Tipo: ${B}, Taxa: ${A}, Min: ${P}, Venc: ${D}, Isento: ${k}`)}}if(p.length>0){let _=(b,B)=>{if(b.length===0)return null;let A=b.map(P=>{let E=P.taxaTexto.toUpperCase();if(B==="IPCA"){let D=E.match(/IPCA\s*\+?\s*([\d,\.]+)/);return D?parseFloat(D[1].replace(",",".")):null}else if(B==="CDI"){if(E.includes("CDI +")){let D=E.match(/CDI\s*\+\s*([\d,\.]+)/);return D?parseFloat(D[1].replace(",",".")):null}else if(E.includes("%")&&!E.includes("+")){let D=E.match(/([\d,\.]+)\s*%/);return D?parseFloat(D[1].replace(",",".")):null}}else{let D=E.match(/([\d,\.]+)\s*%/);return D?parseFloat(D[1].replace(",",".")):null}return null}).filter(P=>typeof P=="number");if(A.length===0)return null;let R=A.reduce((P,E)=>P+E,0)/A.length;return B==="IPCA"?`IPCA + ${R.toFixed(2)}%`:B==="CDI"&&b[0].taxaTexto.includes("+")?`CDI + ${R.toFixed(2)}%`:B==="CDI"?`${R.toFixed(0)}% do CDI`:`${R.toFixed(2)}%`},f=p.filter(b=>b.isento),v=p.filter(b=>!b.isento),g=_(f,u.toUpperCase()),m=_(v,u.toUpperCase()),w=[];g&&(console.log("\u{1F50D} M\xE9dia ISENTOS calculada:",g),w.push({user_id:$e,data_referencia:new Date().toISOString().split("T")[0],indexador:u.toUpperCase(),taxa_media:g,isento_imposto:!0})),m&&(console.log("\u{1F50D} M\xE9dia TRIBUTADOS calculada:",m),w.push({user_id:$e,data_referencia:new Date().toISOString().split("T")[0],indexador:u.toUpperCase(),taxa_media:m,isento_imposto:!1}));for(let b of w)console.log("\u{1F4E9} Enviando taxa m\xE9dia para o Supabase:",b),await fetch(`${B0}/rest/v1/taxas_media_xp`,{method:"POST",headers:{"Content-Type":"application/json",apikey:D0,Authorization:`Bearer ${Wr}`},body:JSON.stringify(b)})}let y=p.filter(_=>_.valorMinimo<=d).sort((_,f)=>{let v=w0(_.vencimentoStr),g=w0(f.vencimentoStr),m=A0(_.nome)?E0(_.taxa,v):_.taxa;return(A0(f.nome)?E0(f.taxa,g):f.taxa)-m});for(let _ of y){let f=A0(_.nome),v=w0(_.vencimentoStr),g=f?E0(_.taxa,v):_.taxa;if(console.log(`\u{1F4CA} Comparando ativo '${_.nome}' (${u}): ${_.taxa}% ${f?"(isento IR)":""} \u2192 ${g}% (m\xEDnima: ${o[u]}%)`),g<o[u]||!h(_.valorMinimo))continue;if(_.botao.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(A=>setTimeout(A,100)),Tt(_.botao),console.log("\u2705 Clique no bot\xE3o 'Investir' efetuado."),await new Promise(A=>setTimeout(A,600)),_.valorMinimo>d){console.warn(`\u26D4 Saldo insuficiente: m\xEDnimo R$${_.valorMinimo} > saldo R$${d}`);continue}let m=Math.min(d,s),w=Math.max(_.valorMinimo,m);if(!await No(w,_.valorMinimo))continue;await Mo(),await Wo(),await new Promise(A=>setTimeout(A,500)),await Jo();let B=await Vo(n)||!0;kt.push({ativo:_.nome,classe:u.toUpperCase(),taxaInformada:_.taxa.toFixed(2)+"%",taxaEfetiva:g.toFixed(2)+"%"+(f?" (isento IR)":""),valorMinimo:"R$ "+_.valorMinimo.toLocaleString("pt-BR",{minimumFractionDigits:2}),valorComprado:"R$ "+w.toLocaleString("pt-BR",{minimumFractionDigits:2}),vencimentoISO:_.vencimentoStr,vencimentoBR:(()=>{let[A,R,P]=_.vencimentoStr.split("-");return`${P}/${R}/${A}`})(),horarioCompra:new Date().toLocaleString("pt-BR")}),console.log("\u{1F4DD} Ativo registrado no logCompras:",kt[kt.length-1]),await new Promise(A=>setTimeout(A,1e3));break}}}if(kt.length>0){console.log("\u{1F680} Enviando dados para Supabase...");let e=await fetch(`${B0}/rest/v1/ativos_comprados`,{method:"POST",headers:{apikey:D0,Authorization:`Bearer ${Wr}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(kt.map(t=>({user_id:$e,nome_ativo:t.ativo,indexador:t.classe.toLowerCase(),data_hora_compra:new Date().toISOString(),taxa_contratada:t.taxaInformada,taxa_grossup:t.taxaEfetiva,valor_minimo:parseFloat(t.valorMinimo.replace(/[R$\.\s]/g,"").replace(",",".")),valor_aplicado:Number(t.valorComprado?.toString().replace("R$","").replace(/\./g,"").replace(",",".").trim()),vencimento:t.vencimentoISO??null})))});e.ok?console.log("\u2705 Compras registradas no Supabase com sucesso!"):console.error("\u274C Erro ao salvar no Supabase:",await e.text())}}catch(e){console.error("Erro no script:",e)}}})();
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)
*/
