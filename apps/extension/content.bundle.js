(()=>{var kn=Object.create;var qt=Object.defineProperty;var Fn=Object.getOwnPropertyDescriptor;var Sn=Object.getOwnPropertyNames;var Tn=Object.getPrototypeOf,Rn=Object.prototype.hasOwnProperty;var z0=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var Pn=(s,e)=>()=>(s&&(e=s(s=0)),e);var $=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),On=(s,e)=>{for(var t in e)qt(s,t,{get:e[t],enumerable:!0})},M0=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Sn(e))!Rn.call(s,i)&&i!==t&&qt(s,i,{get:()=>e[i],enumerable:!(r=Fn(e,i))||r.enumerable});return s};var W0=(s,e,t)=>(t=s!=null?kn(Tn(s)):{},M0(e||!s||!s.__esModule?qt(t,"default",{value:s,enumerable:!0}):t,s)),In=s=>M0(qt({},"__esModule",{value:!0}),s);var be={};On(be,{Headers:()=>Yr,Request:()=>qn,Response:()=>Ln,default:()=>Qr,fetch:()=>$n});var jn,ze,$n,Qr,Yr,qn,Ln,pe=Pn(()=>{"use strict";jn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ze=jn(),$n=ze.fetch,Qr=ze.fetch.bind(ze),Yr=ze.Headers,qn=ze.Request,Ln=ze.Response});var t0=$(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});var Zr=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};e0.default=Zr});var s0=$(dt=>{"use strict";var G0=dt&&dt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dt,"__esModule",{value:!0});var Hn=G0((pe(),In(be))),Nn=G0(t0()),r0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Hn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var o,a,c;let h=null,l=null,d=null,u=n.status,x=n.statusText;if(n.ok){if(this.method!=="HEAD"){let f=await n.text();f===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?l=f:l=JSON.parse(f))}let m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=n.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&g&&g.length>1&&(d=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(l)&&(l.length>1?(h={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,d=null,u=406,x="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{let m=await n.text();try{h=JSON.parse(m),Array.isArray(h)&&n.status===404&&(l=[],h=null,u=200,x="OK")}catch{n.status===404&&m===""?(u=204,x="No Content"):h={message:m}}if(h&&this.isMaybeSingle&&(!((c=h?.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,u=200,x="OK"),h&&this.shouldThrowOnError)throw new Nn.default(h)}return{error:h,data:l,count:d,status:u,statusText:x}});return this.shouldThrowOnError||(i=i.catch(n=>{var o,a,c;return{error:{message:`${(o=n?.name)!==null&&o!==void 0?o:"FetchError"}: ${n?.message}`,details:`${(a=n?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=n?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};dt.default=r0});var n0=$(ft=>{"use strict";var zn=ft&&ft.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ft,"__esModule",{value:!0});var Mn=zn(s0()),i0=class extends Mn.default{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:n=i}={}){let o=n?`${n}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let n=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:n=!1,format:o="text"}={}){var a;let c=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),h=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ft.default=i0});var Ht=$(xt=>{"use strict";var Wn=xt&&xt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xt,"__esModule",{value:!0});var Kn=Wn(n0()),o0=class extends Kn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};xt.default=o0});var c0=$(pt=>{"use strict";var Gn=pt&&pt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pt,"__esModule",{value:!0});var vt=Gn(Ht()),a0=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){let i=t?"HEAD":"GET",n=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){let o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:n=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let c=e.reduce((h,l)=>h.concat(Object.keys(l)),[]);if(c.length>0){let h=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",h.join(","))}}return new vt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new vt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new vt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};pt.default=a0});var J0=$(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.version=void 0;Nt.version="0.0.0-automated"});var V0=$(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.DEFAULT_HEADERS=void 0;var Jn=J0();zt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Jn.version}`}});var Q0=$(gt=>{"use strict";var X0=gt&&gt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(gt,"__esModule",{value:!0});var Vn=X0(c0()),Xn=X0(Ht()),Qn=V0(),l0=class s{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Qn.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new Vn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:n}={}){let o,a=new URL(`${this.url}/rpc/${e}`),c;r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([l,d])=>d!==void 0).map(([l,d])=>[l,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([l,d])=>{a.searchParams.append(l,d)})):(o="POST",c=t);let h=Object.assign({},this.headers);return n&&(h.Prefer=`count=${n}`),new Xn.default({method:o,url:a,headers:h,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gt.default=l0});var is=$(V=>{"use strict";var Me=V&&V.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(V,"__esModule",{value:!0});V.PostgrestError=V.PostgrestBuilder=V.PostgrestTransformBuilder=V.PostgrestFilterBuilder=V.PostgrestQueryBuilder=V.PostgrestClient=void 0;var Y0=Me(Q0());V.PostgrestClient=Y0.default;var Z0=Me(c0());V.PostgrestQueryBuilder=Z0.default;var es=Me(Ht());V.PostgrestFilterBuilder=es.default;var ts=Me(n0());V.PostgrestTransformBuilder=ts.default;var rs=Me(s0());V.PostgrestBuilder=rs.default;var ss=Me(t0());V.PostgrestError=ss.default;V.default={PostgrestClient:Y0.default,PostgrestQueryBuilder:Z0.default,PostgrestFilterBuilder:es.default,PostgrestTransformBuilder:ts.default,PostgrestBuilder:rs.default,PostgrestError:ss.default}});var ni=$(()=>{});var N=$((ur,oi)=>{(function(s,e){typeof ur=="object"?oi.exports=ur=e():typeof define=="function"&&define.amd?define([],e):s.CryptoJS=e()})(ur,function(){var s=s||function(e,t){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof z0=="function")try{r=ni()}catch{}var i=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function f(){}return function(v){var _;return f.prototype=v,_=new f,f.prototype=null,_}}(),o={},a=o.lib={},c=a.Base=function(){return{extend:function(f){var v=n(this);return f&&v.mixIn(f),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var v in f)f.hasOwnProperty(v)&&(this[v]=f[v]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=a.WordArray=c.extend({init:function(f,v){f=this.words=f||[],v!=t?this.sigBytes=v:this.sigBytes=f.length*4},toString:function(f){return(f||d).stringify(this)},concat:function(f){var v=this.words,_=f.words,y=this.sigBytes,w=f.sigBytes;if(this.clamp(),y%4)for(var b=0;b<w;b++){var B=_[b>>>2]>>>24-b%4*8&255;v[y+b>>>2]|=B<<24-(y+b)%4*8}else for(var A=0;A<w;A+=4)v[y+A>>>2]=_[A>>>2];return this.sigBytes+=w,this},clamp:function(){var f=this.words,v=this.sigBytes;f[v>>>2]&=4294967295<<32-v%4*8,f.length=e.ceil(v/4)},clone:function(){var f=c.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var v=[],_=0;_<f;_+=4)v.push(i());return new h.init(v,f)}}),l=o.enc={},d=l.Hex={stringify:function(f){for(var v=f.words,_=f.sigBytes,y=[],w=0;w<_;w++){var b=v[w>>>2]>>>24-w%4*8&255;y.push((b>>>4).toString(16)),y.push((b&15).toString(16))}return y.join("")},parse:function(f){for(var v=f.length,_=[],y=0;y<v;y+=2)_[y>>>3]|=parseInt(f.substr(y,2),16)<<24-y%8*4;return new h.init(_,v/2)}},u=l.Latin1={stringify:function(f){for(var v=f.words,_=f.sigBytes,y=[],w=0;w<_;w++){var b=v[w>>>2]>>>24-w%4*8&255;y.push(String.fromCharCode(b))}return y.join("")},parse:function(f){for(var v=f.length,_=[],y=0;y<v;y++)_[y>>>2]|=(f.charCodeAt(y)&255)<<24-y%4*8;return new h.init(_,v)}},x=l.Utf8={stringify:function(f){try{return decodeURIComponent(escape(u.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return u.parse(unescape(encodeURIComponent(f)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=x.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var v,_=this._data,y=_.words,w=_.sigBytes,b=this.blockSize,B=b*4,A=w/B;f?A=e.ceil(A):A=e.max((A|0)-this._minBufferSize,0);var R=A*b,P=e.min(R*4,w);if(R){for(var E=0;E<R;E+=b)this._doProcessBlock(y,E);v=y.splice(0,R),_.sigBytes-=P}return new h.init(v,P)},clone:function(){var f=c.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0}),m=a.Hasher=p.extend({cfg:c.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var v=this._doFinalize();return v},blockSize:512/32,_createHelper:function(f){return function(v,_){return new f.init(_).finalize(v)}},_createHmacHelper:function(f){return function(v,_){return new g.HMAC.init(f,_).finalize(v)}}}),g=o.algo={};return o}(Math);return s})});var Tt=$((hr,ai)=>{(function(s,e){typeof hr=="object"?ai.exports=hr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(hr,function(s){return function(e){var t=s,r=t.lib,i=r.Base,n=r.WordArray,o=t.x64={},a=o.Word=i.extend({init:function(h,l){this.high=h,this.low=l}}),c=o.WordArray=i.extend({init:function(h,l){h=this.words=h||[],l!=e?this.sigBytes=l:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,l=h.length,d=[],u=0;u<l;u++){var x=h[u];d.push(x.high),d.push(x.low)}return n.create(d,this.sigBytes)},clone:function(){for(var h=i.clone.call(this),l=h.words=this.words.slice(0),d=l.length,u=0;u<d;u++)l[u]=l[u].clone();return h}})}(),s})});var li=$((dr,ci)=>{(function(s,e){typeof dr=="object"?ci.exports=dr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(dr,function(s){return function(){if(typeof ArrayBuffer=="function"){var e=s,t=e.lib,r=t.WordArray,i=r.init,n=r.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var a=o.byteLength,c=[],h=0;h<a;h++)c[h>>>2]|=o[h]<<24-h%4*8;i.call(this,c,a)}else i.apply(this,arguments)};n.prototype=r}}(),s.lib.WordArray})});var hi=$((fr,ui)=>{(function(s,e){typeof fr=="object"?ui.exports=fr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(fr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.enc,n=i.Utf16=i.Utf16BE={stringify:function(a){for(var c=a.words,h=a.sigBytes,l=[],d=0;d<h;d+=2){var u=c[d>>>2]>>>16-d%4*8&65535;l.push(String.fromCharCode(u))}return l.join("")},parse:function(a){for(var c=a.length,h=[],l=0;l<c;l++)h[l>>>1]|=a.charCodeAt(l)<<16-l%2*16;return r.create(h,c*2)}};i.Utf16LE={stringify:function(a){for(var c=a.words,h=a.sigBytes,l=[],d=0;d<h;d+=2){var u=o(c[d>>>2]>>>16-d%4*8&65535);l.push(String.fromCharCode(u))}return l.join("")},parse:function(a){for(var c=a.length,h=[],l=0;l<c;l++)h[l>>>1]|=o(a.charCodeAt(l)<<16-l%2*16);return r.create(h,c*2)}};function o(a){return a<<8&4278255360|a>>>8&16711935}}(),s.enc.Utf16})});var me=$((xr,di)=>{(function(s,e){typeof xr=="object"?di.exports=xr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(xr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.enc,n=i.Base64={stringify:function(a){var c=a.words,h=a.sigBytes,l=this._map;a.clamp();for(var d=[],u=0;u<h;u+=3)for(var x=c[u>>>2]>>>24-u%4*8&255,p=c[u+1>>>2]>>>24-(u+1)%4*8&255,m=c[u+2>>>2]>>>24-(u+2)%4*8&255,g=x<<16|p<<8|m,f=0;f<4&&u+f*.75<h;f++)d.push(l.charAt(g>>>6*(3-f)&63));var v=l.charAt(64);if(v)for(;d.length%4;)d.push(v);return d.join("")},parse:function(a){var c=a.length,h=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var d=0;d<h.length;d++)l[h.charCodeAt(d)]=d}var u=h.charAt(64);if(u){var x=a.indexOf(u);x!==-1&&(c=x)}return o(a,c,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,c,h){for(var l=[],d=0,u=0;u<c;u++)if(u%4){var x=h[a.charCodeAt(u-1)]<<u%4*2,p=h[a.charCodeAt(u)]>>>6-u%4*2,m=x|p;l[d>>>2]|=m<<24-d%4*8,d++}return r.create(l,d)}}(),s.enc.Base64})});var xi=$((vr,fi)=>{(function(s,e){typeof vr=="object"?fi.exports=vr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(vr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.enc,n=i.Base64url={stringify:function(a,c){c===void 0&&(c=!0);var h=a.words,l=a.sigBytes,d=c?this._safe_map:this._map;a.clamp();for(var u=[],x=0;x<l;x+=3)for(var p=h[x>>>2]>>>24-x%4*8&255,m=h[x+1>>>2]>>>24-(x+1)%4*8&255,g=h[x+2>>>2]>>>24-(x+2)%4*8&255,f=p<<16|m<<8|g,v=0;v<4&&x+v*.75<l;v++)u.push(d.charAt(f>>>6*(3-v)&63));var _=d.charAt(64);if(_)for(;u.length%4;)u.push(_);return u.join("")},parse:function(a,c){c===void 0&&(c=!0);var h=a.length,l=c?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var u=0;u<l.length;u++)d[l.charCodeAt(u)]=u}var x=l.charAt(64);if(x){var p=a.indexOf(x);p!==-1&&(h=p)}return o(a,h,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(a,c,h){for(var l=[],d=0,u=0;u<c;u++)if(u%4){var x=h[a.charCodeAt(u-1)]<<u%4*2,p=h[a.charCodeAt(u)]>>>6-u%4*2,m=x|p;l[d>>>2]|=m<<24-d%4*8,d++}return r.create(l,d)}}(),s.enc.Base64url})});var ye=$((pr,vi)=>{(function(s,e){typeof pr=="object"?vi.exports=pr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(pr,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,o=t.algo,a=[];(function(){for(var x=0;x<64;x++)a[x]=e.abs(e.sin(x+1))*4294967296|0})();var c=o.MD5=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,p){for(var m=0;m<16;m++){var g=p+m,f=x[g];x[g]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var v=this._hash.words,_=x[p+0],y=x[p+1],w=x[p+2],b=x[p+3],B=x[p+4],A=x[p+5],R=x[p+6],P=x[p+7],E=x[p+8],D=x[p+9],O=x[p+10],F=x[p+11],j=x[p+12],I=x[p+13],L=x[p+14],z=x[p+15],C=v[0],S=v[1],T=v[2],k=v[3];C=h(C,S,T,k,_,7,a[0]),k=h(k,C,S,T,y,12,a[1]),T=h(T,k,C,S,w,17,a[2]),S=h(S,T,k,C,b,22,a[3]),C=h(C,S,T,k,B,7,a[4]),k=h(k,C,S,T,A,12,a[5]),T=h(T,k,C,S,R,17,a[6]),S=h(S,T,k,C,P,22,a[7]),C=h(C,S,T,k,E,7,a[8]),k=h(k,C,S,T,D,12,a[9]),T=h(T,k,C,S,O,17,a[10]),S=h(S,T,k,C,F,22,a[11]),C=h(C,S,T,k,j,7,a[12]),k=h(k,C,S,T,I,12,a[13]),T=h(T,k,C,S,L,17,a[14]),S=h(S,T,k,C,z,22,a[15]),C=l(C,S,T,k,y,5,a[16]),k=l(k,C,S,T,R,9,a[17]),T=l(T,k,C,S,F,14,a[18]),S=l(S,T,k,C,_,20,a[19]),C=l(C,S,T,k,A,5,a[20]),k=l(k,C,S,T,O,9,a[21]),T=l(T,k,C,S,z,14,a[22]),S=l(S,T,k,C,B,20,a[23]),C=l(C,S,T,k,D,5,a[24]),k=l(k,C,S,T,L,9,a[25]),T=l(T,k,C,S,b,14,a[26]),S=l(S,T,k,C,E,20,a[27]),C=l(C,S,T,k,I,5,a[28]),k=l(k,C,S,T,w,9,a[29]),T=l(T,k,C,S,P,14,a[30]),S=l(S,T,k,C,j,20,a[31]),C=d(C,S,T,k,A,4,a[32]),k=d(k,C,S,T,E,11,a[33]),T=d(T,k,C,S,F,16,a[34]),S=d(S,T,k,C,L,23,a[35]),C=d(C,S,T,k,y,4,a[36]),k=d(k,C,S,T,B,11,a[37]),T=d(T,k,C,S,P,16,a[38]),S=d(S,T,k,C,O,23,a[39]),C=d(C,S,T,k,I,4,a[40]),k=d(k,C,S,T,_,11,a[41]),T=d(T,k,C,S,b,16,a[42]),S=d(S,T,k,C,R,23,a[43]),C=d(C,S,T,k,D,4,a[44]),k=d(k,C,S,T,j,11,a[45]),T=d(T,k,C,S,z,16,a[46]),S=d(S,T,k,C,w,23,a[47]),C=u(C,S,T,k,_,6,a[48]),k=u(k,C,S,T,P,10,a[49]),T=u(T,k,C,S,L,15,a[50]),S=u(S,T,k,C,A,21,a[51]),C=u(C,S,T,k,j,6,a[52]),k=u(k,C,S,T,b,10,a[53]),T=u(T,k,C,S,O,15,a[54]),S=u(S,T,k,C,y,21,a[55]),C=u(C,S,T,k,E,6,a[56]),k=u(k,C,S,T,z,10,a[57]),T=u(T,k,C,S,R,15,a[58]),S=u(S,T,k,C,I,21,a[59]),C=u(C,S,T,k,B,6,a[60]),k=u(k,C,S,T,F,10,a[61]),T=u(T,k,C,S,w,15,a[62]),S=u(S,T,k,C,D,21,a[63]),v[0]=v[0]+C|0,v[1]=v[1]+S|0,v[2]=v[2]+T|0,v[3]=v[3]+k|0},_doFinalize:function(){var x=this._data,p=x.words,m=this._nDataBytes*8,g=x.sigBytes*8;p[g>>>5]|=128<<24-g%32;var f=e.floor(m/4294967296),v=m;p[(g+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,p[(g+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x.sigBytes=(p.length+1)*4,this._process();for(var _=this._hash,y=_.words,w=0;w<4;w++){var b=y[w];y[w]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}return _},clone:function(){var x=n.clone.call(this);return x._hash=this._hash.clone(),x}});function h(x,p,m,g,f,v,_){var y=x+(p&m|~p&g)+f+_;return(y<<v|y>>>32-v)+p}function l(x,p,m,g,f,v,_){var y=x+(p&g|m&~g)+f+_;return(y<<v|y>>>32-v)+p}function d(x,p,m,g,f,v,_){var y=x+(p^m^g)+f+_;return(y<<v|y>>>32-v)+p}function u(x,p,m,g,f,v,_){var y=x+(m^(p|~g))+f+_;return(y<<v|y>>>32-v)+p}t.MD5=n._createHelper(c),t.HmacMD5=n._createHmacHelper(c)}(Math),s.MD5})});var E0=$((gr,pi)=>{(function(s,e){typeof gr=="object"?pi.exports=gr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(gr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=t.Hasher,n=e.algo,o=[],a=n.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var l=this._hash.words,d=l[0],u=l[1],x=l[2],p=l[3],m=l[4],g=0;g<80;g++){if(g<16)o[g]=c[h+g]|0;else{var f=o[g-3]^o[g-8]^o[g-14]^o[g-16];o[g]=f<<1|f>>>31}var v=(d<<5|d>>>27)+m+o[g];g<20?v+=(u&x|~u&p)+1518500249:g<40?v+=(u^x^p)+1859775393:g<60?v+=(u&x|u&p|x&p)-1894007588:v+=(u^x^p)-899497514,m=p,p=x,x=u<<30|u>>>2,u=d,d=v}l[0]=l[0]+d|0,l[1]=l[1]+u|0,l[2]=l[2]+x|0,l[3]=l[3]+p|0,l[4]=l[4]+m|0},_doFinalize:function(){var c=this._data,h=c.words,l=this._nDataBytes*8,d=c.sigBytes*8;return h[d>>>5]|=128<<24-d%32,h[(d+64>>>9<<4)+14]=Math.floor(l/4294967296),h[(d+64>>>9<<4)+15]=l,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),s.SHA1})});var mr=$((_r,gi)=>{(function(s,e){typeof _r=="object"?gi.exports=_r=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(_r,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,o=t.algo,a=[],c=[];(function(){function d(m){for(var g=e.sqrt(m),f=2;f<=g;f++)if(!(m%f))return!1;return!0}function u(m){return(m-(m|0))*4294967296|0}for(var x=2,p=0;p<64;)d(x)&&(p<8&&(a[p]=u(e.pow(x,1/2))),c[p]=u(e.pow(x,1/3)),p++),x++})();var h=[],l=o.SHA256=n.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(d,u){for(var x=this._hash.words,p=x[0],m=x[1],g=x[2],f=x[3],v=x[4],_=x[5],y=x[6],w=x[7],b=0;b<64;b++){if(b<16)h[b]=d[u+b]|0;else{var B=h[b-15],A=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,R=h[b-2],P=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;h[b]=A+h[b-7]+P+h[b-16]}var E=v&_^~v&y,D=p&m^p&g^m&g,O=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),F=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),j=w+F+E+c[b]+h[b],I=O+D;w=y,y=_,_=v,v=f+j|0,f=g,g=m,m=p,p=j+I|0}x[0]=x[0]+p|0,x[1]=x[1]+m|0,x[2]=x[2]+g|0,x[3]=x[3]+f|0,x[4]=x[4]+v|0,x[5]=x[5]+_|0,x[6]=x[6]+y|0,x[7]=x[7]+w|0},_doFinalize:function(){var d=this._data,u=d.words,x=this._nDataBytes*8,p=d.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=e.floor(x/4294967296),u[(p+64>>>9<<4)+15]=x,d.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var d=n.clone.call(this);return d._hash=this._hash.clone(),d}});t.SHA256=n._createHelper(l),t.HmacSHA256=n._createHmacHelper(l)}(Math),s.SHA256})});var mi=$((yr,_i)=>{(function(s,e,t){typeof yr=="object"?_i.exports=yr=e(N(),mr()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(s.CryptoJS)})(yr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.algo,n=i.SHA256,o=i.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=n._doFinalize.call(this);return a.sigBytes-=4,a}});e.SHA224=n._createHelper(o),e.HmacSHA224=n._createHmacHelper(o)}(),s.SHA224})});var A0=$((br,yi)=>{(function(s,e,t){typeof br=="object"?yi.exports=br=e(N(),Tt()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(s.CryptoJS)})(br,function(s){return function(){var e=s,t=e.lib,r=t.Hasher,i=e.x64,n=i.Word,o=i.WordArray,a=e.algo;function c(){return n.create.apply(n,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var u=0;u<80;u++)l[u]=c()})();var d=a.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(u,x){for(var p=this._hash.words,m=p[0],g=p[1],f=p[2],v=p[3],_=p[4],y=p[5],w=p[6],b=p[7],B=m.high,A=m.low,R=g.high,P=g.low,E=f.high,D=f.low,O=v.high,F=v.low,j=_.high,I=_.low,L=y.high,z=y.low,C=w.high,S=w.low,T=b.high,k=b.low,K=B,M=A,Q=R,H=P,tt=E,Ue=D,Vr=O,rt=F,ne=j,Z=I,It=L,st=z,jt=C,it=S,Xr=T,nt=k,oe=0;oe<80;oe++){var re,xe,$t=l[oe];if(oe<16)xe=$t.high=u[x+oe*2]|0,re=$t.low=u[x+oe*2+1]|0;else{var T0=l[oe-15],He=T0.high,ot=T0.low,vn=(He>>>1|ot<<31)^(He>>>8|ot<<24)^He>>>7,R0=(ot>>>1|He<<31)^(ot>>>8|He<<24)^(ot>>>7|He<<25),P0=l[oe-2],Ne=P0.high,at=P0.low,pn=(Ne>>>19|at<<13)^(Ne<<3|at>>>29)^Ne>>>6,O0=(at>>>19|Ne<<13)^(at<<3|Ne>>>29)^(at>>>6|Ne<<26),I0=l[oe-7],gn=I0.high,_n=I0.low,j0=l[oe-16],mn=j0.high,$0=j0.low;re=R0+_n,xe=vn+gn+(re>>>0<R0>>>0?1:0),re=re+O0,xe=xe+pn+(re>>>0<O0>>>0?1:0),re=re+$0,xe=xe+mn+(re>>>0<$0>>>0?1:0),$t.high=xe,$t.low=re}var yn=ne&It^~ne&jt,q0=Z&st^~Z&it,bn=K&Q^K&tt^Q&tt,wn=M&H^M&Ue^H&Ue,En=(K>>>28|M<<4)^(K<<30|M>>>2)^(K<<25|M>>>7),L0=(M>>>28|K<<4)^(M<<30|K>>>2)^(M<<25|K>>>7),An=(ne>>>14|Z<<18)^(ne>>>18|Z<<14)^(ne<<23|Z>>>9),Cn=(Z>>>14|ne<<18)^(Z>>>18|ne<<14)^(Z<<23|ne>>>9),U0=h[oe],Bn=U0.high,H0=U0.low,ee=nt+Cn,ve=Xr+An+(ee>>>0<nt>>>0?1:0),ee=ee+q0,ve=ve+yn+(ee>>>0<q0>>>0?1:0),ee=ee+H0,ve=ve+Bn+(ee>>>0<H0>>>0?1:0),ee=ee+re,ve=ve+xe+(ee>>>0<re>>>0?1:0),N0=L0+wn,Dn=En+bn+(N0>>>0<L0>>>0?1:0);Xr=jt,nt=it,jt=It,it=st,It=ne,st=Z,Z=rt+ee|0,ne=Vr+ve+(Z>>>0<rt>>>0?1:0)|0,Vr=tt,rt=Ue,tt=Q,Ue=H,Q=K,H=M,M=ee+N0|0,K=ve+Dn+(M>>>0<ee>>>0?1:0)|0}A=m.low=A+M,m.high=B+K+(A>>>0<M>>>0?1:0),P=g.low=P+H,g.high=R+Q+(P>>>0<H>>>0?1:0),D=f.low=D+Ue,f.high=E+tt+(D>>>0<Ue>>>0?1:0),F=v.low=F+rt,v.high=O+Vr+(F>>>0<rt>>>0?1:0),I=_.low=I+Z,_.high=j+ne+(I>>>0<Z>>>0?1:0),z=y.low=z+st,y.high=L+It+(z>>>0<st>>>0?1:0),S=w.low=S+it,w.high=C+jt+(S>>>0<it>>>0?1:0),k=b.low=k+nt,b.high=T+Xr+(k>>>0<nt>>>0?1:0)},_doFinalize:function(){var u=this._data,x=u.words,p=this._nDataBytes*8,m=u.sigBytes*8;x[m>>>5]|=128<<24-m%32,x[(m+128>>>10<<5)+30]=Math.floor(p/4294967296),x[(m+128>>>10<<5)+31]=p,u.sigBytes=x.length*4,this._process();var g=this._hash.toX32();return g},clone:function(){var u=r.clone.call(this);return u._hash=this._hash.clone(),u},blockSize:1024/32});e.SHA512=r._createHelper(d),e.HmacSHA512=r._createHmacHelper(d)}(),s.SHA512})});var wi=$((wr,bi)=>{(function(s,e,t){typeof wr=="object"?bi.exports=wr=e(N(),Tt(),A0()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(s.CryptoJS)})(wr,function(s){return function(){var e=s,t=e.x64,r=t.Word,i=t.WordArray,n=e.algo,o=n.SHA512,a=n.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=16,c}});e.SHA384=o._createHelper(a),e.HmacSHA384=o._createHmacHelper(a)}(),s.SHA384})});var Ai=$((Er,Ei)=>{(function(s,e,t){typeof Er=="object"?Ei.exports=Er=e(N(),Tt()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(s.CryptoJS)})(Er,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,o=t.x64,a=o.Word,c=t.algo,h=[],l=[],d=[];(function(){for(var p=1,m=0,g=0;g<24;g++){h[p+5*m]=(g+1)*(g+2)/2%64;var f=m%5,v=(2*p+3*m)%5;p=f,m=v}for(var p=0;p<5;p++)for(var m=0;m<5;m++)l[p+5*m]=m+(2*p+3*m)%5*5;for(var _=1,y=0;y<24;y++){for(var w=0,b=0,B=0;B<7;B++){if(_&1){var A=(1<<B)-1;A<32?b^=1<<A:w^=1<<A-32}_&128?_=_<<1^113:_<<=1}d[y]=a.create(w,b)}})();var u=[];(function(){for(var p=0;p<25;p++)u[p]=a.create()})();var x=c.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var p=this._state=[],m=0;m<25;m++)p[m]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(p,m){for(var g=this._state,f=this.blockSize/2,v=0;v<f;v++){var _=p[m+2*v],y=p[m+2*v+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360;var w=g[v];w.high^=y,w.low^=_}for(var b=0;b<24;b++){for(var B=0;B<5;B++){for(var A=0,R=0,P=0;P<5;P++){var w=g[B+5*P];A^=w.high,R^=w.low}var E=u[B];E.high=A,E.low=R}for(var B=0;B<5;B++)for(var D=u[(B+4)%5],O=u[(B+1)%5],F=O.high,j=O.low,A=D.high^(F<<1|j>>>31),R=D.low^(j<<1|F>>>31),P=0;P<5;P++){var w=g[B+5*P];w.high^=A,w.low^=R}for(var I=1;I<25;I++){var A,R,w=g[I],L=w.high,z=w.low,C=h[I];C<32?(A=L<<C|z>>>32-C,R=z<<C|L>>>32-C):(A=z<<C-32|L>>>64-C,R=L<<C-32|z>>>64-C);var S=u[l[I]];S.high=A,S.low=R}var T=u[0],k=g[0];T.high=k.high,T.low=k.low;for(var B=0;B<5;B++)for(var P=0;P<5;P++){var I=B+5*P,w=g[I],K=u[I],M=u[(B+1)%5+5*P],Q=u[(B+2)%5+5*P];w.high=K.high^~M.high&Q.high,w.low=K.low^~M.low&Q.low}var w=g[0],H=d[b];w.high^=H.high,w.low^=H.low}},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,f=p.sigBytes*8,v=this.blockSize*32;m[f>>>5]|=1<<24-f%32,m[(e.ceil((f+1)/v)*v>>>5)-1]|=128,p.sigBytes=m.length*4,this._process();for(var _=this._state,y=this.cfg.outputLength/8,w=y/8,b=[],B=0;B<w;B++){var A=_[B],R=A.high,P=A.low;R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,b.push(P),b.push(R)}return new i.init(b,y)},clone:function(){for(var p=n.clone.call(this),m=p._state=this._state.slice(0),g=0;g<25;g++)m[g]=m[g].clone();return p}});t.SHA3=n._createHelper(x),t.HmacSHA3=n._createHmacHelper(x)}(Math),s.SHA3})});var Bi=$((Ar,Ci)=>{(function(s,e){typeof Ar=="object"?Ci.exports=Ar=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(Ar,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,o=t.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=i.create([0,1518500249,1859775393,2400959708,2840853838]),u=i.create([1352829926,1548603684,1836072691,2053994217,0]),x=o.RIPEMD160=n.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,w){for(var b=0;b<16;b++){var B=w+b,A=y[B];y[B]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var R=this._hash.words,P=d.words,E=u.words,D=a.words,O=c.words,F=h.words,j=l.words,I,L,z,C,S,T,k,K,M,Q;T=I=R[0],k=L=R[1],K=z=R[2],M=C=R[3],Q=S=R[4];for(var H,b=0;b<80;b+=1)H=I+y[w+D[b]]|0,b<16?H+=p(L,z,C)+P[0]:b<32?H+=m(L,z,C)+P[1]:b<48?H+=g(L,z,C)+P[2]:b<64?H+=f(L,z,C)+P[3]:H+=v(L,z,C)+P[4],H=H|0,H=_(H,F[b]),H=H+S|0,I=S,S=C,C=_(z,10),z=L,L=H,H=T+y[w+O[b]]|0,b<16?H+=v(k,K,M)+E[0]:b<32?H+=f(k,K,M)+E[1]:b<48?H+=g(k,K,M)+E[2]:b<64?H+=m(k,K,M)+E[3]:H+=p(k,K,M)+E[4],H=H|0,H=_(H,j[b]),H=H+Q|0,T=Q,Q=M,M=_(K,10),K=k,k=H;H=R[1]+z+M|0,R[1]=R[2]+C+Q|0,R[2]=R[3]+S+T|0,R[3]=R[4]+I+k|0,R[4]=R[0]+L+K|0,R[0]=H},_doFinalize:function(){var y=this._data,w=y.words,b=this._nDataBytes*8,B=y.sigBytes*8;w[B>>>5]|=128<<24-B%32,w[(B+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,y.sigBytes=(w.length+1)*4,this._process();for(var A=this._hash,R=A.words,P=0;P<5;P++){var E=R[P];R[P]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}return A},clone:function(){var y=n.clone.call(this);return y._hash=this._hash.clone(),y}});function p(y,w,b){return y^w^b}function m(y,w,b){return y&w|~y&b}function g(y,w,b){return(y|~w)^b}function f(y,w,b){return y&b|w&~b}function v(y,w,b){return y^(w|~b)}function _(y,w){return y<<w|y>>>32-w}t.RIPEMD160=n._createHelper(x),t.HmacRIPEMD160=n._createHmacHelper(x)}(Math),s.RIPEMD160})});var Br=$((Cr,Di)=>{(function(s,e){typeof Cr=="object"?Di.exports=Cr=e(N()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(Cr,function(s){(function(){var e=s,t=e.lib,r=t.Base,i=e.enc,n=i.Utf8,o=e.algo,a=o.HMAC=r.extend({init:function(c,h){c=this._hasher=new c.init,typeof h=="string"&&(h=n.parse(h));var l=c.blockSize,d=l*4;h.sigBytes>d&&(h=c.finalize(h)),h.clamp();for(var u=this._oKey=h.clone(),x=this._iKey=h.clone(),p=u.words,m=x.words,g=0;g<l;g++)p[g]^=1549556828,m[g]^=909522486;u.sigBytes=x.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var h=this._hasher,l=h.finalize(c);h.reset();var d=h.finalize(this._oKey.clone().concat(l));return d}})})()})});var Fi=$((Dr,ki)=>{(function(s,e,t){typeof Dr=="object"?ki.exports=Dr=e(N(),mr(),Br()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(s.CryptoJS)})(Dr,function(s){return function(){var e=s,t=e.lib,r=t.Base,i=t.WordArray,n=e.algo,o=n.SHA256,a=n.HMAC,c=n.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,l){for(var d=this.cfg,u=a.create(d.hasher,h),x=i.create(),p=i.create([1]),m=x.words,g=p.words,f=d.keySize,v=d.iterations;m.length<f;){var _=u.update(l).finalize(p);u.reset();for(var y=_.words,w=y.length,b=_,B=1;B<v;B++){b=u.finalize(b),u.reset();for(var A=b.words,R=0;R<w;R++)y[R]^=A[R]}x.concat(_),g[0]++}return x.sigBytes=f*4,x}});e.PBKDF2=function(h,l,d){return c.create(d).compute(h,l)}}(),s.PBKDF2})});var fe=$((kr,Si)=>{(function(s,e,t){typeof kr=="object"?Si.exports=kr=e(N(),E0(),Br()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(s.CryptoJS)})(kr,function(s){return function(){var e=s,t=e.lib,r=t.Base,i=t.WordArray,n=e.algo,o=n.MD5,a=n.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,h){for(var l,d=this.cfg,u=d.hasher.create(),x=i.create(),p=x.words,m=d.keySize,g=d.iterations;p.length<m;){l&&u.update(l),l=u.update(c).finalize(h),u.reset();for(var f=1;f<g;f++)l=u.finalize(l),u.reset();x.concat(l)}return x.sigBytes=m*4,x}});e.EvpKDF=function(c,h,l){return a.create(l).compute(c,h)}}(),s.EvpKDF})});var J=$((Fr,Ti)=>{(function(s,e,t){typeof Fr=="object"?Ti.exports=Fr=e(N(),fe()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(s.CryptoJS)})(Fr,function(s){s.lib.Cipher||function(e){var t=s,r=t.lib,i=r.Base,n=r.WordArray,o=r.BufferedBlockAlgorithm,a=t.enc,c=a.Utf8,h=a.Base64,l=t.algo,d=l.EvpKDF,u=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(E,D){return this.create(this._ENC_XFORM_MODE,E,D)},createDecryptor:function(E,D){return this.create(this._DEC_XFORM_MODE,E,D)},init:function(E,D,O){this.cfg=this.cfg.extend(O),this._xformMode=E,this._key=D,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){E&&this._append(E);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(D){return typeof D=="string"?P:B}return function(D){return{encrypt:function(O,F,j){return E(F).encrypt(D,O,F,j)},decrypt:function(O,F,j){return E(F).decrypt(D,O,F,j)}}}}()}),x=r.StreamCipher=u.extend({_doFinalize:function(){var E=this._process(!0);return E},blockSize:1}),p=t.mode={},m=r.BlockCipherMode=i.extend({createEncryptor:function(E,D){return this.Encryptor.create(E,D)},createDecryptor:function(E,D){return this.Decryptor.create(E,D)},init:function(E,D){this._cipher=E,this._iv=D}}),g=p.CBC=function(){var E=m.extend();E.Encryptor=E.extend({processBlock:function(O,F){var j=this._cipher,I=j.blockSize;D.call(this,O,F,I),j.encryptBlock(O,F),this._prevBlock=O.slice(F,F+I)}}),E.Decryptor=E.extend({processBlock:function(O,F){var j=this._cipher,I=j.blockSize,L=O.slice(F,F+I);j.decryptBlock(O,F),D.call(this,O,F,I),this._prevBlock=L}});function D(O,F,j){var I,L=this._iv;L?(I=L,this._iv=e):I=this._prevBlock;for(var z=0;z<j;z++)O[F+z]^=I[z]}return E}(),f=t.pad={},v=f.Pkcs7={pad:function(E,D){for(var O=D*4,F=O-E.sigBytes%O,j=F<<24|F<<16|F<<8|F,I=[],L=0;L<F;L+=4)I.push(j);var z=n.create(I,F);E.concat(z)},unpad:function(E){var D=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=D}},_=r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:g,padding:v}),reset:function(){var E;u.reset.call(this);var D=this.cfg,O=D.iv,F=D.mode;this._xformMode==this._ENC_XFORM_MODE?E=F.createEncryptor:(E=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,O&&O.words):(this._mode=E.call(F,this,O&&O.words),this._mode.__creator=E)},_doProcessBlock:function(E,D){this._mode.processBlock(E,D)},_doFinalize:function(){var E,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),D.unpad(E)),E},blockSize:128/32}),y=r.CipherParams=i.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),w=t.format={},b=w.OpenSSL={stringify:function(E){var D,O=E.ciphertext,F=E.salt;return F?D=n.create([1398893684,1701076831]).concat(F).concat(O):D=O,D.toString(h)},parse:function(E){var D,O=h.parse(E),F=O.words;return F[0]==1398893684&&F[1]==1701076831&&(D=n.create(F.slice(2,4)),F.splice(0,4),O.sigBytes-=16),y.create({ciphertext:O,salt:D})}},B=r.SerializableCipher=i.extend({cfg:i.extend({format:b}),encrypt:function(E,D,O,F){F=this.cfg.extend(F);var j=E.createEncryptor(O,F),I=j.finalize(D),L=j.cfg;return y.create({ciphertext:I,key:O,iv:L.iv,algorithm:E,mode:L.mode,padding:L.padding,blockSize:E.blockSize,formatter:F.format})},decrypt:function(E,D,O,F){F=this.cfg.extend(F),D=this._parse(D,F.format);var j=E.createDecryptor(O,F).finalize(D.ciphertext);return j},_parse:function(E,D){return typeof E=="string"?D.parse(E,this):E}}),A=t.kdf={},R=A.OpenSSL={execute:function(E,D,O,F,j){if(F||(F=n.random(64/8)),j)var I=d.create({keySize:D+O,hasher:j}).compute(E,F);else var I=d.create({keySize:D+O}).compute(E,F);var L=n.create(I.words.slice(D),O*4);return I.sigBytes=D*4,y.create({key:I,iv:L,salt:F})}},P=r.PasswordBasedCipher=B.extend({cfg:B.cfg.extend({kdf:R}),encrypt:function(E,D,O,F){F=this.cfg.extend(F);var j=F.kdf.execute(O,E.keySize,E.ivSize,F.salt,F.hasher);F.iv=j.iv;var I=B.encrypt.call(this,E,D,j.key,F);return I.mixIn(j),I},decrypt:function(E,D,O,F){F=this.cfg.extend(F),D=this._parse(D,F.format);var j=F.kdf.execute(O,E.keySize,E.ivSize,D.salt,F.hasher);F.iv=j.iv;var I=B.decrypt.call(this,E,D,j.key,F);return I}})}()})});var Pi=$((Sr,Ri)=>{(function(s,e,t){typeof Sr=="object"?Ri.exports=Sr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Sr,function(s){return s.mode.CFB=function(){var e=s.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(r,i){var n=this._cipher,o=n.blockSize;t.call(this,r,i,o,n),this._prevBlock=r.slice(i,i+o)}}),e.Decryptor=e.extend({processBlock:function(r,i){var n=this._cipher,o=n.blockSize,a=r.slice(i,i+o);t.call(this,r,i,o,n),this._prevBlock=a}});function t(r,i,n,o){var a,c=this._iv;c?(a=c.slice(0),this._iv=void 0):a=this._prevBlock,o.encryptBlock(a,0);for(var h=0;h<n;h++)r[i+h]^=a[h]}return e}(),s.mode.CFB})});var Ii=$((Tr,Oi)=>{(function(s,e,t){typeof Tr=="object"?Oi.exports=Tr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Tr,function(s){return s.mode.CTR=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,i){var n=this._cipher,o=n.blockSize,a=this._iv,c=this._counter;a&&(c=this._counter=a.slice(0),this._iv=void 0);var h=c.slice(0);n.encryptBlock(h,0),c[o-1]=c[o-1]+1|0;for(var l=0;l<o;l++)r[i+l]^=h[l]}});return e.Decryptor=t,e}(),s.mode.CTR})});var $i=$((Rr,ji)=>{(function(s,e,t){typeof Rr=="object"?ji.exports=Rr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Rr,function(s){return s.mode.CTRGladman=function(){var e=s.lib.BlockCipherMode.extend();function t(n){if((n>>24&255)===255){var o=n>>16&255,a=n>>8&255,c=n&255;o===255?(o=0,a===255?(a=0,c===255?c=0:++c):++a):++o,n=0,n+=o<<16,n+=a<<8,n+=c}else n+=1<<24;return n}function r(n){return(n[0]=t(n[0]))===0&&(n[1]=t(n[1])),n}var i=e.Encryptor=e.extend({processBlock:function(n,o){var a=this._cipher,c=a.blockSize,h=this._iv,l=this._counter;h&&(l=this._counter=h.slice(0),this._iv=void 0),r(l);var d=l.slice(0);a.encryptBlock(d,0);for(var u=0;u<c;u++)n[o+u]^=d[u]}});return e.Decryptor=i,e}(),s.mode.CTRGladman})});var Li=$((Pr,qi)=>{(function(s,e,t){typeof Pr=="object"?qi.exports=Pr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Pr,function(s){return s.mode.OFB=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,i){var n=this._cipher,o=n.blockSize,a=this._iv,c=this._keystream;a&&(c=this._keystream=a.slice(0),this._iv=void 0),n.encryptBlock(c,0);for(var h=0;h<o;h++)r[i+h]^=c[h]}});return e.Decryptor=t,e}(),s.mode.OFB})});var Hi=$((Or,Ui)=>{(function(s,e,t){typeof Or=="object"?Ui.exports=Or=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Or,function(s){return s.mode.ECB=function(){var e=s.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,r){this._cipher.encryptBlock(t,r)}}),e.Decryptor=e.extend({processBlock:function(t,r){this._cipher.decryptBlock(t,r)}}),e}(),s.mode.ECB})});var zi=$((Ir,Ni)=>{(function(s,e,t){typeof Ir=="object"?Ni.exports=Ir=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Ir,function(s){return s.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=t*4,n=i-r%i,o=r+n-1;e.clamp(),e.words[o>>>2]|=n<<24-o%4*8,e.sigBytes+=n},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},s.pad.Ansix923})});var Wi=$((jr,Mi)=>{(function(s,e,t){typeof jr=="object"?Mi.exports=jr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(jr,function(s){return s.pad.Iso10126={pad:function(e,t){var r=t*4,i=r-e.sigBytes%r;e.concat(s.lib.WordArray.random(i-1)).concat(s.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},s.pad.Iso10126})});var Gi=$(($r,Ki)=>{(function(s,e,t){typeof $r=="object"?Ki.exports=$r=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})($r,function(s){return s.pad.Iso97971={pad:function(e,t){e.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(e,t)},unpad:function(e){s.pad.ZeroPadding.unpad(e),e.sigBytes--}},s.pad.Iso97971})});var Vi=$((qr,Ji)=>{(function(s,e,t){typeof qr=="object"?Ji.exports=qr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(qr,function(s){return s.pad.ZeroPadding={pad:function(e,t){var r=t*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},s.pad.ZeroPadding})});var Qi=$((Lr,Xi)=>{(function(s,e,t){typeof Lr=="object"?Xi.exports=Lr=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Lr,function(s){return s.pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding})});var Zi=$((Ur,Yi)=>{(function(s,e,t){typeof Ur=="object"?Yi.exports=Ur=e(N(),J()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Ur,function(s){return function(e){var t=s,r=t.lib,i=r.CipherParams,n=t.enc,o=n.Hex,a=t.format,c=a.Hex={stringify:function(h){return h.ciphertext.toString(o)},parse:function(h){var l=o.parse(h);return i.create({ciphertext:l})}}}(),s.format.Hex})});var tn=$((Hr,en)=>{(function(s,e,t){typeof Hr=="object"?en.exports=Hr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Hr,function(s){return function(){var e=s,t=e.lib,r=t.BlockCipher,i=e.algo,n=[],o=[],a=[],c=[],h=[],l=[],d=[],u=[],x=[],p=[];(function(){for(var f=[],v=0;v<256;v++)v<128?f[v]=v<<1:f[v]=v<<1^283;for(var _=0,y=0,v=0;v<256;v++){var w=y^y<<1^y<<2^y<<3^y<<4;w=w>>>8^w&255^99,n[_]=w,o[w]=_;var b=f[_],B=f[b],A=f[B],R=f[w]*257^w*16843008;a[_]=R<<24|R>>>8,c[_]=R<<16|R>>>16,h[_]=R<<8|R>>>24,l[_]=R;var R=A*16843009^B*65537^b*257^_*16843008;d[w]=R<<24|R>>>8,u[w]=R<<16|R>>>16,x[w]=R<<8|R>>>24,p[w]=R,_?(_=b^f[f[f[A^b]]],y^=f[f[y]]):_=y=1}})();var m=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=r.extend({_doReset:function(){var f;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,_=v.words,y=v.sigBytes/4,w=this._nRounds=y+6,b=(w+1)*4,B=this._keySchedule=[],A=0;A<b;A++)A<y?B[A]=_[A]:(f=B[A-1],A%y?y>6&&A%y==4&&(f=n[f>>>24]<<24|n[f>>>16&255]<<16|n[f>>>8&255]<<8|n[f&255]):(f=f<<8|f>>>24,f=n[f>>>24]<<24|n[f>>>16&255]<<16|n[f>>>8&255]<<8|n[f&255],f^=m[A/y|0]<<24),B[A]=B[A-y]^f);for(var R=this._invKeySchedule=[],P=0;P<b;P++){var A=b-P;if(P%4)var f=B[A];else var f=B[A-4];P<4||A<=4?R[P]=f:R[P]=d[n[f>>>24]]^u[n[f>>>16&255]]^x[n[f>>>8&255]]^p[n[f&255]]}}},encryptBlock:function(f,v){this._doCryptBlock(f,v,this._keySchedule,a,c,h,l,n)},decryptBlock:function(f,v){var _=f[v+1];f[v+1]=f[v+3],f[v+3]=_,this._doCryptBlock(f,v,this._invKeySchedule,d,u,x,p,o);var _=f[v+1];f[v+1]=f[v+3],f[v+3]=_},_doCryptBlock:function(f,v,_,y,w,b,B,A){for(var R=this._nRounds,P=f[v]^_[0],E=f[v+1]^_[1],D=f[v+2]^_[2],O=f[v+3]^_[3],F=4,j=1;j<R;j++){var I=y[P>>>24]^w[E>>>16&255]^b[D>>>8&255]^B[O&255]^_[F++],L=y[E>>>24]^w[D>>>16&255]^b[O>>>8&255]^B[P&255]^_[F++],z=y[D>>>24]^w[O>>>16&255]^b[P>>>8&255]^B[E&255]^_[F++],C=y[O>>>24]^w[P>>>16&255]^b[E>>>8&255]^B[D&255]^_[F++];P=I,E=L,D=z,O=C}var I=(A[P>>>24]<<24|A[E>>>16&255]<<16|A[D>>>8&255]<<8|A[O&255])^_[F++],L=(A[E>>>24]<<24|A[D>>>16&255]<<16|A[O>>>8&255]<<8|A[P&255])^_[F++],z=(A[D>>>24]<<24|A[O>>>16&255]<<16|A[P>>>8&255]<<8|A[E&255])^_[F++],C=(A[O>>>24]<<24|A[P>>>16&255]<<16|A[E>>>8&255]<<8|A[D&255])^_[F++];f[v]=I,f[v+1]=L,f[v+2]=z,f[v+3]=C},keySize:256/32});e.AES=r._createHelper(g)}(),s.AES})});var sn=$((Nr,rn)=>{(function(s,e,t){typeof Nr=="object"?rn.exports=Nr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Nr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=t.BlockCipher,n=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=n.DES=i.extend({_doReset:function(){for(var m=this._key,g=m.words,f=[],v=0;v<56;v++){var _=o[v]-1;f[v]=g[_>>>5]>>>31-_%32&1}for(var y=this._subKeys=[],w=0;w<16;w++){for(var b=y[w]=[],B=c[w],v=0;v<24;v++)b[v/6|0]|=f[(a[v]-1+B)%28]<<31-v%6,b[4+(v/6|0)]|=f[28+(a[v+24]-1+B)%28]<<31-v%6;b[0]=b[0]<<1|b[0]>>>31;for(var v=1;v<7;v++)b[v]=b[v]>>>(v-1)*4+3;b[7]=b[7]<<5|b[7]>>>27}for(var A=this._invSubKeys=[],v=0;v<16;v++)A[v]=y[15-v]},encryptBlock:function(m,g){this._doCryptBlock(m,g,this._subKeys)},decryptBlock:function(m,g){this._doCryptBlock(m,g,this._invSubKeys)},_doCryptBlock:function(m,g,f){this._lBlock=m[g],this._rBlock=m[g+1],u.call(this,4,252645135),u.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),u.call(this,1,1431655765);for(var v=0;v<16;v++){for(var _=f[v],y=this._lBlock,w=this._rBlock,b=0,B=0;B<8;B++)b|=h[B][((w^_[B])&l[B])>>>0];this._lBlock=w,this._rBlock=y^b}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,u.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),m[g]=this._lBlock,m[g+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function u(m,g){var f=(this._lBlock>>>m^this._rBlock)&g;this._rBlock^=f,this._lBlock^=f<<m}function x(m,g){var f=(this._rBlock>>>m^this._lBlock)&g;this._lBlock^=f,this._rBlock^=f<<m}e.DES=i._createHelper(d);var p=n.TripleDES=i.extend({_doReset:function(){var m=this._key,g=m.words;if(g.length!==2&&g.length!==4&&g.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var f=g.slice(0,2),v=g.length<4?g.slice(0,2):g.slice(2,4),_=g.length<6?g.slice(0,2):g.slice(4,6);this._des1=d.createEncryptor(r.create(f)),this._des2=d.createEncryptor(r.create(v)),this._des3=d.createEncryptor(r.create(_))},encryptBlock:function(m,g){this._des1.encryptBlock(m,g),this._des2.decryptBlock(m,g),this._des3.encryptBlock(m,g)},decryptBlock:function(m,g){this._des3.decryptBlock(m,g),this._des2.encryptBlock(m,g),this._des1.decryptBlock(m,g)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(p)}(),s.TripleDES})});var on=$((zr,nn)=>{(function(s,e,t){typeof zr=="object"?nn.exports=zr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(zr,function(s){return function(){var e=s,t=e.lib,r=t.StreamCipher,i=e.algo,n=i.RC4=r.extend({_doReset:function(){for(var c=this._key,h=c.words,l=c.sigBytes,d=this._S=[],u=0;u<256;u++)d[u]=u;for(var u=0,x=0;u<256;u++){var p=u%l,m=h[p>>>2]>>>24-p%4*8&255;x=(x+d[u]+m)%256;var g=d[u];d[u]=d[x],d[x]=g}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var c=this._S,h=this._i,l=this._j,d=0,u=0;u<4;u++){h=(h+1)%256,l=(l+c[h])%256;var x=c[h];c[h]=c[l],c[l]=x,d|=c[(c[h]+c[l])%256]<<24-u*8}return this._i=h,this._j=l,d}e.RC4=r._createHelper(n);var a=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)o.call(this)}});e.RC4Drop=r._createHelper(a)}(),s.RC4})});var cn=$((Mr,an)=>{(function(s,e,t){typeof Mr=="object"?an.exports=Mr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Mr,function(s){return function(){var e=s,t=e.lib,r=t.StreamCipher,i=e.algo,n=[],o=[],a=[],c=i.Rabbit=r.extend({_doReset:function(){for(var l=this._key.words,d=this.cfg.iv,u=0;u<4;u++)l[u]=(l[u]<<8|l[u]>>>24)&16711935|(l[u]<<24|l[u]>>>8)&4278255360;var x=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],p=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var u=0;u<4;u++)h.call(this);for(var u=0;u<8;u++)p[u]^=x[u+4&7];if(d){var m=d.words,g=m[0],f=m[1],v=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,_=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,y=v>>>16|_&4294901760,w=_<<16|v&65535;p[0]^=v,p[1]^=y,p[2]^=_,p[3]^=w,p[4]^=v,p[5]^=y,p[6]^=_,p[7]^=w;for(var u=0;u<4;u++)h.call(this)}},_doProcessBlock:function(l,d){var u=this._X;h.call(this),n[0]=u[0]^u[5]>>>16^u[3]<<16,n[1]=u[2]^u[7]>>>16^u[5]<<16,n[2]=u[4]^u[1]>>>16^u[7]<<16,n[3]=u[6]^u[3]>>>16^u[1]<<16;for(var x=0;x<4;x++)n[x]=(n[x]<<8|n[x]>>>24)&16711935|(n[x]<<24|n[x]>>>8)&4278255360,l[d+x]^=n[x]},blockSize:128/32,ivSize:64/32});function h(){for(var l=this._X,d=this._C,u=0;u<8;u++)o[u]=d[u];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<o[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<o[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<o[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<o[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<o[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<o[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<o[6]>>>0?1:0)|0,this._b=d[7]>>>0<o[7]>>>0?1:0;for(var u=0;u<8;u++){var x=l[u]+d[u],p=x&65535,m=x>>>16,g=((p*p>>>17)+p*m>>>15)+m*m,f=((x&4294901760)*x|0)+((x&65535)*x|0);a[u]=g^f}l[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,l[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,l[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,l[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,l[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,l[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,l[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,l[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=r._createHelper(c)}(),s.Rabbit})});var un=$((Wr,ln)=>{(function(s,e,t){typeof Wr=="object"?ln.exports=Wr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Wr,function(s){return function(){var e=s,t=e.lib,r=t.StreamCipher,i=e.algo,n=[],o=[],a=[],c=i.RabbitLegacy=r.extend({_doReset:function(){var l=this._key.words,d=this.cfg.iv,u=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],x=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var p=0;p<4;p++)h.call(this);for(var p=0;p<8;p++)x[p]^=u[p+4&7];if(d){var m=d.words,g=m[0],f=m[1],v=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,_=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,y=v>>>16|_&4294901760,w=_<<16|v&65535;x[0]^=v,x[1]^=y,x[2]^=_,x[3]^=w,x[4]^=v,x[5]^=y,x[6]^=_,x[7]^=w;for(var p=0;p<4;p++)h.call(this)}},_doProcessBlock:function(l,d){var u=this._X;h.call(this),n[0]=u[0]^u[5]>>>16^u[3]<<16,n[1]=u[2]^u[7]>>>16^u[5]<<16,n[2]=u[4]^u[1]>>>16^u[7]<<16,n[3]=u[6]^u[3]>>>16^u[1]<<16;for(var x=0;x<4;x++)n[x]=(n[x]<<8|n[x]>>>24)&16711935|(n[x]<<24|n[x]>>>8)&4278255360,l[d+x]^=n[x]},blockSize:128/32,ivSize:64/32});function h(){for(var l=this._X,d=this._C,u=0;u<8;u++)o[u]=d[u];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<o[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<o[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<o[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<o[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<o[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<o[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<o[6]>>>0?1:0)|0,this._b=d[7]>>>0<o[7]>>>0?1:0;for(var u=0;u<8;u++){var x=l[u]+d[u],p=x&65535,m=x>>>16,g=((p*p>>>17)+p*m>>>15)+m*m,f=((x&4294901760)*x|0)+((x&65535)*x|0);a[u]=g^f}l[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,l[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,l[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,l[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,l[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,l[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,l[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,l[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=r._createHelper(c)}(),s.RabbitLegacy})});var dn=$((Kr,hn)=>{(function(s,e,t){typeof Kr=="object"?hn.exports=Kr=e(N(),me(),ye(),fe(),J()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Kr,function(s){return function(){var e=s,t=e.lib,r=t.BlockCipher,i=e.algo;let n=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(p,m){let g=m>>24&255,f=m>>16&255,v=m>>8&255,_=m&255,y=p.sbox[0][g]+p.sbox[1][f];return y=y^p.sbox[2][v],y=y+p.sbox[3][_],y}function l(p,m,g){let f=m,v=g,_;for(let y=0;y<n;++y)f=f^p.pbox[y],v=h(p,f)^v,_=f,f=v,v=_;return _=f,f=v,v=_,v=v^p.pbox[n],f=f^p.pbox[n+1],{left:f,right:v}}function d(p,m,g){let f=m,v=g,_;for(let y=n+1;y>1;--y)f=f^p.pbox[y],v=h(p,f)^v,_=f,f=v,v=_;return _=f,f=v,v=_,v=v^p.pbox[1],f=f^p.pbox[0],{left:f,right:v}}function u(p,m,g){for(let w=0;w<4;w++){p.sbox[w]=[];for(let b=0;b<256;b++)p.sbox[w][b]=a[w][b]}let f=0;for(let w=0;w<n+2;w++)p.pbox[w]=o[w]^m[f],f++,f>=g&&(f=0);let v=0,_=0,y=0;for(let w=0;w<n+2;w+=2)y=l(p,v,_),v=y.left,_=y.right,p.pbox[w]=v,p.pbox[w+1]=_;for(let w=0;w<4;w++)for(let b=0;b<256;b+=2)y=l(p,v,_),v=y.left,_=y.right,p.sbox[w][b]=v,p.sbox[w][b+1]=_;return!0}var x=i.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var p=this._keyPriorReset=this._key,m=p.words,g=p.sigBytes/4;u(c,m,g)}},encryptBlock:function(p,m){var g=l(c,p[m],p[m+1]);p[m]=g.left,p[m+1]=g.right},decryptBlock:function(p,m){var g=d(c,p[m],p[m+1]);p[m]=g.left,p[m+1]=g.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(x)}(),s.Blowfish})});var xn=$((Gr,fn)=>{(function(s,e,t){typeof Gr=="object"?fn.exports=Gr=e(N(),Tt(),li(),hi(),me(),xi(),ye(),E0(),mr(),mi(),A0(),wi(),Ai(),Bi(),Br(),Fi(),fe(),J(),Pi(),Ii(),$i(),Li(),Hi(),zi(),Wi(),Gi(),Vi(),Qi(),Zi(),tn(),sn(),on(),cn(),un(),dn()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):s.CryptoJS=e(s.CryptoJS)})(Gr,function(s){return s})});var K0=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(pe(),be)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var ct=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Lt=class extends ct{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},lt=class extends ct{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},ut=class extends ct{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Ut;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Ut||(Ut={}));var Un=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},ht=class{constructor(e,{headers:t={},customFetch:r,region:i=Ut.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=K0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Un(this,void 0,void 0,function*(){try{let{headers:i,method:n,body:o}=t,a={},{region:c}=t;c||(c=this.region);let h=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let d=yield this.fetch(h.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(m=>{throw new Lt(m)}),u=d.headers.get("x-relay-error");if(u&&u==="true")throw new lt(d);if(!d.ok)throw new ut(d);let x=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return x==="application/json"?p=yield d.json():x==="application/octet-stream"?p=yield d.blob():x==="text/event-stream"?p=d:x==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof ut||i instanceof lt?i.context:void 0}}})}};var ns=W0(is(),1),{PostgrestClient:os,PostgrestQueryBuilder:pa,PostgrestFilterBuilder:ga,PostgrestTransformBuilder:_a,PostgrestBuilder:ma,PostgrestError:Yn}=ns.default;function as(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var cs=as();var ls="2.11.15";var us=`realtime-js/${ls}`,hs="1.0.0";var Wt=1e4,ds=1e3,We;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(We||(We={}));var X;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(X||(X={}));var te;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(te||(te={}));var Mt;(function(s){s.websocket="websocket"})(Mt||(Mt={}));var ge;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ge||(ge={}));var _t=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),n=t.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(e.slice(o,o+i));o=o+i;let c=r.decode(e.slice(o,o+n));o=o+n;let h=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:h}}};var we=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var W;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(W||(W={}));var h0=(s,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,o)=>(n[o]=Zn(o,s,e,i),n),{})},Zn=(s,e,t,r)=>{let i=e.find(a=>a.name===s),n=i?.type,o=t[s];return n&&!r.includes(n)?fs(n,o):u0(o)},fs=(s,e)=>{if(s.charAt(0)==="_"){let t=s.slice(1,s.length);return so(e,t)}switch(s){case W.bool:return eo(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return to(e);case W.json:case W.jsonb:return ro(e);case W.timestamp:return io(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return u0(e);default:return u0(e)}},u0=s=>s,eo=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},to=s=>{if(typeof s=="string"){let e=parseFloat(s);if(!Number.isNaN(e))return e}return s},ro=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},so=(s,e)=>{if(typeof s!="string")return s;let t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let n,o=s.slice(1,t);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(a=>fs(e,a))}return s},io=s=>typeof s=="string"?s.replace(" ","T"):s,Kt=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var Ee=class{constructor(e,t,r={},i=Wt){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var d0;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(d0||(d0={}));var Ke=class s{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:n,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=s.syncState(this.state,i,n,o),this.pendingDiffs.forEach(c=>{this.state=s.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:n,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=s.syncDiff(this.state,i,n,o),a())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let n=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(n,(h,l)=>{o[h]||(c[h]=l)}),this.map(o,(h,l)=>{let d=n[h];if(d){let u=l.map(g=>g.presence_ref),x=d.map(g=>g.presence_ref),p=l.filter(g=>x.indexOf(g.presence_ref)<0),m=d.filter(g=>u.indexOf(g.presence_ref)<0);p.length>0&&(a[h]=p),m.length>0&&(c[h]=m)}else a[h]=l}),this.syncDiff(n,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){let{joins:n,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(a,c)=>{var h;let l=(h=e[a])!==null&&h!==void 0?h:[];if(e[a]=this.cloneDeep(c),l.length>0){let d=e[a].map(x=>x.presence_ref),u=l.filter(x=>d.indexOf(x.presence_ref)<0);e[a].unshift(...u)}r(a,l,c)}),this.map(o,(a,c)=>{let h=e[a];if(!h)return;let l=c.map(d=>d.presence_ref);h=h.filter(d=>l.indexOf(d.presence_ref)<0),e[a]=h,i(a,h,c),h.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var f0;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(f0||(f0={}));var x0;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(x0||(x0={}));var ae;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ae||(ae={}));var Ge=class s{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ee(this,te.join,this.params,this.timeout),this.rejoinTimer=new we(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(te.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new Ke(this),this.broadcastEndpointURL=Kt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==X.closed){let{config:{broadcast:n,presence:o,private:a}}=this.params;this._onError(l=>e?.(ae.CHANNEL_ERROR,l)),this._onClose(()=>e?.(ae.CLOSED));let c={},h={broadcast:n,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(l=>l.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:l})=>{var d;if(this.socket.setAuth(),l===void 0){e?.(ae.SUBSCRIBED);return}else{let u=this.bindings.postgres_changes,x=(d=u?.length)!==null&&d!==void 0?d:0,p=[];for(let m=0;m<x;m++){let g=u[m],{filter:{event:f,schema:v,table:_,filter:y}}=g,w=l&&l[m];if(w&&w.event===f&&w.schema===v&&w.table===_&&w.filter===y)p.push(Object.assign(Object.assign({},g),{id:w.id}));else{this.unsubscribe(),this.state=X.errored,e?.(ae.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ae.SUBSCRIBED);return}}).receive("error",l=>{this.state=X.errored,e?.(ae.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e?.(ae.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){let{event:n,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{let h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,a,c;let h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),h.receive("ok",()=>n("ok")),h.receive("error",()=>n("error")),h.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(te.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ee(this,te.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){let i=new AbortController,n=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(n),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ee(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,n;let o=e.toLocaleLowerCase(),{close:a,error:c,leave:h,join:l}=te;if(r&&[a,c,h,l].indexOf(o)>=0&&r!==this._joinRef())return;let u=this._onMessage(o,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var p,m,g;return((p=x.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(m=x.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(x=>x.callback(u,r)):(n=this.bindings[o])===null||n===void 0||n.filter(x=>{var p,m,g,f,v,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){let y=x.id,w=(p=x.filter)===null||p===void 0?void 0:p.event;return y&&((m=t.ids)===null||m===void 0?void 0:m.includes(y))&&(w==="*"||w?.toLocaleLowerCase()===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{let y=(v=(f=x?.filter)===null||f===void 0?void 0:f.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return y==="*"||y===((_=t?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof u=="object"&&"ids"in u){let p=u.data,{schema:m,table:g,commit_timestamp:f,type:v,errors:_}=p;u=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:f,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(p))}x.callback(u,r)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),n={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&s.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(te.close,{},e)}_onError(e){this._on(te.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=h0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=h0(e.columns,e.old_record)),t}};var xs=()=>{},oo=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Je=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wt,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xs,this.ref=0,this.logger=xs,this.conn=null,this.sendBuffer=[],this.serializer=new _t,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>Promise.resolve().then(()=>(pe(),be)).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Mt.websocket}`,this.httpEndpoint=Kt(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t?.encode?t.encode:(n,o)=>o(JSON.stringify(n)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new we(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=cs),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hs}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case We.connecting:return ge.Connecting;case We.open:return ge.Open;case We.closing:return ge.Closing;default:return ge.Closed}}isConnected(){return this.connectionState()===ge.Open}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(n=>n.topic===r);if(i)return i;{let n=new Ge(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){let{topic:t,event:r,payload:i,ref:n}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${n})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{let i={access_token:t,version:us};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(te.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(ds,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:n,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,n,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(te.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([oo],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}};var Ve=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function G(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Gt=class extends Ve{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Ae=class extends Ve{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var ao=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},Vt=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(pe(),be)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},vs=()=>ao(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>(pe(),be))).Response:Response}),Jt=s=>{if(Array.isArray(s))return s.map(t=>Jt(t));if(typeof s=="function"||s!==Object(s))return s;let e={};return Object.entries(s).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=Jt(r)}),e};var Ce=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},v0=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),co=(s,e,t)=>Ce(void 0,void 0,void 0,function*(){let r=yield vs();s instanceof r&&!t?.noResolveJson?s.json().then(i=>{e(new Gt(v0(i),s.status||500))}).catch(i=>{e(new Ae(v0(i),i))}):e(new Ae(v0(s),s))}),lo=(s,e,t,r)=>{let i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function mt(s,e,t,r,i,n){return Ce(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,lo(e,r,i,n)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>co(c,a,r))})})}function Xe(s,e,t,r){return Ce(this,void 0,void 0,function*(){return mt(s,"GET",e,t,r)})}function ce(s,e,t,r,i){return Ce(this,void 0,void 0,function*(){return mt(s,"POST",e,r,i,t)})}function ps(s,e,t,r,i){return Ce(this,void 0,void 0,function*(){return mt(s,"PUT",e,r,i,t)})}function gs(s,e,t,r){return Ce(this,void 0,void 0,function*(){return mt(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Xt(s,e,t,r,i){return Ce(this,void 0,void 0,function*(){return mt(s,"DELETE",e,r,i,t)})}var Y=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},uo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_s={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},yt=class{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Vt(i)}uploadOrUpdate(e,t,r,i){return Y(this,void 0,void 0,function*(){try{let n,o=Object.assign(Object.assign({},_s),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let h=this._removeEmptyFolders(t),l=this._getFinalPath(h),d=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:n,headers:a},o?.duplex?{duplex:o.duplex}:{})),u=yield d.json();return d.ok?{data:{path:h,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(n){if(G(n))return{data:null,error:n};throw n}})}upload(e,t,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Y(this,void 0,void 0,function*(){let n=this._removeEmptyFolders(e),o=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c,h=Object.assign({upsert:_s.upsert},i),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,l["cache-control"]=`max-age=${h.cacheControl}`,l["content-type"]=h.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:l}),u=yield d.json();return d.ok?{data:{path:n,fullPath:u.Key},error:null}:{data:null,error:u}}catch(c){if(G(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Y(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");let n=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+n.url),a=o.searchParams.get("token");if(!a)throw new Ve("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}update(e,t,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Y(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Y(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield ce(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Y(this,void 0,void 0,function*(){try{let i=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}download(e,t){return Y(this,void 0,void 0,function*(){let i=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),o=n?`?${n}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Xe(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(G(a))return{data:null,error:a};throw a}})}info(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Xe(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Jt(r),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}exists(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield gs(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(G(r)&&r instanceof Ae){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&i.push(n);let a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${h}`)}}}remove(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}list(e,t,r){return Y(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},uo),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var ms="2.7.1";var ys={"X-Client-Info":`storage-js/${ms}`};var Qe=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},bt=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ys),t),this.fetch=Vt(r)}listBuckets(){return Qe(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(G(e))return{data:null,error:e};throw e}})}getBucket(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Qe(this,void 0,void 0,function*(){try{return{data:yield ps(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}};var wt=class extends bt{constructor(e,t={},r){super(e,t,r)}from(e){return new yt(this.url,this.headers,e,this.fetch)}};var bs="2.52.0";var Et="";typeof Deno<"u"?Et="deno":typeof document<"u"?Et="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Et="react-native":Et="node";var ho={"X-Client-Info":`supabase-js-${Et}/${bs}`},ws={headers:ho},Es={schema:"public"},As={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cs={};pe();var fo=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},xo=s=>{let e;return s?e=s:typeof fetch>"u"?e=Qr:e=fetch,(...t)=>e(...t)},vo=()=>typeof Headers>"u"?Yr:Headers,Bs=(s,e,t)=>{let r=xo(t),i=vo();return(n,o)=>fo(void 0,void 0,void 0,function*(){var a;let c=(a=yield e())!==null&&a!==void 0?a:s,h=new i(o?.headers);return h.has("apikey")||h.set("apikey",s),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(n,Object.assign(Object.assign({},o),{headers:h}))})};var po=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})};function Ds(s){return s.endsWith("/")?s:s+"/"}function ks(s,e){var t,r;let{db:i,auth:n,realtime:o,global:a}=s,{db:c,auth:h,realtime:l,global:d}=e,u={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},h),n),realtime:Object.assign(Object.assign({},l),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d?.headers)!==null&&t!==void 0?t:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>po(this,void 0,void 0,function*(){return""})};return s.accessToken?u.accessToken=s.accessToken:delete u.accessToken,u}var Qt="2.71.1";var Be=30*1e3,Yt=3,Zt=Yt*Be,Fs="http://localhost:9999",Ss="supabase.auth.token";var Ts={"X-Client-Info":`gotrue-js/${Qt}`};var At="X-Supabase-Api-Version",p0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rs=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ps=600*1e3;var Ct=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function q(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}var er=class extends Ct{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function Os(s){return q(s)&&s.name==="AuthApiError"}var Ye=class extends Ct{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},le=class extends Ct{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},se=class extends le{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Is(s){return q(s)&&s.name==="AuthSessionMissingError"}var De=class extends le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ke=class extends le{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Fe=class extends le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function js(s){return q(s)&&s.name==="AuthImplicitGrantRedirectError"}var Bt=class extends le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ze=class extends le{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function tr(s){return q(s)&&s.name==="AuthRetryableFetchError"}var Dt=class extends le{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Se=class extends le{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$s=` 	
\r=`.split(""),go=(()=>{let s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<$s.length;e+=1)s[$s[e].charCodeAt(0)]=-2;for(let e=0;e<rr.length;e+=1)s[rr[e].charCodeAt(0)]=e;return s})();function qs(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(rr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(rr[r]),e.queuedBits-=6}}function Ls(s,e,t){let r=go[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function g0(s){let e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=o=>{yo(o,r,t)};for(let o=0;o<s.length;o+=1)Ls(s.charCodeAt(o),i,n);return e.join("")}function _o(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function mo(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}_o(r,e)}}function yo(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Us(s){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)Ls(s.charCodeAt(i),t,r);return new Uint8Array(e)}function Hs(s){let e=[];return mo(s,t=>e.push(t)),new Uint8Array(e)}function Ns(s){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return s.forEach(i=>qs(i,t,r)),qs(null,t,r),e.join("")}function zs(s){return Math.round(Date.now()/1e3)+s}function Ms(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){let e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}var ie=()=>typeof window<"u"&&typeof document<"u",Te={tested:!1,writable:!1},sr=()=>{if(!ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Te.tested)return Te.writable;let s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Te.tested=!0,Te.writable=!0}catch{Te.tested=!0,Te.writable=!1}return Te.writable};function Ws(s){let e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var ir=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(pe(),be)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ks=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Re=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},_e=async(s,e)=>{let t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},de=async(s,e)=>{await s.removeItem(e)},kt=class s{constructor(){this.promise=new s.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};kt.promiseConstructor=Promise;function nr(s){let e=s.split(".");if(e.length!==3)throw new Se("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Rs.test(e[r]))throw new Se("JWT not in base64url format");return{header:JSON.parse(g0(e[0])),payload:JSON.parse(g0(e[1])),signature:Us(e[2]),raw:{header:e[0],payload:e[1]}}}async function Gs(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Js(s,e){return new Promise((r,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{let o=await s(n);if(!e(n,null,o)){r(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function bo(s){return("0"+s.toString(16)).substr(-2)}function wo(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let n=0;n<56;n++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,bo).join("")}async function Eo(s){let t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function Ao(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;let t=await Eo(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pe(s,e,t=!1){let r=wo(),i=r;t&&(i+="/PASSWORD_RECOVERY"),await Re(s,`${e}-code-verifier`,i);let n=await Ao(r);return[n,r===n?"plain":"s256"]}var Co=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vs(s){let e=s.headers.get(At);if(!e||!e.match(Co))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Xs(s){if(!s)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function Qs(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Bo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Oe(s){if(!Bo.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function or(){let s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _0(s){return JSON.parse(JSON.stringify(s))}var Do=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t},Ie=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ko=[502,503,504];async function Ys(s){var e;if(!Ks(s))throw new Ze(Ie(s),0);if(ko.includes(s.status))throw new Ze(Ie(s),s.status);let t;try{t=await s.json()}catch(n){throw new Ye(Ie(n),n)}let r,i=Vs(s);if(i&&i.getTime()>=p0["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Dt(Ie(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new se}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new Dt(Ie(t),s.status,t.weak_password.reasons);throw new er(Ie(t),s.status||500,r)}var Fo=(s,e,t,r)=>{let i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function U(s,e,t,r){var i;let n=Object.assign({},r?.headers);n[At]||(n[At]=p0["2024-01-01"].name),r?.jwt&&(n.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await So(s,e,t+a,{headers:n,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function So(s,e,t,r,i,n){let o=Fo(e,r,i,n),a;try{a=await s(t,Object.assign({},o))}catch(c){throw console.error(c),new Ze(Ie(c),0)}if(a.ok||await Ys(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await Ys(c)}}function ue(s){var e;let t=null;To(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=zs(s.expires_in)));let r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function m0(s){let e=ue(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function he(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Zs(s){return{data:s,error:null}}function ei(s){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n}=s,o=Do(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function ti(s){return s}function To(s){return s.access_token&&s.refresh_token&&s.expires_in}var ar=["global","local","others"];var Ro=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t},je=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=ir(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ar[0]){if(ar.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ar.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:he})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:t}=e,r=Ro(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ei,redirectTo:t?.redirectTo})}catch(t){if(q(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:he})}catch(t){if(q(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,n,o,a,c;try{let h={nextPage:null,lastPage:0,total:0},l=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:ti});if(l.error)throw l.error;let d=await l.json(),u=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);h[`${g}Page`]=m}),h.total=parseInt(u)),{data:Object.assign(Object.assign({},d),h),error:null}}catch(h){if(q(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Oe(e);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:he})}catch(t){if(q(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Oe(e);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:he})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Oe(e);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:he})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Oe(e.userId);try{let{data:t,error:r}=await U(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(q(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Oe(e.userId),Oe(e.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}}};function y0(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function ri(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var $e={debug:!!(globalThis&&sr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Ft=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},cr=class extends Ft{};async function b0(s,e,t){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw $e.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new cr(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if($e.debug)try{let n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ri();var Po={url:Fs,storageKey:Ss,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ts,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function si(s,e,t){return await t()}var et={},qe=class s{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=s.nextInstanceID,s.nextInstanceID+=1,this.instanceID>0&&ie()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},Po),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new je({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ir(i.fetch),this.lock=i.lock||si,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ie()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=b0:this.lock=si,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:sr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=y0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=y0(this.memoryStorage)),ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=et[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){et[this.storageKey]=Object.assign(Object.assign({},et[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=et[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){et[this.storageKey]=Object.assign(Object.assign({},et[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t=Ws(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ie()&&this.detectSessionInUrl&&r!=="none"){let{data:i,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),js(n)){let c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}let{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return q(t)?{error:t}:{error:new Ye("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{let n=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ue}),{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};let c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,i;try{let n;if("email"in e){let{email:l,password:d,options:u}=e,x=null,p=null;this.flowType==="pkce"&&([x,p]=await Pe(this.storage,this.storageKey)),n=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u?.emailRedirectTo,body:{email:l,password:d,data:(t=u?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:x,code_challenge_method:p},xform:ue})}else if("phone"in e){let{phone:l,password:d,options:u}=e;n=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:d,data:(r=u?.data)!==null&&r!==void 0?r:{},channel:(i=u?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ue})}else throw new ke("You must provide either an email or phone number and a password");let{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};let c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){let{email:n,password:o,options:a}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:m0})}else if("phone"in e){let{phone:n,password:o,options:a}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:m0})}else throw new ke("You must provide either an email or phone number and a password");let{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new De}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,n,o,a,c,h,l,d,u,x;let p,m;if("message"in e)p=e.message,m=e.signature;else{let{chain:g,wallet:f,statement:v,options:_}=e,y;if(ie())if(typeof f=="object")y=f;else{let b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))y=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=f}let w=new URL((t=_?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in y&&y.signIn){let b=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),v?{statement:v}:null)),B;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")B=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)B=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)p=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),m=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${w.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(r=_?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((n=_?.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((h=_?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(l=_?.signInWithSolana)===null||l===void 0?void 0:l.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);let b=await y.signMessage(new TextEncoder().encode(p),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=b}}try{let{data:g,error:f}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Ns(m)},!((u=e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ue});if(f)throw f;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new De}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:f})}catch(g){if(q(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){let t=await _e(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{let{data:n,error:o}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ue});if(await de(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new De}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:o})}catch(n){if(q(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{let{options:t,provider:r,token:i,access_token:n,nonce:o}=e,a=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ue}),{data:c,error:h}=a;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new De}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,n,o;try{if("email"in e){let{email:a,options:c}=e,h=null,l=null;this.flowType==="pkce"&&([h,l]=await Pe(this.storage,this.storageKey));let{error:d}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:h,code_challenge_method:l},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){let{phone:a,options:c}=e,{data:h,error:l}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:l}}throw new ke("You must provide either an email or phone number.")}catch(a){if(q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,n;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:ue});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");let c=o.session,h=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await Pe(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:Zs})}catch(n){if(q(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new se;let{error:i}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:i,options:n}=e,{error:o}=await U(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n?.captchaToken}},redirectTo:n?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){let{phone:r,type:i,options:n}=e,{data:o,error:a}=await U(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new ke("You must provide either an email or phone number and a type")}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){let i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=await _e(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at*1e3-Date.now()<Zt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){let o=await _e(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=or()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,l)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,l))})}return{data:{session:e},error:null}}let{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:he}):await this._useSession(async t=>{var r,i,n;let{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new se}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:he})})}catch(t){if(q(t))return Is(t)&&(await this._removeSession(),await de(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:i,error:n}=r;if(n)throw n;if(!i.session)throw new se;let o=i.session,a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Pe(this.storage,this.storageKey));let{data:h,error:l}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:he});if(l)throw l;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new se;let t=Date.now()/1e3,r=t,i=!0,n=null,{payload:o}=nr(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){let{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};n=a}else{let{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(q(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new se;let{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ie())throw new Fe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Bt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bt("No code detected.");let{data:v,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;let y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:v.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:i,access_token:n,refresh_token:o,expires_in:a,expires_at:c,token_type:h}=e;if(!n||!a||!o||!h)throw new Fe("No session defined in URL");let l=Math.round(Date.now()/1e3),d=parseInt(a),u=l+d;c&&(u=parseInt(c));let x=u-l;x*1e3<=Be&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${d}s`);let p=u-d;l-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,l):l-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,l);let{data:m,error:g}=await this._getUser(n);if(g)throw g;let f={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:d,expires_at:u,refresh_token:o,token_type:h,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await _e(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:i,error:n}=t;if(n)return{error:n};let o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){let{error:a}=await this.admin.signOut(o,e);if(a&&!(Os(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await de(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t=Ms(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{let{data:{session:n},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Pe(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(q(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{let{data:r,error:i}=await this._useSession(async n=>{var o,a,c,h,l;let{data:d,error:u}=n;if(u)throw u;let x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",x,{headers:this.headers,jwt:(l=(h=d.session)===null||h===void 0?void 0:h.access_token)!==null&&l!==void 0?l:void 0})});if(i)throw i;return ie()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;let{data:n,error:o}=t;if(o)throw o;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(q(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let r=Date.now();return await Js(async i=>(i>0&&await Gs(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ue})),(i,n)=>{let o=200*Math.pow(2,i);return n&&tr(n)&&Date.now()+o-r<Be})}catch(r){if(this._debug(t,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ie()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await _e(this.storage,this.storageKey);if(i&&this.userStorage){let o=await _e(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Re(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:or()}else if(i&&!i.user&&!i.user){let o=await _e(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await de(this.storage,this.storageKey+"-user"),await Re(this.storage,this.storageKey,i)):i.user=or()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}let n=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Zt;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Zt}s`),n){if(this.autoRefreshToken&&i.refresh_token){let{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),tr(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{let{data:o,error:a}=await this._getUser(i.access_token);!a&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new se;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new kt;let{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new se;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);let a={session:n.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(n){if(this._debug(i,"error",n),q(n)){let o={session:null,error:n};return tr(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let n=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let a=0;a<n.length;a+=1)console.error(n[a]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Re(this.userStorage,this.storageKey+"-user",{user:t.user});let i=Object.assign({},t);delete i.user;let n=_0(i);await Re(this.storage,this.storageKey,n)}else{let i=_0(t);await Re(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await de(this.storage,this.storageKey),await de(this.storage,this.storageKey+"-code-verifier"),await de(this.storage,this.storageKey+"-user"),this.userStorage&&await de(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ie()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Be);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((r.expires_at*1e3-e)/Be);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Be}ms, refresh threshold is ${Yt} ticks`),i<=Yt&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ft)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ie()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[n,o]=await Pe(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r?.queryParams){let n=new URLSearchParams(r.queryParams);i.push(n.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:i,error:n}=t;return n?{data:null,error:n}:await U(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(q(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;let{data:n,error:o}=t;if(o)return{data:null,error:o};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await U(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(q(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:n}=t;if(n)return{data:null,error:n};let{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(q(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:n}=t;return n?{data:null,error:n}:await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(q(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let r=e?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;let{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:o}=nr(i.access_token),a=null;o.aal&&(a=o.aal);let c=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let l=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:l},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;let i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Ps>i)return r;let{data:n,error:o}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=i,r=n.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){let{data:x,error:p}=await this.getSession();if(p||!x.session)return{data:null,error:p};r=x.session.access_token}let{header:i,payload:n,signature:o,raw:{header:a,payload:c}}=nr(r);t?.allowExpired||Xs(n.exp);let h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!h){let{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:n,header:i,signature:o},error:null}}let l=Qs(i.alg),d=await crypto.subtle.importKey("jwk",h,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,Hs(`${a}.${c}`)))throw new Se("Invalid JWT signature");return{data:{claims:n,header:i,signature:o},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}};qe.nextInstanceID=0;var Oo=qe,w0=Oo;var lr=class extends w0{constructor(e){super(e)}};var Io=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(l){try{h(r.next(l))}catch(d){o(d)}}function c(l){try{h(r.throw(l))}catch(d){o(d)}}function h(l){l.done?n(l.value):i(l.value).then(a,c)}h((r=r.apply(s,e||[])).next())})},St=class{constructor(e,t,r){var i,n,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let a=Ds(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let h=`sb-${c.hostname.split(".")[0]}-auth-token`,l={db:Es,realtime:Cs,auth:Object.assign(Object.assign({},As),{storageKey:h}),global:ws},d=ks(r??{},l);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=d.global.headers)!==null&&n!==void 0?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(u,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Bs(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new os(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new ht(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new wt(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Io(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:n,flowType:o,lock:a,debug:c},h,l){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),h),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:c,fetch:l,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Je(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var ii=(s,e,t)=>new St(s,e,t);var k0=W0(xn());(window.location.hostname.includes("localhost")||window.location.hostname.includes("vega"))&&(window.addEventListener("message",s=>{if(s.source===window&&s.data?.type==="VEGA_AUTH"){let e={access_token:s.data.access_token,user_id:s.data.user_id};chrome.runtime.sendMessage({type:"SET_USER_TOKEN",access_token:e.access_token,user_id:e.user_id},()=>{})}}),console.log("\u{1F442} Aguardando VEGA_AUTH via window.postMessage..."));var Jr=null,Le=null;async function jo(s=5e3){return new Promise((e,t)=>{let i=s/500,n=0,o=()=>{chrome.runtime.sendMessage({type:"GET_USER_TOKEN"},a=>{a?.access_token&&a?.user_id?(console.log("\u{1F510} Credenciais recuperadas com sucesso:",a),e(a)):(n++,console.warn("\u{1F552} Aguardando token no background... tentativa",n),n>=i?t("\u274C Token/user_id ausentes ap\xF3s aguardo."):setTimeout(o,500))})};o()})}var Rt=[],F0="https://rgkvzoeanbkbeqjbntdq.supabase.co",S0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJna3Z6b2VhbmJrYmVxamJudGRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5MDczMjEsImV4cCI6MjA2NjQ4MzMyMX0.Qhy9GQOJD0wLSBmGLdS6QGxvERfST2FYqCDBo-F1njk";window.location.href.includes("https://experiencia.xpi.com.br/conta-corrente/extrato/#/")&&(async()=>{console.log("\u{1F50E} Buscando saldo na tela da conta...");function s(){return new Promise((e,t)=>{let i=0,n=setInterval(()=>{let a=[...document.querySelectorAll("span")].find(l=>l.textContent?.trim().startsWith("R$")&&l.getAttribute("style")?.includes("font-weight: 500"));if(!a){i++,i>=20&&(clearInterval(n),t("\u274C Span com saldo n\xE3o encontrado."));return}let c=a.textContent.match(/R\$\s*([\d\.]+,\d{2})/);if(!c){i++,i>=20&&(clearInterval(n),t("\u274C Valor num\xE9rico de saldo n\xE3o p\xF4de ser extra\xEDdo."));return}clearInterval(n);let h=parseFloat(c[1].replace(/\./g,"").replace(",","."));console.log("\u{1F4B0} Saldo identificado via span direto:",h),e(h)},500)})}try{let e=await s();console.log("\u{1F4B0} Saldo capturado com sucesso:",e),localStorage.setItem("saldoXP",e),window.location.href="https://experiencia.xpi.com.br/renda-fixa/#/emissao-bancaria?offertoken=true"}catch(e){console.error(e)}})();function $o(s){return s<=180?.225:s>180&&s<=360?.2:s>360&&s<=720?.175:.15}function Ot(s){let e=new PointerEvent("pointerdown",{bubbles:!0,composed:!0,pointerType:"mouse"}),t=new PointerEvent("pointerup",{bubbles:!0,composed:!0,pointerType:"mouse"}),r=new PointerEvent("click",{bubbles:!0,composed:!0,pointerType:"mouse"});s.dispatchEvent(e),s.dispatchEvent(t),s.dispatchEvent(r)}function qo(s){let e=s.toUpperCase();return e.includes("IPCA")?"ipca":e.includes("CDI")?"cdi":"pre_fixado"}function Lo(s){let e=s.match(/([0-9]+[,\.]?[0-9]*)/);return e?parseFloat(e[1].replace(",",".")):null}function Uo(s){return parseFloat(s.replace(/[R$\s\.]/g,"").replace(",","."))||1e3}function C0(s){let e=new Date,r=new Date(s)-e;return Math.ceil(r/(1e3*60*60*24))}function B0(s,e){let t=$o(e),r=s/(1-t);return parseFloat(r.toFixed(2))}function Ho(s){if(!s||!s.includes("/"))return null;let[e,t,r]=s.split("/");return!e||!t||!r?null:`${r}-${t.padStart(2,"0")}-${e.padStart(2,"0")}`}function D0(s){let e=s.toUpperCase();return e.includes("LCA")||e.includes("LCI")||e.includes("LCD")}var No={ate_5k:s=>s<=5e3,ate_10k:s=>s<=1e4,ate_50k:s=>s<=5e4,acima_50k:s=>s>5e4},zo={indexador:{pre_fixado:"Pr\xE9-fixado",ipca:"Infla\xE7\xE3o",cdi:"P\xF3s-fixado (CDI)"},liquidez:{no_venc:"No Vencimento",diaria:"Di\xE1ria",carencia:"Com Car\xEAncia"},outros:{garantia_fgc:"Prote\xE7\xE3o FGC",isento_ir:"Isento de IR",oferta_primaria:"Oferta prim\xE1ria",investidor_qualificado:"Investidor qualificado",investidor_profissional:"Investidor profissional",publico_geral:"P\xFAblico geral"},vencimento:{ate_6_meses:"De 1 m\xEAs a 6 meses",ate_1_ano:"De 6 meses a 12 meses",ate_2_anos:"de 1 ano a 2 anos",ate_3_anos:"de 2 anos a 3 anos",ate_5_anos:"de 3 anos a 5 anos",acima_5_anos:"Acima de 5 anos"},aplicacao_minima:{ate_5k:"At\xE9 R$ 5.000",ate_10k:"At\xE9 10.000",ate_50k:"At\xE9 R$ 50.000",acima_50k:"Acima de R$ 50.000"}};async function Pt(s,e=2e3,t=!0){let i=e/500,n=0;return new Promise((o,a)=>{let c=()=>{let h;t?h=document.evaluate(s,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue:h=document.querySelector(s),h?o(h):++n>i?a("Elemento n\xE3o encontrado: "+s):setTimeout(c,500)};c()})}async function Mo(s,e){try{let t="Digite a quantidade que deseja investir";console.log("\u{1F552} Aguardando campo de quantidade aparecer..."),await Pt(`soma-text-field[label="${t}"]`,7e3,!1);let r=[...document.querySelectorAll("soma-text-field")].find(a=>a.getAttribute("label")===t);if(!r)throw new Error(`Campo soma-text-field com label "${t}" n\xE3o encontrado.`);let i=10;for(;!r.shadowRoot&&i-- >0;)console.log("\u23F3 Aguardando shadowRoot do campo de quantidade..."),await new Promise(a=>setTimeout(a,300));let n=r.shadowRoot?.querySelector("input[type='number']");if(!n)throw new Error("Input do tipo number n\xE3o localizado no shadowRoot.");let o=Math.floor(s/e);return n.value=o,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),await new Promise(a=>setTimeout(a,100)),console.log("\u{1F4E6} Quantidade preenchida:",o),!0}catch(t){return console.error("\u274C Erro ao preencher campo de quantidade:",t?.message||t),!1}}async function Wo(s=5e3){let t=s/500,r=0;for(;r<t;){let n=document.querySelectorAll("soma-description")[1];if(n&&/Saldo disponvel/i.test(n.textContent||"")){let o=n.textContent.match(/R\$\s*([\d\.]+,\d{2})/);if(o){let a=parseFloat(o[1].replace(/\./g,"").replace(",","."));return console.log("\u{1F4B0} Saldo detectado:",a),a}}r++,await new Promise(o=>setTimeout(o,500))}return console.error("\u274C Timeout ao ler saldo dispon\xEDvel."),0}async function Ko(){try{await Pt("soma-checkbox",2e3,!1);let e=[...document.querySelectorAll("soma-checkbox")].find(i=>i.getAttribute("label")?.toLowerCase().includes("ciente dos riscos"));if(!e)return!1;let r=e.shadowRoot?.querySelector("input[type='checkbox']");return r?(r.checked||(r.checked=!0,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}))),!0):!1}catch(s){return console.error("\u274C Erro ao marcar checkbox:",s?.message||s),!1}}async function Go(){try{let r=0,i=null;for(;r++<14;){let n=[...document.querySelectorAll("soma-button")].find(o=>o.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"));if(n&&n.shadowRoot&&(i=n.shadowRoot.querySelector("button:not([disabled])"),i))break;await new Promise(o=>setTimeout(o,500))}return i?(Ot(i),console.log("\u2705 Clique no bot\xE3o 'Avan\xE7ar etapa' realizado com sucesso."),!0):(console.warn("\u26A0\uFE0F Bot\xE3o 'Avan\xE7ar etapa' n\xE3o encontrado ou continua desabilitado."),!1)}catch(s){return console.error("\u274C Erro ao clicar no bot\xE3o 'Avan\xE7ar etapa':",s?.message||s),!1}}async function Jo(s){let e={pre_fixado:"Pr\xE9-fixado",ipca:"Infla\xE7\xE3o",cdi:"P\xF3s-fixado (CDI)"},t=e[s],r=Object.values(e);for(let i of r){let n=`//soma-chip[contains(., '${i}')]`,o=document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!o){console.warn(`\u26A0\uFE0F Chip '${i}' n\xE3o encontrado na tela.`);continue}let a=o.getAttribute("selected")==="true";i!==t&&a&&(o.click(),console.log(`\u{1F504} Filtro removido: ${i}`),await new Promise(c=>setTimeout(c,300))),i===t&&!a&&(o.click(),console.log(`\u2705 Filtro aplicado: ${i}`),await new Promise(c=>setTimeout(c,300)))}await new Promise(i=>setTimeout(i,1500))}async function Vo(){console.log("\u{1F53D} Iniciando rolagem autom\xE1tica da tabela para carregar todos os ativos...");let s=document.querySelector("soma-table-body")?.parentElement;if(!s){console.warn("\u26A0\uFE0F Container da tabela de ativos n\xE3o encontrado.");return}let e=-1,t=0;for(;t<30;){s.scrollBy(0,500),await new Promise(i=>setTimeout(i,300));let r=s.scrollTop;if(r===e){console.log("\u2705 Final da tabela atingido.");break}e=r,t++}}async function Xo(){let s=[...document.querySelectorAll("soma-checkbox")].find(i=>i.getAttribute("label")?.toLowerCase().includes("declaro que li"));if(!s)return console.warn("\u274C Checkbox com label 'declaro que li' n\xE3o encontrado."),!1;let e=5;for(;!s.shadowRoot&&e-- >0;)await new Promise(i=>setTimeout(i,300));let t=s.shadowRoot?.querySelector("input[type='checkbox']");if(!t)return console.warn("\u274C Input checkbox n\xE3o encontrado no shadowRoot."),!1;Ot(t),console.log("\u2705 Clique real no checkbox disparado.");let r=null;for(e=20;e-- >0;){let n=[...document.querySelectorAll("soma-button")].find(o=>o.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"))?.shadowRoot?.querySelector("button");if(n&&!n.disabled){r=n;break}await new Promise(o=>setTimeout(o,500))}return r?(Ot(r),console.log("\u2705 Bot\xE3o 'Avan\xE7ar etapa' clicado com sucesso ap\xF3s o checkbox."),!0):(console.warn("\u274C Bot\xE3o 'Avan\xE7ar etapa' n\xE3o habilitado ap\xF3s marcar checkbox."),!1)}async function Qo(s){let e=s.split("");console.log("\u{1F510} Iniciando digita\xE7\xE3o da assinatura eletr\xF4nica...");let t=10,r=null;for(;t-- >0&&(r=document.querySelector("soma-input-bank-password"),!r?.shadowRoot);)await new Promise(n=>setTimeout(n,500));if(!r?.shadowRoot)return console.error("\u274C Teclado num\xE9rico da senha eletr\xF4nica n\xE3o apareceu."),!1;let i=[...r.shadowRoot.querySelectorAll("button")];if(!i.length)return console.error("\u274C Nenhum bot\xE3o encontrado no teclado."),!1;for(let n of e){let o=i.find(a=>a.textContent?.includes(n));if(!o)return console.error(`\u274C D\xEDgito '${n}' n\xE3o encontrado entre os bot\xF5es.`),!1;Ot(o),console.log(`\u2705 D\xEDgito '${n}' clicado.`),await new Promise(a=>setTimeout(a,250))}return!0}jo().then(s=>{Jr=s.access_token,Le=s.user_id;let e=ii(F0,S0,{global:{headers:{Authorization:`Bearer ${Jr}`}}});Yo(e)}).catch(s=>{console.error(s)});async function Yo(s){try{if(window.location.href.includes("experiencia.xpi.com.br/renda-fixa")){let h=function(u){return c.length===0?!0:c.some(x=>No[x]?.(u))},{data:e,error:t}=await s.from("filtros").select("*").eq("user_id",Le).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(t||!e){console.error("\u274C Erro ao buscar filtros do Supabase:",t);return}let r={...e.selecionados,assinatura:e.assinatura||"",limite_compra:e.limite_compra||0,ordem_classe:Array.isArray(e.ordem_classe)?e.ordem_classe:[],taxa_minima:e.taxa_minima||{cdi:0,ipca:0,pre_fixado:0}};try{if(e.assinatura&&Le){let x=k0.default.AES.decrypt(e.assinatura,Le).toString(k0.default.enc.Utf8);x?(r.assinatura=x,console.log("\u{1F510} Assinatura descriptografada e atribu\xEDda aos filtros.")):console.warn("\u26A0\uFE0F Assinatura inv\xE1lida ou chave incorreta.")}else console.warn("\u26A0\uFE0F Campo de assinatura ou user_id ausente.")}catch(u){console.error("\u274C Erro ao descriptografar assinatura:",u)}console.log("\u2705 Filtros carregados:",r);try{console.log("\u{1F552} Aguardando bot\xE3o 'Filtrar' aparecer na tela...");let u=await Pt("//soma-chip[contains(., 'Filtrar')]",7e3);if(!u){console.error("\u274C Bot\xE3o 'Filtrar' n\xE3o encontrado ap\xF3s aguardo.");return}u.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(x=>setTimeout(x,300)),u.click(),console.log("\u2705 Bot\xE3o 'Filtrar' clicado com sucesso."),await new Promise(x=>setTimeout(x,1e3))}catch(u){console.error("\u274C Erro ao localizar ou clicar no bot\xE3o 'Filtrar':",u);return}try{console.log("\u{1F3AF} Iniciando aplica\xE7\xE3o de filtros visuais...");for(let u in r){if(["assinatura","limite_compra","ordem_classe","taxa_minima"].includes(u))continue;let x=r[u];for(let p of x){let m=zo[u.toLowerCase()]?.[p];if(!m){console.warn(`\u26A0\uFE0F Label n\xE3o encontrado no mapa para grupo '${u}', valor '${p}'`);continue}let g=`//soma-chip[contains(., '${m}')]`,f=document.evaluate(g,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;f?(f.click(),console.log(`\u2705 Filtro aplicado: [${u}] \u2192 ${m}`)):console.warn(`\u26A0\uFE0F soma-chip '${m}' n\xE3o encontrado na tela.`),await new Promise(v=>setTimeout(v,300))}}console.log("\u2705 Filtros visuais aplicados com sucesso.")}catch(u){console.error("\u274C Erro ao aplicar filtros visuais:",u)}let i=r.assinatura,n=r.limite_compra,o=r.ordem_classe,a=r.taxa_minima||{cdi:0,ipca:0,pre_fixado:0},c=r.aplicacao_minima||[];Array.isArray(o)||(o=["cdi","ipca","pre_fixado"]);try{console.log("\u{1F552} Aguardando carregamento da tabela de ativos..."),await Pt("soma-table-body soma-table-row",5e3,!1),await Vo()}catch(u){console.error("\u274C Erro ao aguardar a tabela de ativos:",u);return}let d=parseFloat(localStorage.getItem("saldoXP")||"0")||await Wo();console.log("\u{1F4B0} Saldo total carregado para compara\xE7\xE3o:",d);for(let u of o){await Jo(u);try{await Pt("soma-table-body soma-table-row",5e3,!1),await new Promise(g=>setTimeout(g,500)),console.log(`\u2705 Tabela de ativos carregada para classe: ${u}`)}catch(g){console.error(`\u274C Erro ao carregar tabela da classe ${u}:`,g);continue}let x=document.querySelectorAll("soma-table-body soma-table-row"),p=[];for(let[g,f]of[...x].entries()){let v=f.querySelectorAll("soma-table-cell");if(v.length<10)return;let _=v[2]?.textContent?.trim()||"",y=v[8]?.textContent?.trim()||"",b=f.querySelector("soma-button[aria-label='Investir']")?.shadowRoot?.querySelector("button"),B=qo(_),A=Lo(_),R=_.trim(),P=Uo(y),E=v[1]?.textContent?.trim()||"",D=Ho(E),O=v[0]?.textContent?.trim()||"Ativo sem nome";if(B===u&&A&&b){let F=O.includes("LCA")||O.includes("LCI")||O.includes("LCD");p.push({nome:O,tipo:B,taxa:A,taxaTexto:R,valorMinimo:P,vencimentoStr:D,botao:b,isento:F}),console.log(`\u2705 Ativo detectado: ${O}, Tipo: ${B}, Taxa: ${A}, Min: ${P}, Venc: ${D}, Isento: ${F}`)}}if(p.length>0){let g=(b,B)=>{if(b.length===0)return null;let A=b.map(P=>{let E=P.taxaTexto.toUpperCase();if(B==="IPCA"){let D=E.match(/IPCA\s*\+?\s*([\d,\.]+)/);return D?parseFloat(D[1].replace(",",".")):null}else if(B==="CDI"){if(E.includes("CDI +")){let D=E.match(/CDI\s*\+\s*([\d,\.]+)/);return D?parseFloat(D[1].replace(",",".")):null}else if(E.includes("%")&&!E.includes("+")){let D=E.match(/([\d,\.]+)\s*%/);return D?parseFloat(D[1].replace(",",".")):null}}else{let D=E.match(/([\d,\.]+)\s*%/);return D?parseFloat(D[1].replace(",",".")):null}return null}).filter(P=>typeof P=="number");if(A.length===0)return null;let R=A.reduce((P,E)=>P+E,0)/A.length;return B==="IPCA"?`IPCA + ${R.toFixed(2)}%`:B==="CDI"&&b[0].taxaTexto.includes("+")?`CDI + ${R.toFixed(2)}%`:B==="CDI"?`${R.toFixed(0)}% do CDI`:`${R.toFixed(2)}%`},f=p.filter(b=>b.isento),v=p.filter(b=>!b.isento),_=g(f,u.toUpperCase()),y=g(v,u.toUpperCase()),w=[];_&&(console.log("\u{1F50D} M\xE9dia ISENTOS calculada:",_),w.push({user_id:Le,data_referencia:new Date().toISOString().split("T")[0],indexador:u.toUpperCase(),taxa_media:_,isento_imposto:!0})),y&&(console.log("\u{1F50D} M\xE9dia TRIBUTADOS calculada:",y),w.push({user_id:Le,data_referencia:new Date().toISOString().split("T")[0],indexador:u.toUpperCase(),taxa_media:y,isento_imposto:!1}));for(let b of w)console.log("\u{1F4E9} Enviando taxa m\xE9dia para o Supabase:",b),await fetch(`${F0}/rest/v1/taxas_media_xp`,{method:"POST",headers:{"Content-Type":"application/json",apikey:S0,Authorization:`Bearer ${Jr}`},body:JSON.stringify(b)})}let m=p.filter(g=>g.valorMinimo<=d).sort((g,f)=>{let v=C0(g.vencimentoStr),_=C0(f.vencimentoStr),y=D0(g.nome)?B0(g.taxa,v):g.taxa;return(D0(f.nome)?B0(f.taxa,_):f.taxa)-y});for(let g of m){let f=D0(g.nome),v=C0(g.vencimentoStr),_=f?B0(g.taxa,v):g.taxa;if(console.log(`\u{1F4CA} Comparando ativo '${g.nome}' (${u}): ${g.taxa}% ${f?"(isento IR)":""} \u2192 ${_}% (m\xEDnima: ${a[u]}%)`),_<a[u]||!h(g.valorMinimo))continue;if(g.botao.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(A=>setTimeout(A,100)),Ot(g.botao),console.log("\u2705 Clique no bot\xE3o 'Investir' efetuado."),await new Promise(A=>setTimeout(A,600)),g.valorMinimo>d){console.warn(`\u26D4 Saldo insuficiente: m\xEDnimo R$${g.valorMinimo} > saldo R$${d}`);continue}let y=Math.min(d,n),w=Math.max(g.valorMinimo,y);if(!await Mo(w,g.valorMinimo))continue;await Ko(),await Go(),await new Promise(A=>setTimeout(A,500)),await Xo();let B=await Qo(i)||!0;Rt.push({ativo:g.nome,classe:u.toUpperCase(),taxaInformada:g.taxa.toFixed(2)+"%",taxaEfetiva:_.toFixed(2)+"%"+(f?" (isento IR)":""),valorMinimo:"R$ "+g.valorMinimo.toLocaleString("pt-BR",{minimumFractionDigits:2}),valorComprado:"R$ "+w.toLocaleString("pt-BR",{minimumFractionDigits:2}),vencimentoISO:g.vencimentoStr,vencimentoBR:(()=>{let[A,R,P]=g.vencimentoStr.split("-");return`${P}/${R}/${A}`})(),horarioCompra:new Date().toLocaleString("pt-BR")}),console.log("\u{1F4DD} Ativo registrado no logCompras:",Rt[Rt.length-1]),await new Promise(A=>setTimeout(A,1e3));break}}}if(Rt.length>0){console.log("\u{1F680} Enviando dados para Supabase...");let e=await fetch(`${F0}/rest/v1/ativos_comprados`,{method:"POST",headers:{apikey:S0,Authorization:`Bearer ${Jr}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(Rt.map(t=>({user_id:Le,nome_ativo:t.ativo,indexador:t.classe.toLowerCase(),data_hora_compra:new Date().toISOString(),taxa_contratada:t.taxaInformada,taxa_grossup:t.taxaEfetiva,valor_minimo:parseFloat(t.valorMinimo.replace(/[R$\.\s]/g,"").replace(",",".")),valor_aplicado:Number(t.valorComprado?.toString().replace("R$","").replace(/\./g,"").replace(",",".").trim()),vencimento:t.vencimentoISO??null})))});e.ok?console.log("\u2705 Compras registradas no Supabase com sucesso!"):console.error("\u274C Erro ao salvar no Supabase:",await e.text())}}catch(e){console.error("Erro no script:",e)}}})();
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cdric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)
*/
