(()=>{var Fn=Object.create;var qt=Object.defineProperty;var Sn=Object.getOwnPropertyDescriptor;var Tn=Object.getOwnPropertyNames;var Rn=Object.getPrototypeOf,Pn=Object.prototype.hasOwnProperty;var z0=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var On=(s,e)=>()=>(s&&(e=s(s=0)),e);var L=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),In=(s,e)=>{for(var t in e)qt(s,t,{get:e[t],enumerable:!0})},M0=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Tn(e))!Pn.call(s,i)&&i!==t&&qt(s,i,{get:()=>e[i],enumerable:!(r=Sn(e,i))||r.enumerable});return s};var W0=(s,e,t)=>(t=s!=null?Fn(Rn(s)):{},M0(e||!s||!s.__esModule?qt(t,"default",{value:s,enumerable:!0}):t,s)),jn=s=>M0(qt({},"__esModule",{value:!0}),s);var Ee={};In(Ee,{Headers:()=>Zr,Request:()=>Ln,Response:()=>Un,default:()=>Yr,fetch:()=>qn});var $n,Me,qn,Yr,Zr,Ln,Un,ge=On(()=>{"use strict";$n=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Me=$n(),qn=Me.fetch,Yr=Me.fetch.bind(Me),Zr=Me.Headers,Ln=Me.Request,Un=Me.Response});var r0=L(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});var e0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};t0.default=e0});var i0=L(ft=>{"use strict";var G0=ft&&ft.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ft,"__esModule",{value:!0});var Nn=G0((ge(),jn(Ee))),zn=G0(r0()),s0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var a,o,c;let u=null,l=null,h=null,d=n.status,x=n.statusText;if(n.ok){if(this.method!=="HEAD"){let f=await n.text();f===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?l=f:l=JSON.parse(f))}let g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(o=n.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(l)&&(l.length>1?(u={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,h=null,d=406,x="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{let g=await n.text();try{u=JSON.parse(g),Array.isArray(u)&&n.status===404&&(l=[],u=null,d=200,x="OK")}catch{n.status===404&&g===""?(d=204,x="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((c=u?.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,d=200,x="OK"),u&&this.shouldThrowOnError)throw new zn.default(u)}return{error:u,data:l,count:h,status:d,statusText:x}});return this.shouldThrowOnError||(i=i.catch(n=>{var a,o,c;return{error:{message:`${(a=n?.name)!==null&&a!==void 0?a:"FetchError"}: ${n?.message}`,details:`${(o=n?.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=n?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};ft.default=s0});var o0=L(xt=>{"use strict";var Mn=xt&&xt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xt,"__esModule",{value:!0});var Wn=Mn(i0()),n0=class extends Wn.default{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:n=i}={}){let a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let n=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:n=!1,format:a="text"}={}){var o;let c=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};xt.default=n0});var Ht=L(vt=>{"use strict";var Kn=vt&&vt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(vt,"__esModule",{value:!0});var Gn=Kn(o0()),a0=class extends Gn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");let a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};vt.default=a0});var l0=L(gt=>{"use strict";var Jn=gt&&gt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(gt,"__esModule",{value:!0});var pt=Jn(Ht()),c0=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){let i=t?"HEAD":"GET",n=!1,a=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new pt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){let a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){let o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new pt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:n=!0}={}){let a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){let c=e.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(c.length>0){let u=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",u.join(","))}}return new pt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new pt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new pt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};gt.default=c0});var J0=L(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.version=void 0;Nt.version="0.0.0-automated"});var V0=L(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.DEFAULT_HEADERS=void 0;var Vn=J0();zt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Vn.version}`}});var Q0=L(_t=>{"use strict";var X0=_t&&_t.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_t,"__esModule",{value:!0});var Xn=X0(l0()),Qn=X0(Ht()),Yn=V0(),u0=class s{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Yn.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new Xn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:n}={}){let a,o=new URL(`${this.url}/rpc/${e}`),c;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([l,h])=>h!==void 0).map(([l,h])=>[l,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([l,h])=>{o.searchParams.append(l,h)})):(a="POST",c=t);let u=Object.assign({},this.headers);return n&&(u.Prefer=`count=${n}`),new Qn.default({method:a,url:o,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_t.default=u0});var is=L(X=>{"use strict";var We=X&&X.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(X,"__esModule",{value:!0});X.PostgrestError=X.PostgrestBuilder=X.PostgrestTransformBuilder=X.PostgrestFilterBuilder=X.PostgrestQueryBuilder=X.PostgrestClient=void 0;var Y0=We(Q0());X.PostgrestClient=Y0.default;var Z0=We(l0());X.PostgrestQueryBuilder=Z0.default;var es=We(Ht());X.PostgrestFilterBuilder=es.default;var ts=We(o0());X.PostgrestTransformBuilder=ts.default;var rs=We(i0());X.PostgrestBuilder=rs.default;var ss=We(r0());X.PostgrestError=ss.default;X.default={PostgrestClient:Y0.default,PostgrestQueryBuilder:Z0.default,PostgrestFilterBuilder:es.default,PostgrestTransformBuilder:ts.default,PostgrestBuilder:rs.default,PostgrestError:ss.default}});var ni=L(()=>{});var z=L((ur,oi)=>{(function(s,e){typeof ur=="object"?oi.exports=ur=e():typeof define=="function"&&define.amd?define([],e):s.CryptoJS=e()})(ur,function(){var s=s||function(e,t){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof z0=="function")try{r=ni()}catch{}var i=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function f(){}return function(v){var _;return f.prototype=v,_=new f,f.prototype=null,_}}(),a={},o=a.lib={},c=o.Base=function(){return{extend:function(f){var v=n(this);return f&&v.mixIn(f),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var v in f)f.hasOwnProperty(v)&&(this[v]=f[v]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=o.WordArray=c.extend({init:function(f,v){f=this.words=f||[],v!=t?this.sigBytes=v:this.sigBytes=f.length*4},toString:function(f){return(f||h).stringify(this)},concat:function(f){var v=this.words,_=f.words,y=this.sigBytes,b=f.sigBytes;if(this.clamp(),y%4)for(var w=0;w<b;w++){var k=_[w>>>2]>>>24-w%4*8&255;v[y+w>>>2]|=k<<24-(y+w)%4*8}else for(var S=0;S<b;S+=4)v[y+S>>>2]=_[S>>>2];return this.sigBytes+=b,this},clamp:function(){var f=this.words,v=this.sigBytes;f[v>>>2]&=4294967295<<32-v%4*8,f.length=e.ceil(v/4)},clone:function(){var f=c.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var v=[],_=0;_<f;_+=4)v.push(i());return new u.init(v,f)}}),l=a.enc={},h=l.Hex={stringify:function(f){for(var v=f.words,_=f.sigBytes,y=[],b=0;b<_;b++){var w=v[b>>>2]>>>24-b%4*8&255;y.push((w>>>4).toString(16)),y.push((w&15).toString(16))}return y.join("")},parse:function(f){for(var v=f.length,_=[],y=0;y<v;y+=2)_[y>>>3]|=parseInt(f.substr(y,2),16)<<24-y%8*4;return new u.init(_,v/2)}},d=l.Latin1={stringify:function(f){for(var v=f.words,_=f.sigBytes,y=[],b=0;b<_;b++){var w=v[b>>>2]>>>24-b%4*8&255;y.push(String.fromCharCode(w))}return y.join("")},parse:function(f){for(var v=f.length,_=[],y=0;y<v;y++)_[y>>>2]|=(f.charCodeAt(y)&255)<<24-y%4*8;return new u.init(_,v)}},x=l.Utf8={stringify:function(f){try{return decodeURIComponent(escape(d.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return d.parse(unescape(encodeURIComponent(f)))}},p=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=x.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var v,_=this._data,y=_.words,b=_.sigBytes,w=this.blockSize,k=w*4,S=b/k;f?S=e.ceil(S):S=e.max((S|0)-this._minBufferSize,0);var R=S*w,O=e.min(R*4,b);if(R){for(var A=0;A<R;A+=w)this._doProcessBlock(y,A);v=y.splice(0,R),_.sigBytes-=O}return new u.init(v,O)},clone:function(){var f=c.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0}),g=o.Hasher=p.extend({cfg:c.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var v=this._doFinalize();return v},blockSize:512/32,_createHelper:function(f){return function(v,_){return new f.init(_).finalize(v)}},_createHmacHelper:function(f){return function(v,_){return new m.HMAC.init(f,_).finalize(v)}}}),m=a.algo={};return a}(Math);return s})});var Rt=L((hr,ai)=>{(function(s,e){typeof hr=="object"?ai.exports=hr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(hr,function(s){return function(e){var t=s,r=t.lib,i=r.Base,n=r.WordArray,a=t.x64={},o=a.Word=i.extend({init:function(u,l){this.high=u,this.low=l}}),c=a.WordArray=i.extend({init:function(u,l){u=this.words=u||[],l!=e?this.sigBytes=l:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,l=u.length,h=[],d=0;d<l;d++){var x=u[d];h.push(x.high),h.push(x.low)}return n.create(h,this.sigBytes)},clone:function(){for(var u=i.clone.call(this),l=u.words=this.words.slice(0),h=l.length,d=0;d<h;d++)l[d]=l[d].clone();return u}})}(),s})});var li=L((dr,ci)=>{(function(s,e){typeof dr=="object"?ci.exports=dr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(dr,function(s){return function(){if(typeof ArrayBuffer=="function"){var e=s,t=e.lib,r=t.WordArray,i=r.init,n=r.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var o=a.byteLength,c=[],u=0;u<o;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,o)}else i.apply(this,arguments)};n.prototype=r}}(),s.lib.WordArray})});var hi=L((fr,ui)=>{(function(s,e){typeof fr=="object"?ui.exports=fr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(fr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.enc,n=i.Utf16=i.Utf16BE={stringify:function(o){for(var c=o.words,u=o.sigBytes,l=[],h=0;h<u;h+=2){var d=c[h>>>2]>>>16-h%4*8&65535;l.push(String.fromCharCode(d))}return l.join("")},parse:function(o){for(var c=o.length,u=[],l=0;l<c;l++)u[l>>>1]|=o.charCodeAt(l)<<16-l%2*16;return r.create(u,c*2)}};i.Utf16LE={stringify:function(o){for(var c=o.words,u=o.sigBytes,l=[],h=0;h<u;h+=2){var d=a(c[h>>>2]>>>16-h%4*8&65535);l.push(String.fromCharCode(d))}return l.join("")},parse:function(o){for(var c=o.length,u=[],l=0;l<c;l++)u[l>>>1]|=a(o.charCodeAt(l)<<16-l%2*16);return r.create(u,c*2)}};function a(o){return o<<8&4278255360|o>>>8&16711935}}(),s.enc.Utf16})});var ye=L((xr,di)=>{(function(s,e){typeof xr=="object"?di.exports=xr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(xr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.enc,n=i.Base64={stringify:function(o){var c=o.words,u=o.sigBytes,l=this._map;o.clamp();for(var h=[],d=0;d<u;d+=3)for(var x=c[d>>>2]>>>24-d%4*8&255,p=c[d+1>>>2]>>>24-(d+1)%4*8&255,g=c[d+2>>>2]>>>24-(d+2)%4*8&255,m=x<<16|p<<8|g,f=0;f<4&&d+f*.75<u;f++)h.push(l.charAt(m>>>6*(3-f)&63));var v=l.charAt(64);if(v)for(;h.length%4;)h.push(v);return h.join("")},parse:function(o){var c=o.length,u=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var h=0;h<u.length;h++)l[u.charCodeAt(h)]=h}var d=u.charAt(64);if(d){var x=o.indexOf(d);x!==-1&&(c=x)}return a(o,c,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(o,c,u){for(var l=[],h=0,d=0;d<c;d++)if(d%4){var x=u[o.charCodeAt(d-1)]<<d%4*2,p=u[o.charCodeAt(d)]>>>6-d%4*2,g=x|p;l[h>>>2]|=g<<24-h%4*8,h++}return r.create(l,h)}}(),s.enc.Base64})});var xi=L((vr,fi)=>{(function(s,e){typeof vr=="object"?fi.exports=vr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(vr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.enc,n=i.Base64url={stringify:function(o,c){c===void 0&&(c=!0);var u=o.words,l=o.sigBytes,h=c?this._safe_map:this._map;o.clamp();for(var d=[],x=0;x<l;x+=3)for(var p=u[x>>>2]>>>24-x%4*8&255,g=u[x+1>>>2]>>>24-(x+1)%4*8&255,m=u[x+2>>>2]>>>24-(x+2)%4*8&255,f=p<<16|g<<8|m,v=0;v<4&&x+v*.75<l;v++)d.push(h.charAt(f>>>6*(3-v)&63));var _=h.charAt(64);if(_)for(;d.length%4;)d.push(_);return d.join("")},parse:function(o,c){c===void 0&&(c=!0);var u=o.length,l=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<l.length;d++)h[l.charCodeAt(d)]=d}var x=l.charAt(64);if(x){var p=o.indexOf(x);p!==-1&&(u=p)}return a(o,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(o,c,u){for(var l=[],h=0,d=0;d<c;d++)if(d%4){var x=u[o.charCodeAt(d-1)]<<d%4*2,p=u[o.charCodeAt(d)]>>>6-d%4*2,g=x|p;l[h>>>2]|=g<<24-h%4*8,h++}return r.create(l,h)}}(),s.enc.Base64url})});var be=L((pr,vi)=>{(function(s,e){typeof pr=="object"?vi.exports=pr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(pr,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,a=t.algo,o=[];(function(){for(var x=0;x<64;x++)o[x]=e.abs(e.sin(x+1))*4294967296|0})();var c=a.MD5=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,p){for(var g=0;g<16;g++){var m=p+g,f=x[m];x[m]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var v=this._hash.words,_=x[p+0],y=x[p+1],b=x[p+2],w=x[p+3],k=x[p+4],S=x[p+5],R=x[p+6],O=x[p+7],A=x[p+8],T=x[p+9],P=x[p+10],E=x[p+11],I=x[p+12],j=x[p+13],$=x[p+14],q=x[p+15],C=v[0],D=v[1],F=v[2],B=v[3];C=u(C,D,F,B,_,7,o[0]),B=u(B,C,D,F,y,12,o[1]),F=u(F,B,C,D,b,17,o[2]),D=u(D,F,B,C,w,22,o[3]),C=u(C,D,F,B,k,7,o[4]),B=u(B,C,D,F,S,12,o[5]),F=u(F,B,C,D,R,17,o[6]),D=u(D,F,B,C,O,22,o[7]),C=u(C,D,F,B,A,7,o[8]),B=u(B,C,D,F,T,12,o[9]),F=u(F,B,C,D,P,17,o[10]),D=u(D,F,B,C,E,22,o[11]),C=u(C,D,F,B,I,7,o[12]),B=u(B,C,D,F,j,12,o[13]),F=u(F,B,C,D,$,17,o[14]),D=u(D,F,B,C,q,22,o[15]),C=l(C,D,F,B,y,5,o[16]),B=l(B,C,D,F,R,9,o[17]),F=l(F,B,C,D,E,14,o[18]),D=l(D,F,B,C,_,20,o[19]),C=l(C,D,F,B,S,5,o[20]),B=l(B,C,D,F,P,9,o[21]),F=l(F,B,C,D,q,14,o[22]),D=l(D,F,B,C,k,20,o[23]),C=l(C,D,F,B,T,5,o[24]),B=l(B,C,D,F,$,9,o[25]),F=l(F,B,C,D,w,14,o[26]),D=l(D,F,B,C,A,20,o[27]),C=l(C,D,F,B,j,5,o[28]),B=l(B,C,D,F,b,9,o[29]),F=l(F,B,C,D,O,14,o[30]),D=l(D,F,B,C,I,20,o[31]),C=h(C,D,F,B,S,4,o[32]),B=h(B,C,D,F,A,11,o[33]),F=h(F,B,C,D,E,16,o[34]),D=h(D,F,B,C,$,23,o[35]),C=h(C,D,F,B,y,4,o[36]),B=h(B,C,D,F,k,11,o[37]),F=h(F,B,C,D,O,16,o[38]),D=h(D,F,B,C,P,23,o[39]),C=h(C,D,F,B,j,4,o[40]),B=h(B,C,D,F,_,11,o[41]),F=h(F,B,C,D,w,16,o[42]),D=h(D,F,B,C,R,23,o[43]),C=h(C,D,F,B,T,4,o[44]),B=h(B,C,D,F,I,11,o[45]),F=h(F,B,C,D,q,16,o[46]),D=h(D,F,B,C,b,23,o[47]),C=d(C,D,F,B,_,6,o[48]),B=d(B,C,D,F,O,10,o[49]),F=d(F,B,C,D,$,15,o[50]),D=d(D,F,B,C,S,21,o[51]),C=d(C,D,F,B,I,6,o[52]),B=d(B,C,D,F,w,10,o[53]),F=d(F,B,C,D,P,15,o[54]),D=d(D,F,B,C,y,21,o[55]),C=d(C,D,F,B,A,6,o[56]),B=d(B,C,D,F,q,10,o[57]),F=d(F,B,C,D,R,15,o[58]),D=d(D,F,B,C,j,21,o[59]),C=d(C,D,F,B,k,6,o[60]),B=d(B,C,D,F,E,10,o[61]),F=d(F,B,C,D,b,15,o[62]),D=d(D,F,B,C,T,21,o[63]),v[0]=v[0]+C|0,v[1]=v[1]+D|0,v[2]=v[2]+F|0,v[3]=v[3]+B|0},_doFinalize:function(){var x=this._data,p=x.words,g=this._nDataBytes*8,m=x.sigBytes*8;p[m>>>5]|=128<<24-m%32;var f=e.floor(g/4294967296),v=g;p[(m+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,p[(m+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x.sigBytes=(p.length+1)*4,this._process();for(var _=this._hash,y=_.words,b=0;b<4;b++){var w=y[b];y[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}return _},clone:function(){var x=n.clone.call(this);return x._hash=this._hash.clone(),x}});function u(x,p,g,m,f,v,_){var y=x+(p&g|~p&m)+f+_;return(y<<v|y>>>32-v)+p}function l(x,p,g,m,f,v,_){var y=x+(p&m|g&~m)+f+_;return(y<<v|y>>>32-v)+p}function h(x,p,g,m,f,v,_){var y=x+(p^g^m)+f+_;return(y<<v|y>>>32-v)+p}function d(x,p,g,m,f,v,_){var y=x+(g^(p|~m))+f+_;return(y<<v|y>>>32-v)+p}t.MD5=n._createHelper(c),t.HmacMD5=n._createHmacHelper(c)}(Math),s.MD5})});var A0=L((gr,pi)=>{(function(s,e){typeof gr=="object"?pi.exports=gr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(gr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=t.Hasher,n=e.algo,a=[],o=n.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,u){for(var l=this._hash.words,h=l[0],d=l[1],x=l[2],p=l[3],g=l[4],m=0;m<80;m++){if(m<16)a[m]=c[u+m]|0;else{var f=a[m-3]^a[m-8]^a[m-14]^a[m-16];a[m]=f<<1|f>>>31}var v=(h<<5|h>>>27)+g+a[m];m<20?v+=(d&x|~d&p)+1518500249:m<40?v+=(d^x^p)+1859775393:m<60?v+=(d&x|d&p|x&p)-1894007588:v+=(d^x^p)-899497514,g=p,p=x,x=d<<30|d>>>2,d=h,h=v}l[0]=l[0]+h|0,l[1]=l[1]+d|0,l[2]=l[2]+x|0,l[3]=l[3]+p|0,l[4]=l[4]+g|0},_doFinalize:function(){var c=this._data,u=c.words,l=this._nDataBytes*8,h=c.sigBytes*8;return u[h>>>5]|=128<<24-h%32,u[(h+64>>>9<<4)+14]=Math.floor(l/4294967296),u[(h+64>>>9<<4)+15]=l,c.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});e.SHA1=i._createHelper(o),e.HmacSHA1=i._createHmacHelper(o)}(),s.SHA1})});var mr=L((_r,gi)=>{(function(s,e){typeof _r=="object"?gi.exports=_r=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(_r,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,a=t.algo,o=[],c=[];(function(){function h(g){for(var m=e.sqrt(g),f=2;f<=m;f++)if(!(g%f))return!1;return!0}function d(g){return(g-(g|0))*4294967296|0}for(var x=2,p=0;p<64;)h(x)&&(p<8&&(o[p]=d(e.pow(x,1/2))),c[p]=d(e.pow(x,1/3)),p++),x++})();var u=[],l=a.SHA256=n.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(h,d){for(var x=this._hash.words,p=x[0],g=x[1],m=x[2],f=x[3],v=x[4],_=x[5],y=x[6],b=x[7],w=0;w<64;w++){if(w<16)u[w]=h[d+w]|0;else{var k=u[w-15],S=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,R=u[w-2],O=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;u[w]=S+u[w-7]+O+u[w-16]}var A=v&_^~v&y,T=p&g^p&m^g&m,P=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),E=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),I=b+E+A+c[w]+u[w],j=P+T;b=y,y=_,_=v,v=f+I|0,f=m,m=g,g=p,p=I+j|0}x[0]=x[0]+p|0,x[1]=x[1]+g|0,x[2]=x[2]+m|0,x[3]=x[3]+f|0,x[4]=x[4]+v|0,x[5]=x[5]+_|0,x[6]=x[6]+y|0,x[7]=x[7]+b|0},_doFinalize:function(){var h=this._data,d=h.words,x=this._nDataBytes*8,p=h.sigBytes*8;return d[p>>>5]|=128<<24-p%32,d[(p+64>>>9<<4)+14]=e.floor(x/4294967296),d[(p+64>>>9<<4)+15]=x,h.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var h=n.clone.call(this);return h._hash=this._hash.clone(),h}});t.SHA256=n._createHelper(l),t.HmacSHA256=n._createHmacHelper(l)}(Math),s.SHA256})});var mi=L((yr,_i)=>{(function(s,e,t){typeof yr=="object"?_i.exports=yr=e(z(),mr()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(s.CryptoJS)})(yr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=e.algo,n=i.SHA256,a=i.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var o=n._doFinalize.call(this);return o.sigBytes-=4,o}});e.SHA224=n._createHelper(a),e.HmacSHA224=n._createHmacHelper(a)}(),s.SHA224})});var C0=L((br,yi)=>{(function(s,e,t){typeof br=="object"?yi.exports=br=e(z(),Rt()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(s.CryptoJS)})(br,function(s){return function(){var e=s,t=e.lib,r=t.Hasher,i=e.x64,n=i.Word,a=i.WordArray,o=e.algo;function c(){return n.create.apply(n,arguments)}var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var d=0;d<80;d++)l[d]=c()})();var h=o.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(d,x){for(var p=this._hash.words,g=p[0],m=p[1],f=p[2],v=p[3],_=p[4],y=p[5],b=p[6],w=p[7],k=g.high,S=g.low,R=m.high,O=m.low,A=f.high,T=f.low,P=v.high,E=v.low,I=_.high,j=_.low,$=y.high,q=y.low,C=b.high,D=b.low,F=w.high,B=w.low,M=k,W=S,G=R,H=O,we=A,He=T,Xr=P,st=E,ne=I,Z=j,It=$,it=q,jt=C,nt=D,Qr=F,ot=B,oe=0;oe<80;oe++){var re,ve,$t=l[oe];if(oe<16)ve=$t.high=d[x+oe*2]|0,re=$t.low=d[x+oe*2+1]|0;else{var T0=l[oe-15],Ne=T0.high,at=T0.low,pn=(Ne>>>1|at<<31)^(Ne>>>8|at<<24)^Ne>>>7,R0=(at>>>1|Ne<<31)^(at>>>8|Ne<<24)^(at>>>7|Ne<<25),P0=l[oe-2],ze=P0.high,ct=P0.low,gn=(ze>>>19|ct<<13)^(ze<<3|ct>>>29)^ze>>>6,O0=(ct>>>19|ze<<13)^(ct<<3|ze>>>29)^(ct>>>6|ze<<26),I0=l[oe-7],_n=I0.high,mn=I0.low,j0=l[oe-16],yn=j0.high,$0=j0.low;re=R0+mn,ve=pn+_n+(re>>>0<R0>>>0?1:0),re=re+O0,ve=ve+gn+(re>>>0<O0>>>0?1:0),re=re+$0,ve=ve+yn+(re>>>0<$0>>>0?1:0),$t.high=ve,$t.low=re}var bn=ne&It^~ne&jt,q0=Z&it^~Z&nt,wn=M&G^M&we^G&we,En=W&H^W&He^H&He,An=(M>>>28|W<<4)^(M<<30|W>>>2)^(M<<25|W>>>7),L0=(W>>>28|M<<4)^(W<<30|M>>>2)^(W<<25|M>>>7),Cn=(ne>>>14|Z<<18)^(ne>>>18|Z<<14)^(ne<<23|Z>>>9),Bn=(Z>>>14|ne<<18)^(Z>>>18|ne<<14)^(Z<<23|ne>>>9),U0=u[oe],Dn=U0.high,H0=U0.low,ee=ot+Bn,pe=Qr+Cn+(ee>>>0<ot>>>0?1:0),ee=ee+q0,pe=pe+bn+(ee>>>0<q0>>>0?1:0),ee=ee+H0,pe=pe+Dn+(ee>>>0<H0>>>0?1:0),ee=ee+re,pe=pe+ve+(ee>>>0<re>>>0?1:0),N0=L0+En,kn=An+wn+(N0>>>0<L0>>>0?1:0);Qr=jt,ot=nt,jt=It,nt=it,It=ne,it=Z,Z=st+ee|0,ne=Xr+pe+(Z>>>0<st>>>0?1:0)|0,Xr=we,st=He,we=G,He=H,G=M,H=W,W=ee+N0|0,M=pe+kn+(W>>>0<ee>>>0?1:0)|0}S=g.low=S+W,g.high=k+M+(S>>>0<W>>>0?1:0),O=m.low=O+H,m.high=R+G+(O>>>0<H>>>0?1:0),T=f.low=T+He,f.high=A+we+(T>>>0<He>>>0?1:0),E=v.low=E+st,v.high=P+Xr+(E>>>0<st>>>0?1:0),j=_.low=j+Z,_.high=I+ne+(j>>>0<Z>>>0?1:0),q=y.low=q+it,y.high=$+It+(q>>>0<it>>>0?1:0),D=b.low=D+nt,b.high=C+jt+(D>>>0<nt>>>0?1:0),B=w.low=B+ot,w.high=F+Qr+(B>>>0<ot>>>0?1:0)},_doFinalize:function(){var d=this._data,x=d.words,p=this._nDataBytes*8,g=d.sigBytes*8;x[g>>>5]|=128<<24-g%32,x[(g+128>>>10<<5)+30]=Math.floor(p/4294967296),x[(g+128>>>10<<5)+31]=p,d.sigBytes=x.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var d=r.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:1024/32});e.SHA512=r._createHelper(h),e.HmacSHA512=r._createHmacHelper(h)}(),s.SHA512})});var wi=L((wr,bi)=>{(function(s,e,t){typeof wr=="object"?bi.exports=wr=e(z(),Rt(),C0()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(s.CryptoJS)})(wr,function(s){return function(){var e=s,t=e.x64,r=t.Word,i=t.WordArray,n=e.algo,a=n.SHA512,o=n.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c}});e.SHA384=a._createHelper(o),e.HmacSHA384=a._createHmacHelper(o)}(),s.SHA384})});var Ai=L((Er,Ei)=>{(function(s,e,t){typeof Er=="object"?Ei.exports=Er=e(z(),Rt()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(s.CryptoJS)})(Er,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,a=t.x64,o=a.Word,c=t.algo,u=[],l=[],h=[];(function(){for(var p=1,g=0,m=0;m<24;m++){u[p+5*g]=(m+1)*(m+2)/2%64;var f=g%5,v=(2*p+3*g)%5;p=f,g=v}for(var p=0;p<5;p++)for(var g=0;g<5;g++)l[p+5*g]=g+(2*p+3*g)%5*5;for(var _=1,y=0;y<24;y++){for(var b=0,w=0,k=0;k<7;k++){if(_&1){var S=(1<<k)-1;S<32?w^=1<<S:b^=1<<S-32}_&128?_=_<<1^113:_<<=1}h[y]=o.create(b,w)}})();var d=[];(function(){for(var p=0;p<25;p++)d[p]=o.create()})();var x=c.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var p=this._state=[],g=0;g<25;g++)p[g]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(p,g){for(var m=this._state,f=this.blockSize/2,v=0;v<f;v++){var _=p[g+2*v],y=p[g+2*v+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360;var b=m[v];b.high^=y,b.low^=_}for(var w=0;w<24;w++){for(var k=0;k<5;k++){for(var S=0,R=0,O=0;O<5;O++){var b=m[k+5*O];S^=b.high,R^=b.low}var A=d[k];A.high=S,A.low=R}for(var k=0;k<5;k++)for(var T=d[(k+4)%5],P=d[(k+1)%5],E=P.high,I=P.low,S=T.high^(E<<1|I>>>31),R=T.low^(I<<1|E>>>31),O=0;O<5;O++){var b=m[k+5*O];b.high^=S,b.low^=R}for(var j=1;j<25;j++){var S,R,b=m[j],$=b.high,q=b.low,C=u[j];C<32?(S=$<<C|q>>>32-C,R=q<<C|$>>>32-C):(S=q<<C-32|$>>>64-C,R=$<<C-32|q>>>64-C);var D=d[l[j]];D.high=S,D.low=R}var F=d[0],B=m[0];F.high=B.high,F.low=B.low;for(var k=0;k<5;k++)for(var O=0;O<5;O++){var j=k+5*O,b=m[j],M=d[j],W=d[(k+1)%5+5*O],G=d[(k+2)%5+5*O];b.high=M.high^~W.high&G.high,b.low=M.low^~W.low&G.low}var b=m[0],H=h[w];b.high^=H.high,b.low^=H.low}},_doFinalize:function(){var p=this._data,g=p.words,m=this._nDataBytes*8,f=p.sigBytes*8,v=this.blockSize*32;g[f>>>5]|=1<<24-f%32,g[(e.ceil((f+1)/v)*v>>>5)-1]|=128,p.sigBytes=g.length*4,this._process();for(var _=this._state,y=this.cfg.outputLength/8,b=y/8,w=[],k=0;k<b;k++){var S=_[k],R=S.high,O=S.low;R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,w.push(O),w.push(R)}return new i.init(w,y)},clone:function(){for(var p=n.clone.call(this),g=p._state=this._state.slice(0),m=0;m<25;m++)g[m]=g[m].clone();return p}});t.SHA3=n._createHelper(x),t.HmacSHA3=n._createHmacHelper(x)}(Math),s.SHA3})});var Bi=L((Ar,Ci)=>{(function(s,e){typeof Ar=="object"?Ci.exports=Ar=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(Ar,function(s){return function(e){var t=s,r=t.lib,i=r.WordArray,n=r.Hasher,a=t.algo,o=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),d=i.create([1352829926,1548603684,1836072691,2053994217,0]),x=a.RIPEMD160=n.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,b){for(var w=0;w<16;w++){var k=b+w,S=y[k];y[k]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var R=this._hash.words,O=h.words,A=d.words,T=o.words,P=c.words,E=u.words,I=l.words,j,$,q,C,D,F,B,M,W,G;F=j=R[0],B=$=R[1],M=q=R[2],W=C=R[3],G=D=R[4];for(var H,w=0;w<80;w+=1)H=j+y[b+T[w]]|0,w<16?H+=p($,q,C)+O[0]:w<32?H+=g($,q,C)+O[1]:w<48?H+=m($,q,C)+O[2]:w<64?H+=f($,q,C)+O[3]:H+=v($,q,C)+O[4],H=H|0,H=_(H,E[w]),H=H+D|0,j=D,D=C,C=_(q,10),q=$,$=H,H=F+y[b+P[w]]|0,w<16?H+=v(B,M,W)+A[0]:w<32?H+=f(B,M,W)+A[1]:w<48?H+=m(B,M,W)+A[2]:w<64?H+=g(B,M,W)+A[3]:H+=p(B,M,W)+A[4],H=H|0,H=_(H,I[w]),H=H+G|0,F=G,G=W,W=_(M,10),M=B,B=H;H=R[1]+q+W|0,R[1]=R[2]+C+G|0,R[2]=R[3]+D+F|0,R[3]=R[4]+j+B|0,R[4]=R[0]+$+M|0,R[0]=H},_doFinalize:function(){var y=this._data,b=y.words,w=this._nDataBytes*8,k=y.sigBytes*8;b[k>>>5]|=128<<24-k%32,b[(k+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,y.sigBytes=(b.length+1)*4,this._process();for(var S=this._hash,R=S.words,O=0;O<5;O++){var A=R[O];R[O]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return S},clone:function(){var y=n.clone.call(this);return y._hash=this._hash.clone(),y}});function p(y,b,w){return y^b^w}function g(y,b,w){return y&b|~y&w}function m(y,b,w){return(y|~b)^w}function f(y,b,w){return y&w|b&~w}function v(y,b,w){return y^(b|~w)}function _(y,b){return y<<b|y>>>32-b}t.RIPEMD160=n._createHelper(x),t.HmacRIPEMD160=n._createHmacHelper(x)}(Math),s.RIPEMD160})});var Br=L((Cr,Di)=>{(function(s,e){typeof Cr=="object"?Di.exports=Cr=e(z()):typeof define=="function"&&define.amd?define(["./core"],e):e(s.CryptoJS)})(Cr,function(s){(function(){var e=s,t=e.lib,r=t.Base,i=e.enc,n=i.Utf8,a=e.algo,o=a.HMAC=r.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=n.parse(u));var l=c.blockSize,h=l*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var d=this._oKey=u.clone(),x=this._iKey=u.clone(),p=d.words,g=x.words,m=0;m<l;m++)p[m]^=1549556828,g[m]^=909522486;d.sigBytes=x.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,l=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(l));return h}})})()})});var Fi=L((Dr,ki)=>{(function(s,e,t){typeof Dr=="object"?ki.exports=Dr=e(z(),mr(),Br()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(s.CryptoJS)})(Dr,function(s){return function(){var e=s,t=e.lib,r=t.Base,i=t.WordArray,n=e.algo,a=n.SHA256,o=n.HMAC,c=n.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:25e4}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,l){for(var h=this.cfg,d=o.create(h.hasher,u),x=i.create(),p=i.create([1]),g=x.words,m=p.words,f=h.keySize,v=h.iterations;g.length<f;){var _=d.update(l).finalize(p);d.reset();for(var y=_.words,b=y.length,w=_,k=1;k<v;k++){w=d.finalize(w),d.reset();for(var S=w.words,R=0;R<b;R++)y[R]^=S[R]}x.concat(_),m[0]++}return x.sigBytes=f*4,x}});e.PBKDF2=function(u,l,h){return c.create(h).compute(u,l)}}(),s.PBKDF2})});var xe=L((kr,Si)=>{(function(s,e,t){typeof kr=="object"?Si.exports=kr=e(z(),A0(),Br()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(s.CryptoJS)})(kr,function(s){return function(){var e=s,t=e.lib,r=t.Base,i=t.WordArray,n=e.algo,a=n.MD5,o=n.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,u){for(var l,h=this.cfg,d=h.hasher.create(),x=i.create(),p=x.words,g=h.keySize,m=h.iterations;p.length<g;){l&&d.update(l),l=d.update(c).finalize(u),d.reset();for(var f=1;f<m;f++)l=d.finalize(l),d.reset();x.concat(l)}return x.sigBytes=g*4,x}});e.EvpKDF=function(c,u,l){return o.create(l).compute(c,u)}}(),s.EvpKDF})});var V=L((Fr,Ti)=>{(function(s,e,t){typeof Fr=="object"?Ti.exports=Fr=e(z(),xe()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(s.CryptoJS)})(Fr,function(s){s.lib.Cipher||function(e){var t=s,r=t.lib,i=r.Base,n=r.WordArray,a=r.BufferedBlockAlgorithm,o=t.enc,c=o.Utf8,u=o.Base64,l=t.algo,h=l.EvpKDF,d=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(A,T){return this.create(this._ENC_XFORM_MODE,A,T)},createDecryptor:function(A,T){return this.create(this._DEC_XFORM_MODE,A,T)},init:function(A,T,P){this.cfg=this.cfg.extend(P),this._xformMode=A,this._key=T,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var T=this._doFinalize();return T},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function A(T){return typeof T=="string"?O:k}return function(T){return{encrypt:function(P,E,I){return A(E).encrypt(T,P,E,I)},decrypt:function(P,E,I){return A(E).decrypt(T,P,E,I)}}}}()}),x=r.StreamCipher=d.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1}),p=t.mode={},g=r.BlockCipherMode=i.extend({createEncryptor:function(A,T){return this.Encryptor.create(A,T)},createDecryptor:function(A,T){return this.Decryptor.create(A,T)},init:function(A,T){this._cipher=A,this._iv=T}}),m=p.CBC=function(){var A=g.extend();A.Encryptor=A.extend({processBlock:function(P,E){var I=this._cipher,j=I.blockSize;T.call(this,P,E,j),I.encryptBlock(P,E),this._prevBlock=P.slice(E,E+j)}}),A.Decryptor=A.extend({processBlock:function(P,E){var I=this._cipher,j=I.blockSize,$=P.slice(E,E+j);I.decryptBlock(P,E),T.call(this,P,E,j),this._prevBlock=$}});function T(P,E,I){var j,$=this._iv;$?(j=$,this._iv=e):j=this._prevBlock;for(var q=0;q<I;q++)P[E+q]^=j[q]}return A}(),f=t.pad={},v=f.Pkcs7={pad:function(A,T){for(var P=T*4,E=P-A.sigBytes%P,I=E<<24|E<<16|E<<8|E,j=[],$=0;$<E;$+=4)j.push(I);var q=n.create(j,E);A.concat(q)},unpad:function(A){var T=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=T}},_=r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:m,padding:v}),reset:function(){var A;d.reset.call(this);var T=this.cfg,P=T.iv,E=T.mode;this._xformMode==this._ENC_XFORM_MODE?A=E.createEncryptor:(A=E.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,P&&P.words):(this._mode=A.call(E,this,P&&P.words),this._mode.__creator=A)},_doProcessBlock:function(A,T){this._mode.processBlock(A,T)},_doFinalize:function(){var A,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),T.unpad(A)),A},blockSize:128/32}),y=r.CipherParams=i.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),b=t.format={},w=b.OpenSSL={stringify:function(A){var T,P=A.ciphertext,E=A.salt;return E?T=n.create([1398893684,1701076831]).concat(E).concat(P):T=P,T.toString(u)},parse:function(A){var T,P=u.parse(A),E=P.words;return E[0]==1398893684&&E[1]==1701076831&&(T=n.create(E.slice(2,4)),E.splice(0,4),P.sigBytes-=16),y.create({ciphertext:P,salt:T})}},k=r.SerializableCipher=i.extend({cfg:i.extend({format:w}),encrypt:function(A,T,P,E){E=this.cfg.extend(E);var I=A.createEncryptor(P,E),j=I.finalize(T),$=I.cfg;return y.create({ciphertext:j,key:P,iv:$.iv,algorithm:A,mode:$.mode,padding:$.padding,blockSize:A.blockSize,formatter:E.format})},decrypt:function(A,T,P,E){E=this.cfg.extend(E),T=this._parse(T,E.format);var I=A.createDecryptor(P,E).finalize(T.ciphertext);return I},_parse:function(A,T){return typeof A=="string"?T.parse(A,this):A}}),S=t.kdf={},R=S.OpenSSL={execute:function(A,T,P,E,I){if(E||(E=n.random(64/8)),I)var j=h.create({keySize:T+P,hasher:I}).compute(A,E);else var j=h.create({keySize:T+P}).compute(A,E);var $=n.create(j.words.slice(T),P*4);return j.sigBytes=T*4,y.create({key:j,iv:$,salt:E})}},O=r.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:R}),encrypt:function(A,T,P,E){E=this.cfg.extend(E);var I=E.kdf.execute(P,A.keySize,A.ivSize,E.salt,E.hasher);E.iv=I.iv;var j=k.encrypt.call(this,A,T,I.key,E);return j.mixIn(I),j},decrypt:function(A,T,P,E){E=this.cfg.extend(E),T=this._parse(T,E.format);var I=E.kdf.execute(P,A.keySize,A.ivSize,T.salt,E.hasher);E.iv=I.iv;var j=k.decrypt.call(this,A,T,I.key,E);return j}})}()})});var Pi=L((Sr,Ri)=>{(function(s,e,t){typeof Sr=="object"?Ri.exports=Sr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Sr,function(s){return s.mode.CFB=function(){var e=s.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(r,i){var n=this._cipher,a=n.blockSize;t.call(this,r,i,a,n),this._prevBlock=r.slice(i,i+a)}}),e.Decryptor=e.extend({processBlock:function(r,i){var n=this._cipher,a=n.blockSize,o=r.slice(i,i+a);t.call(this,r,i,a,n),this._prevBlock=o}});function t(r,i,n,a){var o,c=this._iv;c?(o=c.slice(0),this._iv=void 0):o=this._prevBlock,a.encryptBlock(o,0);for(var u=0;u<n;u++)r[i+u]^=o[u]}return e}(),s.mode.CFB})});var Ii=L((Tr,Oi)=>{(function(s,e,t){typeof Tr=="object"?Oi.exports=Tr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Tr,function(s){return s.mode.CTR=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,i){var n=this._cipher,a=n.blockSize,o=this._iv,c=this._counter;o&&(c=this._counter=o.slice(0),this._iv=void 0);var u=c.slice(0);n.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var l=0;l<a;l++)r[i+l]^=u[l]}});return e.Decryptor=t,e}(),s.mode.CTR})});var $i=L((Rr,ji)=>{(function(s,e,t){typeof Rr=="object"?ji.exports=Rr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Rr,function(s){return s.mode.CTRGladman=function(){var e=s.lib.BlockCipherMode.extend();function t(n){if((n>>24&255)===255){var a=n>>16&255,o=n>>8&255,c=n&255;a===255?(a=0,o===255?(o=0,c===255?c=0:++c):++o):++a,n=0,n+=a<<16,n+=o<<8,n+=c}else n+=1<<24;return n}function r(n){return(n[0]=t(n[0]))===0&&(n[1]=t(n[1])),n}var i=e.Encryptor=e.extend({processBlock:function(n,a){var o=this._cipher,c=o.blockSize,u=this._iv,l=this._counter;u&&(l=this._counter=u.slice(0),this._iv=void 0),r(l);var h=l.slice(0);o.encryptBlock(h,0);for(var d=0;d<c;d++)n[a+d]^=h[d]}});return e.Decryptor=i,e}(),s.mode.CTRGladman})});var Li=L((Pr,qi)=>{(function(s,e,t){typeof Pr=="object"?qi.exports=Pr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Pr,function(s){return s.mode.OFB=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,i){var n=this._cipher,a=n.blockSize,o=this._iv,c=this._keystream;o&&(c=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(c,0);for(var u=0;u<a;u++)r[i+u]^=c[u]}});return e.Decryptor=t,e}(),s.mode.OFB})});var Hi=L((Or,Ui)=>{(function(s,e,t){typeof Or=="object"?Ui.exports=Or=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Or,function(s){return s.mode.ECB=function(){var e=s.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,r){this._cipher.encryptBlock(t,r)}}),e.Decryptor=e.extend({processBlock:function(t,r){this._cipher.decryptBlock(t,r)}}),e}(),s.mode.ECB})});var zi=L((Ir,Ni)=>{(function(s,e,t){typeof Ir=="object"?Ni.exports=Ir=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Ir,function(s){return s.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=t*4,n=i-r%i,a=r+n-1;e.clamp(),e.words[a>>>2]|=n<<24-a%4*8,e.sigBytes+=n},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},s.pad.Ansix923})});var Wi=L((jr,Mi)=>{(function(s,e,t){typeof jr=="object"?Mi.exports=jr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(jr,function(s){return s.pad.Iso10126={pad:function(e,t){var r=t*4,i=r-e.sigBytes%r;e.concat(s.lib.WordArray.random(i-1)).concat(s.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},s.pad.Iso10126})});var Gi=L(($r,Ki)=>{(function(s,e,t){typeof $r=="object"?Ki.exports=$r=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})($r,function(s){return s.pad.Iso97971={pad:function(e,t){e.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(e,t)},unpad:function(e){s.pad.ZeroPadding.unpad(e),e.sigBytes--}},s.pad.Iso97971})});var Vi=L((qr,Ji)=>{(function(s,e,t){typeof qr=="object"?Ji.exports=qr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(qr,function(s){return s.pad.ZeroPadding={pad:function(e,t){var r=t*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},s.pad.ZeroPadding})});var Qi=L((Lr,Xi)=>{(function(s,e,t){typeof Lr=="object"?Xi.exports=Lr=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Lr,function(s){return s.pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding})});var Zi=L((Ur,Yi)=>{(function(s,e,t){typeof Ur=="object"?Yi.exports=Ur=e(z(),V()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(s.CryptoJS)})(Ur,function(s){return function(e){var t=s,r=t.lib,i=r.CipherParams,n=t.enc,a=n.Hex,o=t.format,c=o.Hex={stringify:function(u){return u.ciphertext.toString(a)},parse:function(u){var l=a.parse(u);return i.create({ciphertext:l})}}}(),s.format.Hex})});var tn=L((Hr,en)=>{(function(s,e,t){typeof Hr=="object"?en.exports=Hr=e(z(),ye(),be(),xe(),V()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Hr,function(s){return function(){var e=s,t=e.lib,r=t.BlockCipher,i=e.algo,n=[],a=[],o=[],c=[],u=[],l=[],h=[],d=[],x=[],p=[];(function(){for(var f=[],v=0;v<256;v++)v<128?f[v]=v<<1:f[v]=v<<1^283;for(var _=0,y=0,v=0;v<256;v++){var b=y^y<<1^y<<2^y<<3^y<<4;b=b>>>8^b&255^99,n[_]=b,a[b]=_;var w=f[_],k=f[w],S=f[k],R=f[b]*257^b*16843008;o[_]=R<<24|R>>>8,c[_]=R<<16|R>>>16,u[_]=R<<8|R>>>24,l[_]=R;var R=S*16843009^k*65537^w*257^_*16843008;h[b]=R<<24|R>>>8,d[b]=R<<16|R>>>16,x[b]=R<<8|R>>>24,p[b]=R,_?(_=w^f[f[f[S^w]]],y^=f[f[y]]):_=y=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=r.extend({_doReset:function(){var f;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,_=v.words,y=v.sigBytes/4,b=this._nRounds=y+6,w=(b+1)*4,k=this._keySchedule=[],S=0;S<w;S++)S<y?k[S]=_[S]:(f=k[S-1],S%y?y>6&&S%y==4&&(f=n[f>>>24]<<24|n[f>>>16&255]<<16|n[f>>>8&255]<<8|n[f&255]):(f=f<<8|f>>>24,f=n[f>>>24]<<24|n[f>>>16&255]<<16|n[f>>>8&255]<<8|n[f&255],f^=g[S/y|0]<<24),k[S]=k[S-y]^f);for(var R=this._invKeySchedule=[],O=0;O<w;O++){var S=w-O;if(O%4)var f=k[S];else var f=k[S-4];O<4||S<=4?R[O]=f:R[O]=h[n[f>>>24]]^d[n[f>>>16&255]]^x[n[f>>>8&255]]^p[n[f&255]]}}},encryptBlock:function(f,v){this._doCryptBlock(f,v,this._keySchedule,o,c,u,l,n)},decryptBlock:function(f,v){var _=f[v+1];f[v+1]=f[v+3],f[v+3]=_,this._doCryptBlock(f,v,this._invKeySchedule,h,d,x,p,a);var _=f[v+1];f[v+1]=f[v+3],f[v+3]=_},_doCryptBlock:function(f,v,_,y,b,w,k,S){for(var R=this._nRounds,O=f[v]^_[0],A=f[v+1]^_[1],T=f[v+2]^_[2],P=f[v+3]^_[3],E=4,I=1;I<R;I++){var j=y[O>>>24]^b[A>>>16&255]^w[T>>>8&255]^k[P&255]^_[E++],$=y[A>>>24]^b[T>>>16&255]^w[P>>>8&255]^k[O&255]^_[E++],q=y[T>>>24]^b[P>>>16&255]^w[O>>>8&255]^k[A&255]^_[E++],C=y[P>>>24]^b[O>>>16&255]^w[A>>>8&255]^k[T&255]^_[E++];O=j,A=$,T=q,P=C}var j=(S[O>>>24]<<24|S[A>>>16&255]<<16|S[T>>>8&255]<<8|S[P&255])^_[E++],$=(S[A>>>24]<<24|S[T>>>16&255]<<16|S[P>>>8&255]<<8|S[O&255])^_[E++],q=(S[T>>>24]<<24|S[P>>>16&255]<<16|S[O>>>8&255]<<8|S[A&255])^_[E++],C=(S[P>>>24]<<24|S[O>>>16&255]<<16|S[A>>>8&255]<<8|S[T&255])^_[E++];f[v]=j,f[v+1]=$,f[v+2]=q,f[v+3]=C},keySize:256/32});e.AES=r._createHelper(m)}(),s.AES})});var sn=L((Nr,rn)=>{(function(s,e,t){typeof Nr=="object"?rn.exports=Nr=e(z(),ye(),be(),xe(),V()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Nr,function(s){return function(){var e=s,t=e.lib,r=t.WordArray,i=t.BlockCipher,n=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=n.DES=i.extend({_doReset:function(){for(var g=this._key,m=g.words,f=[],v=0;v<56;v++){var _=a[v]-1;f[v]=m[_>>>5]>>>31-_%32&1}for(var y=this._subKeys=[],b=0;b<16;b++){for(var w=y[b]=[],k=c[b],v=0;v<24;v++)w[v/6|0]|=f[(o[v]-1+k)%28]<<31-v%6,w[4+(v/6|0)]|=f[28+(o[v+24]-1+k)%28]<<31-v%6;w[0]=w[0]<<1|w[0]>>>31;for(var v=1;v<7;v++)w[v]=w[v]>>>(v-1)*4+3;w[7]=w[7]<<5|w[7]>>>27}for(var S=this._invSubKeys=[],v=0;v<16;v++)S[v]=y[15-v]},encryptBlock:function(g,m){this._doCryptBlock(g,m,this._subKeys)},decryptBlock:function(g,m){this._doCryptBlock(g,m,this._invSubKeys)},_doCryptBlock:function(g,m,f){this._lBlock=g[m],this._rBlock=g[m+1],d.call(this,4,252645135),d.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),d.call(this,1,1431655765);for(var v=0;v<16;v++){for(var _=f[v],y=this._lBlock,b=this._rBlock,w=0,k=0;k<8;k++)w|=u[k][((b^_[k])&l[k])>>>0];this._lBlock=b,this._rBlock=y^w}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,d.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),g[m]=this._lBlock,g[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function d(g,m){var f=(this._lBlock>>>g^this._rBlock)&m;this._rBlock^=f,this._lBlock^=f<<g}function x(g,m){var f=(this._rBlock>>>g^this._lBlock)&m;this._lBlock^=f,this._rBlock^=f<<g}e.DES=i._createHelper(h);var p=n.TripleDES=i.extend({_doReset:function(){var g=this._key,m=g.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var f=m.slice(0,2),v=m.length<4?m.slice(0,2):m.slice(2,4),_=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=h.createEncryptor(r.create(f)),this._des2=h.createEncryptor(r.create(v)),this._des3=h.createEncryptor(r.create(_))},encryptBlock:function(g,m){this._des1.encryptBlock(g,m),this._des2.decryptBlock(g,m),this._des3.encryptBlock(g,m)},decryptBlock:function(g,m){this._des3.decryptBlock(g,m),this._des2.encryptBlock(g,m),this._des1.decryptBlock(g,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(p)}(),s.TripleDES})});var on=L((zr,nn)=>{(function(s,e,t){typeof zr=="object"?nn.exports=zr=e(z(),ye(),be(),xe(),V()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(zr,function(s){return function(){var e=s,t=e.lib,r=t.StreamCipher,i=e.algo,n=i.RC4=r.extend({_doReset:function(){for(var c=this._key,u=c.words,l=c.sigBytes,h=this._S=[],d=0;d<256;d++)h[d]=d;for(var d=0,x=0;d<256;d++){var p=d%l,g=u[p>>>2]>>>24-p%4*8&255;x=(x+h[d]+g)%256;var m=h[d];h[d]=h[x],h[x]=m}this._i=this._j=0},_doProcessBlock:function(c,u){c[u]^=a.call(this)},keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,l=this._j,h=0,d=0;d<4;d++){u=(u+1)%256,l=(l+c[u])%256;var x=c[u];c[u]=c[l],c[l]=x,h|=c[(c[u]+c[l])%256]<<24-d*8}return this._i=u,this._j=l,h}e.RC4=r._createHelper(n);var o=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)}});e.RC4Drop=r._createHelper(o)}(),s.RC4})});var cn=L((Mr,an)=>{(function(s,e,t){typeof Mr=="object"?an.exports=Mr=e(z(),ye(),be(),xe(),V()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Mr,function(s){return function(){var e=s,t=e.lib,r=t.StreamCipher,i=e.algo,n=[],a=[],o=[],c=i.Rabbit=r.extend({_doReset:function(){for(var l=this._key.words,h=this.cfg.iv,d=0;d<4;d++)l[d]=(l[d]<<8|l[d]>>>24)&16711935|(l[d]<<24|l[d]>>>8)&4278255360;var x=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],p=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var d=0;d<4;d++)u.call(this);for(var d=0;d<8;d++)p[d]^=x[d+4&7];if(h){var g=h.words,m=g[0],f=g[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,_=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,y=v>>>16|_&4294901760,b=_<<16|v&65535;p[0]^=v,p[1]^=y,p[2]^=_,p[3]^=b,p[4]^=v,p[5]^=y,p[6]^=_,p[7]^=b;for(var d=0;d<4;d++)u.call(this)}},_doProcessBlock:function(l,h){var d=this._X;u.call(this),n[0]=d[0]^d[5]>>>16^d[3]<<16,n[1]=d[2]^d[7]>>>16^d[5]<<16,n[2]=d[4]^d[1]>>>16^d[7]<<16,n[3]=d[6]^d[3]>>>16^d[1]<<16;for(var x=0;x<4;x++)n[x]=(n[x]<<8|n[x]>>>24)&16711935|(n[x]<<24|n[x]>>>8)&4278255360,l[h+x]^=n[x]},blockSize:128/32,ivSize:64/32});function u(){for(var l=this._X,h=this._C,d=0;d<8;d++)a[d]=h[d];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<a[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<a[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<a[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<a[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<a[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<a[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<a[6]>>>0?1:0)|0,this._b=h[7]>>>0<a[7]>>>0?1:0;for(var d=0;d<8;d++){var x=l[d]+h[d],p=x&65535,g=x>>>16,m=((p*p>>>17)+p*g>>>15)+g*g,f=((x&4294901760)*x|0)+((x&65535)*x|0);o[d]=m^f}l[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,l[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,l[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,l[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,l[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,l[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,l[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,l[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=r._createHelper(c)}(),s.Rabbit})});var un=L((Wr,ln)=>{(function(s,e,t){typeof Wr=="object"?ln.exports=Wr=e(z(),ye(),be(),xe(),V()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Wr,function(s){return function(){var e=s,t=e.lib,r=t.StreamCipher,i=e.algo,n=[],a=[],o=[],c=i.RabbitLegacy=r.extend({_doReset:function(){var l=this._key.words,h=this.cfg.iv,d=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],x=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var p=0;p<4;p++)u.call(this);for(var p=0;p<8;p++)x[p]^=d[p+4&7];if(h){var g=h.words,m=g[0],f=g[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,_=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,y=v>>>16|_&4294901760,b=_<<16|v&65535;x[0]^=v,x[1]^=y,x[2]^=_,x[3]^=b,x[4]^=v,x[5]^=y,x[6]^=_,x[7]^=b;for(var p=0;p<4;p++)u.call(this)}},_doProcessBlock:function(l,h){var d=this._X;u.call(this),n[0]=d[0]^d[5]>>>16^d[3]<<16,n[1]=d[2]^d[7]>>>16^d[5]<<16,n[2]=d[4]^d[1]>>>16^d[7]<<16,n[3]=d[6]^d[3]>>>16^d[1]<<16;for(var x=0;x<4;x++)n[x]=(n[x]<<8|n[x]>>>24)&16711935|(n[x]<<24|n[x]>>>8)&4278255360,l[h+x]^=n[x]},blockSize:128/32,ivSize:64/32});function u(){for(var l=this._X,h=this._C,d=0;d<8;d++)a[d]=h[d];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<a[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<a[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<a[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<a[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<a[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<a[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<a[6]>>>0?1:0)|0,this._b=h[7]>>>0<a[7]>>>0?1:0;for(var d=0;d<8;d++){var x=l[d]+h[d],p=x&65535,g=x>>>16,m=((p*p>>>17)+p*g>>>15)+g*g,f=((x&4294901760)*x|0)+((x&65535)*x|0);o[d]=m^f}l[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,l[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,l[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,l[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,l[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,l[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,l[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,l[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=r._createHelper(c)}(),s.RabbitLegacy})});var dn=L((Kr,hn)=>{(function(s,e,t){typeof Kr=="object"?hn.exports=Kr=e(z(),ye(),be(),xe(),V()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(s.CryptoJS)})(Kr,function(s){return function(){var e=s,t=e.lib,r=t.BlockCipher,i=e.algo;let n=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(p,g){let m=g>>24&255,f=g>>16&255,v=g>>8&255,_=g&255,y=p.sbox[0][m]+p.sbox[1][f];return y=y^p.sbox[2][v],y=y+p.sbox[3][_],y}function l(p,g,m){let f=g,v=m,_;for(let y=0;y<n;++y)f=f^p.pbox[y],v=u(p,f)^v,_=f,f=v,v=_;return _=f,f=v,v=_,v=v^p.pbox[n],f=f^p.pbox[n+1],{left:f,right:v}}function h(p,g,m){let f=g,v=m,_;for(let y=n+1;y>1;--y)f=f^p.pbox[y],v=u(p,f)^v,_=f,f=v,v=_;return _=f,f=v,v=_,v=v^p.pbox[1],f=f^p.pbox[0],{left:f,right:v}}function d(p,g,m){for(let b=0;b<4;b++){p.sbox[b]=[];for(let w=0;w<256;w++)p.sbox[b][w]=o[b][w]}let f=0;for(let b=0;b<n+2;b++)p.pbox[b]=a[b]^g[f],f++,f>=m&&(f=0);let v=0,_=0,y=0;for(let b=0;b<n+2;b+=2)y=l(p,v,_),v=y.left,_=y.right,p.pbox[b]=v,p.pbox[b+1]=_;for(let b=0;b<4;b++)for(let w=0;w<256;w+=2)y=l(p,v,_),v=y.left,_=y.right,p.sbox[b][w]=v,p.sbox[b][w+1]=_;return!0}var x=i.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var p=this._keyPriorReset=this._key,g=p.words,m=p.sigBytes/4;d(c,g,m)}},encryptBlock:function(p,g){var m=l(c,p[g],p[g+1]);p[g]=m.left,p[g+1]=m.right},decryptBlock:function(p,g){var m=h(c,p[g],p[g+1]);p[g]=m.left,p[g+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(x)}(),s.Blowfish})});var xn=L((Gr,fn)=>{(function(s,e,t){typeof Gr=="object"?fn.exports=Gr=e(z(),Rt(),li(),hi(),ye(),xi(),be(),A0(),mr(),mi(),C0(),wi(),Ai(),Bi(),Br(),Fi(),xe(),V(),Pi(),Ii(),$i(),Li(),Hi(),zi(),Wi(),Gi(),Vi(),Qi(),Zi(),tn(),sn(),on(),cn(),un(),dn()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):s.CryptoJS=e(s.CryptoJS)})(Gr,function(s){return s})});var K0=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(ge(),Ee)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var lt=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Lt=class extends lt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},ut=class extends lt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},ht=class extends lt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Ut;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Ut||(Ut={}));var Hn=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},dt=class{constructor(e,{headers:t={},customFetch:r,region:i=Ut.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=K0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Hn(this,void 0,void 0,function*(){try{let{headers:i,method:n,body:a}=t,o={},{region:c}=t;c||(c=this.region);let u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let l;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));let h=yield this.fetch(u.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:l}).catch(g=>{throw new Lt(g)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new ut(h);if(!h.ok)throw new ht(h);let x=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return x==="application/json"?p=yield h.json():x==="application/octet-stream"?p=yield h.blob():x==="text/event-stream"?p=h:x==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof ht||i instanceof ut?i.context:void 0}}})}};var ns=W0(is(),1),{PostgrestClient:os,PostgrestQueryBuilder:ga,PostgrestFilterBuilder:_a,PostgrestTransformBuilder:ma,PostgrestBuilder:ya,PostgrestError:Zn}=ns.default;function as(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var cs=as();var ls="2.11.15";var us=`realtime-js/${ls}`,hs="1.0.0";var Wt=1e4,ds=1e3,Ke;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ke||(Ke={}));var Q;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Q||(Q={}));var te;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(te||(te={}));var Mt;(function(s){s.websocket="websocket"})(Mt||(Mt={}));var _e;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(_e||(_e={}));var mt=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),n=t.getUint8(2),a=this.HEADER_LENGTH+2,o=r.decode(e.slice(a,a+i));a=a+i;let c=r.decode(e.slice(a,a+n));a=a+n;let u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}};var Ae=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var K;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(K||(K={}));var d0=(s,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,a)=>(n[a]=eo(a,s,e,i),n),{})},eo=(s,e,t,r)=>{let i=e.find(o=>o.name===s),n=i?.type,a=t[s];return n&&!r.includes(n)?fs(n,a):h0(a)},fs=(s,e)=>{if(s.charAt(0)==="_"){let t=s.slice(1,s.length);return io(e,t)}switch(s){case K.bool:return to(e);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return ro(e);case K.json:case K.jsonb:return so(e);case K.timestamp:return no(e);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return h0(e);default:return h0(e)}},h0=s=>s,to=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},ro=s=>{if(typeof s=="string"){let e=parseFloat(s);if(!Number.isNaN(e))return e}return s},so=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},io=(s,e)=>{if(typeof s!="string")return s;let t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let n,a=s.slice(1,t);try{n=JSON.parse("["+a+"]")}catch{n=a?a.split(","):[]}return n.map(o=>fs(e,o))}return s},no=s=>typeof s=="string"?s.replace(" ","T"):s,Kt=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var Ce=class{constructor(e,t,r={},i=Wt){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var f0;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(f0||(f0={}));var Ge=class s{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=s.syncState(this.state,i,n,a),this.pendingDiffs.forEach(c=>{this.state=s.syncDiff(this.state,c,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{let{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=s.syncDiff(this.state,i,n,a),o())}),this.onJoin((i,n,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:a})}),this.onLeave((i,n,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let n=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(n,(u,l)=>{a[u]||(c[u]=l)}),this.map(a,(u,l)=>{let h=n[u];if(h){let d=l.map(m=>m.presence_ref),x=h.map(m=>m.presence_ref),p=l.filter(m=>x.indexOf(m.presence_ref)<0),g=h.filter(m=>d.indexOf(m.presence_ref)<0);p.length>0&&(o[u]=p),g.length>0&&(c[u]=g)}else o[u]=l}),this.syncDiff(n,{joins:o,leaves:c},r,i)}static syncDiff(e,t,r,i){let{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(o,c)=>{var u;let l=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),l.length>0){let h=e[o].map(x=>x.presence_ref),d=l.filter(x=>h.indexOf(x.presence_ref)<0);e[o].unshift(...d)}r(o,l,c)}),this.map(a,(o,c)=>{let u=e[o];if(!u)return;let l=c.map(h=>h.presence_ref);u=u.filter(h=>l.indexOf(h.presence_ref)<0),e[o]=u,i(o,u,c),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var x0;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(x0||(x0={}));var v0;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(v0||(v0={}));var ae;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ae||(ae={}));var Je=class s{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ce(this,te.join,this.params,this.timeout),this.rejoinTimer=new Ae(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Q.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(te.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new Ge(this),this.broadcastEndpointURL=Kt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Q.closed){let{config:{broadcast:n,presence:a,private:o}}=this.params;this._onError(l=>e?.(ae.CHANNEL_ERROR,l)),this._onClose(()=>e?.(ae.CLOSED));let c={},u={broadcast:n,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(l=>l.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:l})=>{var h;if(this.socket.setAuth(),l===void 0){e?.(ae.SUBSCRIBED);return}else{let d=this.bindings.postgres_changes,x=(h=d?.length)!==null&&h!==void 0?h:0,p=[];for(let g=0;g<x;g++){let m=d[g],{filter:{event:f,schema:v,table:_,filter:y}}=m,b=l&&l[g];if(b&&b.event===f&&b.schema===v&&b.table===_&&b.filter===y)p.push(Object.assign(Object.assign({},m),{id:b.id}));else{this.unsubscribe(),this.state=Q.errored,e?.(ae.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ae.SUBSCRIBED);return}}).receive("error",l=>{this.state=Q.errored,e?.(ae.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e?.(ae.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){let{event:n,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{let u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var a,o,c;let u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),u.receive("ok",()=>n("ok")),u.receive("error",()=>n("error")),u.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Q.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(te.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ce(this,te.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){let i=new AbortController,n=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(n),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ce(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,n;let a=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:l}=te;if(r&&[o,c,u,l].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var p,g,m;return((p=x.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(g=x.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===a}).map(x=>x.callback(d,r)):(n=this.bindings[a])===null||n===void 0||n.filter(x=>{var p,g,m,f,v,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){let y=x.id,b=(p=x.filter)===null||p===void 0?void 0:p.event;return y&&((g=t.ids)===null||g===void 0?void 0:g.includes(y))&&(b==="*"||b?.toLocaleLowerCase()===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{let y=(v=(f=x?.filter)===null||f===void 0?void 0:f.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return y==="*"||y===((_=t?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof d=="object"&&"ids"in d){let p=d.data,{schema:g,table:m,commit_timestamp:f,type:v,errors:_}=p;d=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:f,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(p))}x.callback(d,r)})}_isClosed(){return this.state===Q.closed}_isJoined(){return this.state===Q.joined}_isJoining(){return this.state===Q.joining}_isLeaving(){return this.state===Q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),n={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&s.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(te.close,{},e)}_onError(e){this._on(te.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=d0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=d0(e.columns,e.old_record)),t}};var xs=()=>{},ao=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ve=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wt,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xs,this.ref=0,this.logger=xs,this.conn=null,this.sendBuffer=[],this.serializer=new mt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...o)=>Promise.resolve().then(()=>(ge(),Ee)).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Mt.websocket}`,this.httpEndpoint=Kt(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t?.encode?t.encode:(n,a)=>a(JSON.stringify(n)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ae(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=cs),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hs}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ke.connecting:return _e.Connecting;case Ke.open:return _e.Open;case Ke.closing:return _e.Closing;default:return _e.Closed}}isConnected(){return this.connectionState()===_e.Open}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(n=>n.topic===r);if(i)return i;{let n=new Je(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){let{topic:t,event:r,payload:i,ref:n}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${r} (${n})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{let i={access_token:t,version:us};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(te.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(ds,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:n,ref:a}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,n),Array.from(this.channels).filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,n,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(te.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([ao],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}};var Xe=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function J(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Gt=class extends Xe{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Be=class extends Xe{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var co=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},Vt=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(ge(),Ee)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},vs=()=>co(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>(ge(),Ee))).Response:Response}),Jt=s=>{if(Array.isArray(s))return s.map(t=>Jt(t));if(typeof s=="function"||s!==Object(s))return s;let e={};return Object.entries(s).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=Jt(r)}),e};var De=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},p0=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),lo=(s,e,t)=>De(void 0,void 0,void 0,function*(){let r=yield vs();s instanceof r&&!t?.noResolveJson?s.json().then(i=>{e(new Gt(p0(i),s.status||500))}).catch(i=>{e(new Be(p0(i),i))}):e(new Be(p0(s),s))}),uo=(s,e,t,r)=>{let i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function yt(s,e,t,r,i,n){return De(this,void 0,void 0,function*(){return new Promise((a,o)=>{s(t,uo(e,r,i,n)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>lo(c,o,r))})})}function Qe(s,e,t,r){return De(this,void 0,void 0,function*(){return yt(s,"GET",e,t,r)})}function ce(s,e,t,r,i){return De(this,void 0,void 0,function*(){return yt(s,"POST",e,r,i,t)})}function ps(s,e,t,r,i){return De(this,void 0,void 0,function*(){return yt(s,"PUT",e,r,i,t)})}function gs(s,e,t,r){return De(this,void 0,void 0,function*(){return yt(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Xt(s,e,t,r,i){return De(this,void 0,void 0,function*(){return yt(s,"DELETE",e,r,i,t)})}var Y=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},ho={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_s={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},bt=class{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Vt(i)}uploadOrUpdate(e,t,r,i){return Y(this,void 0,void 0,function*(){try{let n,a=Object.assign(Object.assign({},_s),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)}),c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(o=Object.assign(Object.assign({},o),i.headers));let u=this._removeEmptyFolders(t),l=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:n,headers:o},a?.duplex?{duplex:a.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(n){if(J(n))return{data:null,error:n};throw n}})}upload(e,t,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Y(this,void 0,void 0,function*(){let n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c,u=Object.assign({upsert:_s.upsert},i),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType);let h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:l}),d=yield h.json();return h.ok?{data:{path:n,fullPath:d.Key},error:null}:{data:null,error:d}}catch(c){if(J(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Y(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");let n=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new Xe("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}update(e,t,r){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Y(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(J(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(J(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Y(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield ce(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(i){if(J(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Y(this,void 0,void 0,function*(){try{let i=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(i){if(J(i))return{data:null,error:i};throw i}})}download(e,t){return Y(this,void 0,void 0,function*(){let i=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),a=n?`?${n}`:"";try{let o=this._getFinalPath(e);return{data:yield(yield Qe(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(J(o))return{data:null,error:o};throw o}})}info(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Qe(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Jt(r),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}exists(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield gs(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(J(r)&&r instanceof Be){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&i.push(n);let o=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}list(e,t,r){return Y(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},ho),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(J(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var ms="2.7.1";var ys={"X-Client-Info":`storage-js/${ms}`};var Ye=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},wt=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ys),t),this.fetch=Vt(r)}listBuckets(){return Ye(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(J(e))return{data:null,error:e};throw e}})}getBucket(e){return Ye(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ye(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ye(this,void 0,void 0,function*(){try{return{data:yield ps(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ye(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ye(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}};var Et=class extends wt{constructor(e,t={},r){super(e,t,r)}from(e){return new bt(this.url,this.headers,e,this.fetch)}};var bs="2.52.0";var At="";typeof Deno<"u"?At="deno":typeof document<"u"?At="web":typeof navigator<"u"&&navigator.product==="ReactNative"?At="react-native":At="node";var fo={"X-Client-Info":`supabase-js-${At}/${bs}`},ws={headers:fo},Es={schema:"public"},As={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cs={};ge();var xo=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},vo=s=>{let e;return s?e=s:typeof fetch>"u"?e=Yr:e=fetch,(...t)=>e(...t)},po=()=>typeof Headers>"u"?Zr:Headers,Bs=(s,e,t)=>{let r=vo(t),i=po();return(n,a)=>xo(void 0,void 0,void 0,function*(){var o;let c=(o=yield e())!==null&&o!==void 0?o:s,u=new i(a?.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(n,Object.assign(Object.assign({},a),{headers:u}))})};var go=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})};function Ds(s){return s.endsWith("/")?s:s+"/"}function ks(s,e){var t,r;let{db:i,auth:n,realtime:a,global:o}=s,{db:c,auth:u,realtime:l,global:h}=e,d={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),n),realtime:Object.assign(Object.assign({},l),a),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(r=o?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>go(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}var Qt="2.71.1";var ke=30*1e3,Yt=3,Zt=Yt*ke,Fs="http://localhost:9999",Ss="supabase.auth.token";var Ts={"X-Client-Info":`gotrue-js/${Qt}`};var Ct="X-Supabase-Api-Version",g0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rs=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ps=600*1e3;var Bt=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function U(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}var er=class extends Bt{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function Os(s){return U(s)&&s.name==="AuthApiError"}var Ze=class extends Bt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},le=class extends Bt{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},se=class extends le{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Is(s){return U(s)&&s.name==="AuthSessionMissingError"}var Fe=class extends le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Se=class extends le{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Te=class extends le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function js(s){return U(s)&&s.name==="AuthImplicitGrantRedirectError"}var Dt=class extends le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},et=class extends le{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function tr(s){return U(s)&&s.name==="AuthRetryableFetchError"}var kt=class extends le{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Re=class extends le{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$s=` 	
\r=`.split(""),_o=(()=>{let s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<$s.length;e+=1)s[$s[e].charCodeAt(0)]=-2;for(let e=0;e<rr.length;e+=1)s[rr[e].charCodeAt(0)]=e;return s})();function qs(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(rr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(rr[r]),e.queuedBits-=6}}function Ls(s,e,t){let r=_o[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function _0(s){let e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=a=>{bo(a,r,t)};for(let a=0;a<s.length;a+=1)Ls(s.charCodeAt(a),i,n);return e.join("")}function mo(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function yo(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}mo(r,e)}}function bo(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Us(s){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)Ls(s.charCodeAt(i),t,r);return new Uint8Array(e)}function Hs(s){let e=[];return yo(s,t=>e.push(t)),new Uint8Array(e)}function Ns(s){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return s.forEach(i=>qs(i,t,r)),qs(null,t,r),e.join("")}function zs(s){return Math.round(Date.now()/1e3)+s}function Ms(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){let e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}var ie=()=>typeof window<"u"&&typeof document<"u",Pe={tested:!1,writable:!1},sr=()=>{if(!ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pe.tested)return Pe.writable;let s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Pe.tested=!0,Pe.writable=!0}catch{Pe.tested=!0,Pe.writable=!1}return Pe.writable};function Ws(s){let e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var ir=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>(ge(),Ee)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ks=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Oe=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},me=async(s,e)=>{let t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},fe=async(s,e)=>{await s.removeItem(e)},Ft=class s{constructor(){this.promise=new s.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Ft.promiseConstructor=Promise;function nr(s){let e=s.split(".");if(e.length!==3)throw new Re("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Rs.test(e[r]))throw new Re("JWT not in base64url format");return{header:JSON.parse(_0(e[0])),payload:JSON.parse(_0(e[1])),signature:Us(e[2]),raw:{header:e[0],payload:e[1]}}}async function Gs(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Js(s,e){return new Promise((r,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{let a=await s(n);if(!e(n,null,a)){r(a);return}}catch(a){if(!e(n,a)){i(a);return}}})()})}function wo(s){return("0"+s.toString(16)).substr(-2)}function Eo(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let n=0;n<56;n++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,wo).join("")}async function Ao(s){let t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function Co(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;let t=await Ao(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ie(s,e,t=!1){let r=Eo(),i=r;t&&(i+="/PASSWORD_RECOVERY"),await Oe(s,`${e}-code-verifier`,i);let n=await Co(r);return[n,r===n?"plain":"s256"]}var Bo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vs(s){let e=s.headers.get(Ct);if(!e||!e.match(Bo))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Xs(s){if(!s)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function Qs(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Do=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function je(s){if(!Do.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function or(){let s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function m0(s){return JSON.parse(JSON.stringify(s))}var ko=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t},$e=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Fo=[502,503,504];async function Ys(s){var e;if(!Ks(s))throw new et($e(s),0);if(Fo.includes(s.status))throw new et($e(s),s.status);let t;try{t=await s.json()}catch(n){throw new Ze($e(n),n)}let r,i=Vs(s);if(i&&i.getTime()>=g0["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new kt($e(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new se}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0))throw new kt($e(t),s.status,t.weak_password.reasons);throw new er($e(t),s.status||500,r)}var So=(s,e,t,r)=>{let i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function N(s,e,t,r){var i;let n=Object.assign({},r?.headers);n[Ct]||(n[Ct]=g0["2024-01-01"].name),r?.jwt&&(n.Authorization=`Bearer ${r.jwt}`);let a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await To(s,e,t+o,{headers:n,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function To(s,e,t,r,i,n){let a=So(e,r,i,n),o;try{o=await s(t,Object.assign({},a))}catch(c){throw console.error(c),new et($e(c),0)}if(o.ok||await Ys(o),r?.noResolveJson)return o;try{return await o.json()}catch(c){await Ys(c)}}function ue(s){var e;let t=null;Ro(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=zs(s.expires_in)));let r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function y0(s){let e=ue(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function he(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Zs(s){return{data:s,error:null}}function ei(s){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n}=s,a=ko(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function ti(s){return s}function Ro(s){return s.access_token&&s.refresh_token&&s.expires_in}var ar=["global","local","others"];var Po=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t},qe=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=ir(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ar[0]){if(ar.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ar.join(", ")}`);try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:he})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:t}=e,r=Po(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ei,redirectTo:t?.redirectTo})}catch(t){if(U(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:he})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,n,a,o,c;try{let u={nextPage:null,lastPage:0,total:0},l=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:ti});if(l.error)throw l.error;let h=await l.json(),d=(a=l.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(o=l.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);u[`${m}Page`]=g}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(U(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){je(e);try{return await N(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:he})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){je(e);try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:he})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){je(e);try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:he})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){je(e.userId);try{let{data:t,error:r}=await N(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(U(t))return{data:null,error:t};throw t}}async _deleteFactor(e){je(e.userId),je(e.id);try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}}};function b0(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function ri(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Le={debug:!!(globalThis&&sr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},St=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},cr=class extends St{};async function w0(s,e,t){Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Le.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw Le.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new cr(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Le.debug)try{let n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ri();var Oo={url:Fs,storageKey:Ss,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ts,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function si(s,e,t){return await t()}var tt={},Ue=class s{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=s.nextInstanceID,s.nextInstanceID+=1,this.instanceID>0&&ie()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},Oo),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new qe({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ir(i.fetch),this.lock=i.lock||si,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ie()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=w0:this.lock=si,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:sr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=b0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=b0(this.memoryStorage)),ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=tt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){tt[this.storageKey]=Object.assign(Object.assign({},tt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=tt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){tt[this.storageKey]=Object.assign(Object.assign({},tt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t=Ws(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ie()&&this.detectSessionInUrl&&r!=="none"){let{data:i,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),js(n)){let c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}let{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return U(t)?{error:t}:{error:new Ze("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{let n=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ue}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};let c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,i;try{let n;if("email"in e){let{email:l,password:h,options:d}=e,x=null,p=null;this.flowType==="pkce"&&([x,p]=await Ie(this.storage,this.storageKey)),n=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d?.emailRedirectTo,body:{email:l,password:h,data:(t=d?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:x,code_challenge_method:p},xform:ue})}else if("phone"in e){let{phone:l,password:h,options:d}=e;n=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:h,data:(r=d?.data)!==null&&r!==void 0?r:{},channel:(i=d?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:ue})}else throw new Se("You must provide either an email or phone number and a password");let{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};let c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){let{email:n,password:a,options:o}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:y0})}else if("phone"in e){let{phone:n,password:a,options:o}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:y0})}else throw new Se("You must provide either an email or phone number and a password");let{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Fe}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,n,a,o,c,u,l,h,d,x;let p,g;if("message"in e)p=e.message,g=e.signature;else{let{chain:m,wallet:f,statement:v,options:_}=e,y;if(ie())if(typeof f=="object")y=f;else{let w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))y=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=f}let b=new URL((t=_?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in y&&y.signIn){let w=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),v?{statement:v}:null)),k;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")k=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)k=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)p=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${b.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(i=(r=_?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((n=_?.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(l=_?.signInWithSolana)===null||l===void 0?void 0:l.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);let w=await y.signMessage(new TextEncoder().encode(p),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=w}}try{let{data:m,error:f}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Ns(g)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ue});if(f)throw f;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new Fe}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:f})}catch(m){if(U(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){let t=await me(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{let{data:n,error:a}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ue});if(await fe(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Fe}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:a})}catch(n){if(U(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{let{options:t,provider:r,token:i,access_token:n,nonce:a}=e,o=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ue}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Fe}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,n,a;try{if("email"in e){let{email:o,options:c}=e,u=null,l=null;this.flowType==="pkce"&&([u,l]=await Ie(this.storage,this.storageKey));let{error:h}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:l},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){let{phone:o,options:c}=e,{data:u,error:l}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:l}}throw new Se("You must provide either an email or phone number.")}catch(o){if(U(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let i,n;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:a,error:o}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:ue});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let n=null,a=null;return this.flowType==="pkce"&&([n,a]=await Ie(this.storage,this.storageKey)),await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Zs})}catch(n){if(U(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new se;let{error:i}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:i,options:n}=e,{error:a}=await N(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n?.captchaToken}},redirectTo:n?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:r,type:i,options:n}=e,{data:a,error:o}=await N(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:o}}throw new Se("You must provide either an email or phone number and a type")}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){let i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=await me(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at*1e3-Date.now()<Zt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){let a=await me(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=or()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,l)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,l))})}return{data:{session:e},error:null}}let{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:he}):await this._useSession(async t=>{var r,i,n;let{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new se}:await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:he})})}catch(t){if(U(t))return Is(t)&&(await this._removeSession(),await fe(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:i,error:n}=r;if(n)throw n;if(!i.session)throw new se;let a=i.session,o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Ie(this.storage,this.storageKey));let{data:u,error:l}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:he});if(l)throw l;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new se;let t=Date.now()/1e3,r=t,i=!0,n=null,{payload:a}=nr(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){let{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};n=o}else{let{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(U(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new se;let{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ie())throw new Te("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Te(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Dt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Te("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Dt("No code detected.");let{data:v,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;let y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:v.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:i,access_token:n,refresh_token:a,expires_in:o,expires_at:c,token_type:u}=e;if(!n||!o||!a||!u)throw new Te("No session defined in URL");let l=Math.round(Date.now()/1e3),h=parseInt(o),d=l+h;c&&(d=parseInt(c));let x=d-l;x*1e3<=ke&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);let p=d-h;l-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,l):l-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,l);let{data:g,error:m}=await this._getUser(n);if(m)throw m;let f={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:h,expires_at:d,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(U(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await me(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:i,error:n}=t;if(n)return{error:n};let a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){let{error:o}=await this.admin.signOut(a,e);if(o&&!(Os(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await fe(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t=Ms(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{let{data:{session:n},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ie(this.storage,this.storageKey,!0));try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(U(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{let{data:r,error:i}=await this._useSession(async n=>{var a,o,c,u,l;let{data:h,error:d}=n;if(d)throw d;let x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",x,{headers:this.headers,jwt:(l=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&l!==void 0?l:void 0})});if(i)throw i;return ie()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(U(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;let{data:n,error:a}=t;if(a)throw a;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(U(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let r=Date.now();return await Js(async i=>(i>0&&await Gs(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ue})),(i,n)=>{let a=200*Math.pow(2,i);return n&&tr(n)&&Date.now()+a-r<ke})}catch(r){if(this._debug(t,"error",r),U(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ie()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await me(this.storage,this.storageKey);if(i&&this.userStorage){let a=await me(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Oe(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:or()}else if(i&&!i.user&&!i.user){let a=await me(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await fe(this.storage,this.storageKey+"-user"),await Oe(this.storage,this.storageKey,i)):i.user=or()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}let n=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Zt;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Zt}s`),n){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),tr(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:o}=await this._getUser(i.access_token);!o&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new se;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ft;let{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new se;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);let o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(i,"error",n),U(n)){let a={session:null,error:n};return tr(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){n.push(c)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Oe(this.userStorage,this.storageKey+"-user",{user:t.user});let i=Object.assign({},t);delete i.user;let n=m0(i);await Oe(this.storage,this.storageKey,n)}else{let i=m0(t);await Oe(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await fe(this.storage,this.storageKey),await fe(this.storage,this.storageKey+"-code-verifier"),await fe(this.storage,this.storageKey+"-user"),this.userStorage&&await fe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ie()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),ke);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((r.expires_at*1e3-e)/ke);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ke}ms, refresh threshold is ${Yt} ticks`),i<=Yt&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof St)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ie()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[n,a]=await Ie(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r?.queryParams){let n=new URLSearchParams(r.queryParams);i.push(n.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:i,error:n}=t;return n?{data:null,error:n}:await N(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(U(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;let{data:n,error:a}=t;if(a)return{data:null,error:a};let o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await N(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(U(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:n}=t;if(n)return{data:null,error:n};let{data:a,error:o}=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(U(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:n}=t;return n?{data:null,error:n}:await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(U(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let r=e?.factors||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),n=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;let{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=nr(i.access_token),o=null;a.aal&&(o=a.aal);let c=o;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let l=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:l},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;let i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Ps>i)return r;let{data:n,error:a}=await N(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=i,r=n.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){let{data:x,error:p}=await this.getSession();if(p||!x.session)return{data:null,error:p};r=x.session.access_token}let{header:i,payload:n,signature:a,raw:{header:o,payload:c}}=nr(r);t?.allowExpired||Xs(n.exp);let u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!u){let{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:n,header:i,signature:a},error:null}}let l=Qs(i.alg),h=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,h,a,Hs(`${o}.${c}`)))throw new Re("Invalid JWT signature");return{data:{claims:n,header:i,signature:a},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}};Ue.nextInstanceID=0;var Io=Ue,E0=Io;var lr=class extends E0{constructor(e){super(e)}};var jo=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(l){try{u(r.next(l))}catch(h){a(h)}}function c(l){try{u(r.throw(l))}catch(h){a(h)}}function u(l){l.done?n(l.value):i(l.value).then(o,c)}u((r=r.apply(s,e||[])).next())})},Tt=class{constructor(e,t,r){var i,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let o=Ds(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let u=`sb-${c.hostname.split(".")[0]}-auth-token`,l={db:Es,realtime:Cs,auth:Object.assign(Object.assign({},As),{storageKey:u}),global:ws},h=ks(r??{},l);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=Bs(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new os(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new dt(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Et(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return jo(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:n,flowType:a,lock:o,debug:c},u,l){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lr({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:a,lock:o,debug:c,fetch:l,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ve(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var ii=(s,e,t)=>new Tt(s,e,t);var k0=W0(xn());(window.location.hostname.includes("localhost")||window.location.hostname.includes("vega"))&&(window.addEventListener("message",s=>{if(s.source===window&&s.data?.type==="VEGA_AUTH"){let e={access_token:s.data.access_token,user_id:s.data.user_id};chrome.runtime.sendMessage({type:"SET_USER_TOKEN",access_token:e.access_token,user_id:e.user_id},()=>{})}}),console.log("\u{1F442} Aguardando VEGA_AUTH via window.postMessage..."));var Vr=null,de=null,Pt=[],F0="https://rgkvzoeanbkbeqjbntdq.supabase.co",S0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJna3Z6b2VhbmJrYmVxamJudGRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5MDczMjEsImV4cCI6MjA2NjQ4MzMyMX0.Qhy9GQOJD0wLSBmGLdS6QGxvERfST2FYqCDBo-F1njk";window.location.href.includes("https://experiencia.xpi.com.br/conta-corrente/extrato/#/")&&(async()=>{console.log("\u{1F50E} Buscando saldo na tela da conta...");function s(){return new Promise((e,t)=>{let i=0,n=setInterval(()=>{let o=[...document.querySelectorAll("span")].find(l=>l.textContent?.trim().startsWith("R$")&&l.getAttribute("style")?.includes("font-weight: 500"));if(!o){i++,i>=20&&(clearInterval(n),t("\u274C Span com saldo n\xE3o encontrado."));return}let c=o.textContent.match(/R\$\s*([\d\.]+,\d{2})/);if(!c){i++,i>=20&&(clearInterval(n),t("\u274C Valor num\xE9rico de saldo n\xE3o p\xF4de ser extra\xEDdo."));return}clearInterval(n);let u=parseFloat(c[1].replace(/\./g,"").replace(",","."));console.log("\u{1F4B0} Saldo identificado via span direto:",u),e(u)},500)})}try{await new Promise(t=>setTimeout(t,500));let e=await s();console.log("\u{1F4B0} Saldo capturado com sucesso:",e),localStorage.setItem("saldoXP",e),window.location.href="https://experiencia.xpi.com.br/renda-fixa/#/emissao-bancaria?offertoken=true"}catch(e){console.error(e)}})();function $o(s){return s<=180?.225:s>180&&s<=360?.2:s>360&&s<=720?.175:.15}function rt(s){let e=new PointerEvent("pointerdown",{bubbles:!0,composed:!0,pointerType:"mouse"}),t=new PointerEvent("pointerup",{bubbles:!0,composed:!0,pointerType:"mouse"}),r=new PointerEvent("click",{bubbles:!0,composed:!0,pointerType:"mouse"});s.dispatchEvent(e),s.dispatchEvent(t),s.dispatchEvent(r)}function qo(s){let e=s.toUpperCase();return e.includes("IPCA")?"ipca":e.includes("CDI")?"cdi":"pre_fixado"}function Lo(s){let e=s.match(/([0-9]+[,\.]?[0-9]*)/);return e?parseFloat(e[1].replace(",",".")):null}function Uo(s){return parseFloat(s.replace(/[R$\s\.]/g,"").replace(",","."))||1e3}function B0(s){let e=new Date,r=new Date(s)-e;return Math.ceil(r/(1e3*60*60*24))}function D0(s,e){let t=$o(e),r=s/(1-t);return parseFloat(r.toFixed(2))}function Ho(s){if(!s||!s.includes("/"))return null;let[e,t,r]=s.split("/");return!e||!t||!r?null:`${r}-${t.padStart(2,"0")}-${e.padStart(2,"0")}`}function Jr(s){let e=s.toUpperCase();return e.includes("LCA")||e.includes("LCI")||e.includes("LCD")}var No={ate_5k:s=>s<=5e3,ate_10k:s=>s<=1e4,ate_50k:s=>s<=5e4,acima_50k:s=>s>5e4},vn={indexador:{pre_fixado:"Pr\xE9-fixado",ipca:"Infla\xE7\xE3o",cdi:"P\xF3s-fixado (CDI)"},liquidez:{no_venc:"No Vencimento",diaria:"Di\xE1ria",carencia:"Com Car\xEAncia"},outros:{garantia_fgc:"Prote\xE7\xE3o FGC",isento_ir:"Isento de IR",oferta_primaria:"Oferta prim\xE1ria",investidor_qualificado:"Investidor qualificado",investidor_profissional:"Investidor profissional",publico_geral:"P\xFAblico geral"},vencimento:{ate_6_meses:"De 1 m\xEAs a 6 meses",ate_1_ano:"De 6 meses a 12 meses",ate_2_anos:"de 1 ano a 2 anos",ate_3_anos:"de 2 anos a 3 anos",ate_5_anos:"de 3 anos a 5 anos",acima_5_anos:"Acima de 5 anos"},aplicacao_minima:{ate_5k:"At\xE9 R$ 5.000",ate_10k:"At\xE9 10.000",ate_50k:"At\xE9 R$ 50.000",acima_50k:"Acima de R$ 50.000"}};async function zo(s=5e3){return new Promise((e,t)=>{let i=s/500,n=0,a=()=>{chrome.runtime.sendMessage({type:"GET_USER_TOKEN"},o=>{o?.access_token&&o?.user_id?(console.log("\u{1F510} Credenciais recuperadas com sucesso:",o),e(o)):(n++,console.warn("\u{1F552} Aguardando token no background... tentativa",n),n>=i?t("\u274C Token/user_id ausentes ap\xF3s aguardo."):setTimeout(a,500))})};a()})}async function Ot(s,e=2e3,t=!0){let i=e/500,n=0;return new Promise((a,o)=>{let c=()=>{let u;t?u=document.evaluate(s,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue:u=document.querySelector(s),u?a(u):++n>i?o("Elemento n\xE3o encontrado: "+s):setTimeout(c,500)};c()})}async function Mo(s,e){try{let t="Digite a quantidade que deseja investir";console.log("\u{1F552} Aguardando campo de quantidade aparecer..."),await Ot(`soma-text-field[label="${t}"]`,7e3,!1);let r=[...document.querySelectorAll("soma-text-field")].find(o=>o.getAttribute("label")===t);if(!r)throw new Error(`Campo soma-text-field com label "${t}" n\xE3o encontrado.`);let i=10;for(;!r.shadowRoot&&i-- >0;)console.log("\u23F3 Aguardando shadowRoot do campo de quantidade..."),await new Promise(o=>setTimeout(o,150));let n=r.shadowRoot?.querySelector("input[type='number']");if(!n)throw new Error("Input do tipo number n\xE3o localizado no shadowRoot.");let a=Math.floor(s/e);return n.value=a,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),await new Promise(o=>setTimeout(o,100)),console.log("\u{1F4E6} Quantidade preenchida:",a),!0}catch(t){return console.error("\u274C Erro ao preencher campo de quantidade:",t?.message||t),!1}}async function Wo(s=5e3){let t=s/500,r=0;for(;r<t;){let n=document.querySelectorAll("soma-description")[1];if(n&&/Saldo disponível/i.test(n.textContent||"")){let a=n.textContent.match(/R\$\s*([\d\.]+,\d{2})/);if(a){let o=parseFloat(a[1].replace(/\./g,"").replace(",","."));return console.log("\u{1F4B0} Saldo detectado:",o),o}}r++,await new Promise(a=>setTimeout(a,500))}return console.error("\u274C Timeout ao ler saldo dispon\xEDvel."),0}async function Ko(){try{await Ot("soma-checkbox",2e3,!1);let e=[...document.querySelectorAll("soma-checkbox")].find(i=>i.getAttribute("label")?.toLowerCase().includes("ciente dos riscos"));if(!e)return!1;let r=e.shadowRoot?.querySelector("input[type='checkbox']");return r?(r.checked||(r.checked=!0,r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0}))),!0):!1}catch(s){return console.error("\u274C Erro ao marcar checkbox:",s?.message||s),!1}}async function Go(){try{let r=0,i=null;for(;r++<14;){let n=[...document.querySelectorAll("soma-button")].find(a=>a.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"));if(n&&n.shadowRoot&&(i=n.shadowRoot.querySelector("button:not([disabled])"),i))break;await new Promise(a=>setTimeout(a,500))}return i?(rt(i),console.log("\u2705 Clique no bot\xE3o 'Avan\xE7ar etapa' realizado com sucesso."),!0):(console.warn("\u26A0\uFE0F Bot\xE3o 'Avan\xE7ar etapa' n\xE3o encontrado ou continua desabilitado."),!1)}catch(s){return console.error("\u274C Erro ao clicar no bot\xE3o 'Avan\xE7ar etapa':",s?.message||s),!1}}async function Jo(s){let t={pre_fixado:"Pr\xE9-fixado",ipca:"Infla\xE7\xE3o",cdi:"P\xF3s-fixado (CDI)"}[s],r=`//soma-chip[contains(., '${t}')]`,i=document.evaluate(r,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;return i?(i.getAttribute("selected")!=="true"&&(i.click(),console.log(`\u2705 Filtro aplicado: ${t}`),await new Promise(n=>setTimeout(n,300))),await new Promise(n=>setTimeout(n,600)),!0):(console.warn(`\u26A0\uFE0F soma-chip '${t}' n\xE3o encontrado na tela.`),!1)}async function Vo(){let s=[...document.querySelectorAll("soma-checkbox")].find(i=>i.getAttribute("label")?.toLowerCase().includes("declaro que li"));if(!s)return console.warn("\u274C Checkbox com label 'declaro que li' n\xE3o encontrado."),!1;let e=5;for(;!s.shadowRoot&&e-- >0;)await new Promise(i=>setTimeout(i,300));let t=s.shadowRoot?.querySelector("input[type='checkbox']");if(!t)return console.warn("\u274C Input checkbox n\xE3o encontrado no shadowRoot."),!1;rt(t),console.log("\u2705 Clique real no checkbox disparado.");let r=null;for(e=5;e-- >0;){let n=[...document.querySelectorAll("soma-button")].find(a=>a.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"))?.shadowRoot?.querySelector("button");if(n&&!n.disabled){r=n;break}await new Promise(a=>setTimeout(a,500))}return r?(rt(r),console.log("\u2705 Bot\xE3o 'Avan\xE7ar etapa' clicado com sucesso ap\xF3s o checkbox."),!0):(console.warn("\u274C Bot\xE3o 'Avan\xE7ar etapa' n\xE3o habilitado ap\xF3s marcar checkbox."),!1)}async function Xo(s){let e=s.split("");console.log("\u{1F510} Iniciando digita\xE7\xE3o da assinatura eletr\xF4nica...");let t=5,r=null;for(;t-- >0&&(r=document.querySelector("soma-input-bank-password"),!r?.shadowRoot);)await new Promise(n=>setTimeout(n,500));if(!r?.shadowRoot)return console.error("\u274C Teclado num\xE9rico da senha eletr\xF4nica n\xE3o apareceu."),!1;let i=[...r.shadowRoot.querySelectorAll("button")];if(!i.length)return console.error("\u274C Nenhum bot\xE3o encontrado no teclado."),!1;for(let n of e){let a=i.find(o=>o.textContent?.includes(n));if(!a)return console.error(`\u274C D\xEDgito '${n}' n\xE3o encontrado entre os bot\xF5es.`),!1;rt(a),console.log(`\u2705 D\xEDgito '${n}' clicado.`),await new Promise(o=>setTimeout(o,100))}return!0}async function Qo(){let s=5,e=null;for(;s-- >0;){let r=[...document.querySelectorAll("soma-button")].find(i=>i.getAttribute("aria-label")?.toLowerCase().includes("avan\xE7ar etapa"))?.shadowRoot?.querySelector("button");if(r&&!r.disabled){e=r;break}await new Promise(i=>setTimeout(i,300))}return e?(rt(e),console.log("\u2705 Clique final no bot\xE3o 'Avan\xE7ar etapa' efetuado ap\xF3s senha."),!0):(console.warn("\u274C Bot\xE3o final 'Avan\xE7ar etapa' n\xE3o foi habilitado ap\xF3s assinatura."),!1)}async function Yo(){console.log("\u{1F680} For\xE7ando carregamento completo da p\xE1gina..."),window.scrollTo(0,0),await new Promise(r=>setTimeout(r,500));let s=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),e=5,t=s/e;for(let r=0;r<=e;r++)window.scrollTo(0,t*r),console.log(`\u{1F4DC} Scroll p\xE1gina: ${Math.round(r/e*100)}%`),await new Promise(i=>setTimeout(i,300))}zo().then(s=>{Vr=s.access_token,de=s.user_id;let e=ii(F0,S0,{global:{headers:{Authorization:`Bearer ${Vr}`}}});Zo(e)}).catch(s=>{console.error(s)});async function Zo(s){let e=Date.now();try{if(window.location.href.includes("experiencia.xpi.com.br/renda-fixa")){let h=function(g){return l.length===0?!0:l.some(m=>No[m]?.(g))},{data:t,error:r}=await s.from("filtros").select("*").eq("user_id",de).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(r||!t){console.error("\u274C Erro ao buscar filtros do Supabase:",r);return}let i={...t.selecionados,assinatura:t.assinatura||"",limite_compra:t.limite_compra||0,ordem_classe:Array.isArray(t.ordem_classe)?t.ordem_classe:[],taxa_minima:t.taxa_minima||{cdi:0,ipca:0,pre_fixado:0}};try{if(t.assinatura&&de){let m=k0.default.AES.decrypt(t.assinatura,de).toString(k0.default.enc.Utf8);m?(i.assinatura=m,console.log("\u{1F510} Assinatura descriptografada e atribu\xEDda aos filtros.")):console.warn("\u26A0\uFE0F Assinatura inv\xE1lida ou chave incorreta.")}else console.warn("\u26A0\uFE0F Campo de assinatura ou user_id ausente.")}catch(g){console.error("\u274C Erro ao descriptografar assinatura:",g)}console.log("\u2705 Filtros carregados:",i);try{console.log("\u{1F552} Aguardando bot\xE3o 'Filtrar' aparecer na tela...");let g=await Ot("//soma-chip[contains(., 'Filtrar')]",3500);if(!g){console.error("\u274C Bot\xE3o 'Filtrar' n\xE3o encontrado ap\xF3s aguardo.");return}g.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(m=>setTimeout(m,300)),g.click(),console.log("\u2705 Bot\xE3o 'Filtrar' clicado com sucesso."),await new Promise(m=>setTimeout(m,500))}catch(g){console.error("\u274C Erro ao localizar ou clicar no bot\xE3o 'Filtrar':",g);return}try{console.log("\u{1F3AF} Iniciando aplica\xE7\xE3o de filtros visuais (sem indexador)...");for(let g in i){if(["assinatura","limite_compra","ordem_classe","taxa_minima","indexador"].includes(g))continue;let m=i[g];for(let f of m){let v=[];if(g==="vencimento"){let _=[{chave:"ate_6_meses",ordem:1},{chave:"ate_1_ano",ordem:2},{chave:"ate_2_anos",ordem:3},{chave:"ate_3_anos",ordem:4},{chave:"ate_5_anos",ordem:5},{chave:"acima_5_anos",ordem:6}],y=_.find(b=>b.chave===f);y&&(v=_.filter(b=>b.ordem<=y.ordem).map(b=>vn[g.toLowerCase()]?.[b.chave]).filter(Boolean))}else{let _=vn[g.toLowerCase()]?.[f];_&&(v=[_])}for(let _ of v){let y=`//soma-chip[contains(., '${_}')]`,b=document.evaluate(y,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;b?(b.click(),console.log(`\u2705 Filtro aplicado: [${g}] \u2192 ${_}`)):console.warn(`\u26A0\uFE0F soma-chip '${_}' n\xE3o encontrado na tela.`),await new Promise(w=>setTimeout(w,300))}await new Promise(_=>setTimeout(_,300))}}console.log("\u2705 Filtros visuais aplicados (indexador ser\xE1 aplicado por prioridade depois).")}catch(g){console.error("\u274C Erro ao aplicar filtros visuais:",g)}let n=i.assinatura,a=i.limite_compra,o=Array.isArray(i.indexador)?i.indexador:[],c=Array.isArray(i.ordem_classe)&&i.ordem_classe.length?i.ordem_classe.filter(g=>o.includes(g)):o.length?o:["cdi"];console.log("Ordem de classes priorizadas:",c);let u=i.taxa_minima||{cdi:0,ipca:0,pre_fixado:0},l=i.aplicacao_minima||[];try{console.log("\u{1F552} Aguardando carregamento da tabela de ativos..."),await Ot("soma-table-body soma-table-row",2e3,!1),await Yo()}catch(g){console.error("\u274C Erro ao aguardar a tabela de ativos:",g);return}let x=parseFloat(localStorage.getItem("saldoXP")||"0")||await Wo();console.log("\u{1F4B0} Saldo total carregado para compara\xE7\xE3o:",x);for(let g of c){if(!await Jo(g))continue;try{await Ot("soma-table-body soma-table-row",2e3,!1),await new Promise(_=>setTimeout(_,500)),console.log(`\u2705 Tabela de ativos carregada para classe: ${g}`)}catch(_){console.error(`\u274C Erro ao carregar tabela da classe ${g}:`,_);continue}let f=document.querySelectorAll("soma-table-body soma-table-row"),v=[];for(let[_,y]of[...f].entries()){let b=y.querySelectorAll("soma-table-cell");if(b.length<10)return;let w=b[2]?.textContent?.trim()||"",k=b[8]?.textContent?.trim()||"",R=y.querySelector("soma-button[aria-label='Investir']")?.shadowRoot?.querySelector("button"),O=qo(w),A=Lo(w),T=w.trim(),P=Uo(k),E=b[1]?.textContent?.trim()||"",I=Ho(E),j=b[0]?.textContent?.trim()||"Ativo sem nome";if(O===g&&A&&R){let $=j.includes("LCA")||j.includes("LCI")||j.includes("LCD");v.push({nome:j,tipo:O,taxa:A,taxaTexto:T,valorMinimo:P,vencimentoStr:I,botao:R,isento:$}),console.log(`\u2705 Ativo detectado: ${j}, Tipo: ${O}, Taxa: ${A}, Min: ${P}, Venc: ${I}, Isento: ${$}`)}}if(v.length>0){let _=11;await new Promise(E=>{chrome.runtime.sendMessage({type:"BUSCAR_CDI"},I=>{I?.cdi?(_=I.cdi,console.log("\u{1F4CA} CDI retornado pelo background:",_)):console.warn("\u26A0\uFE0F CDI n\xE3o retornado, usando fallback:",_),E()})});let y=(E,I)=>{if(E.length===0)return null;let j=_,$=E.map(C=>{let D=C.taxaTexto.toUpperCase();if(I==="IPCA"){let B=D.match(/IPCA\s*\+?\s*([\d,\.]+)/);return B?parseFloat(B[1].replace(",",".")):null}if(I==="CDI"){if(D.includes("CDI +")||D.includes("CDI+")){let B=D.match(/CDI\s*\+\s*([\d,\.]+)/),M=B?parseFloat(B[1].replace(",",".")):null;return M!==null?(j+M)/j*100:null}else if(D.includes("% CDI")||D.includes("% DO CDI")){let B=D.match(/([\d,\.]+)\s*%/);return B?parseFloat(B[1].replace(",",".")):null}else if(D.includes("% DO CDI")||D.includes("%DO CDI")){let B=D.match(/([\d,\.]+)\s*%/);return B?parseFloat(B[1].replace(",",".")):null}}let F=D.match(/([\d,\.]+)\s*%/);return F?parseFloat(F[1].replace(",",".")):null}).filter(C=>typeof C=="number");if($.length===0)return null;let q=$.reduce((C,D)=>C+D,0)/$.length;return console.log("Quantidade de ativos:",$.length),console.log("Taxa m\xE9dia encontrada:",q),I==="IPCA"?`IPCA + ${q.toFixed(2)}%`:I==="CDI"?`${q.toFixed(2)}% do CDI`:`${q.toFixed(2)}%`},b=v.filter(E=>E.valorMinimo<=x).sort((E,I)=>{let j=B0(E.vencimentoStr),$=B0(I.vencimentoStr),q=Jr(E.nome)?D0(E.taxa,j):E.taxa;return(Jr(I.nome)?D0(I.taxa,$):I.taxa)-q});b.length===0&&console.warn("\u26D4 Nenhum ativo dispon\xEDvel com valor m\xEDnimo compat\xEDvel com o saldo do usu\xE1rio.");let w=b.map(E=>{let I=Jr(E.nome),j=B0(E.vencimentoStr),$=I?D0(E.taxa,j):E.taxa;return{...E,taxaEfetiva:$,isIsento:I,diasCorridos:j}}).filter(E=>E.taxaEfetiva>=u[g]&&h(E.valorMinimo)).sort((E,I)=>I.taxaEfetiva-E.taxaEfetiva);console.log(`\u{1F4CB} Ativos eleg\xEDveis na classe ${g.toUpperCase()}:`),w.forEach((E,I)=>{console.log(`#${I+1}: ${E.nome} | Taxa bruta: ${E.taxaEfetiva}% | Min: R$${E.valorMinimo} | Venc: ${E.vencimentoStr} | ${E.isIsento?"ISENTO":"TRIBUTADO"}`)});let k=w[0],S=k?.vencimentoStr?new Date(k.vencimentoStr):null,R=v.filter(E=>E.isento&&(!S||new Date(E.vencimentoStr)<=S)),O=v.filter(E=>!E.isento&&(!S||new Date(E.vencimentoStr)<=S));console.log("\u{1F4CA} Ativos ISENTOS considerados na m\xE9dia:"),R.forEach(E=>{console.log(`- ${E.nome} | Taxa: ${E.taxaTexto} | Vencimento: ${E.vencimentoStr}`)}),console.log("\u{1F4CA} Ativos TRIBUTADOS considerados na m\xE9dia:"),O.forEach(E=>{console.log(`- ${E.nome} | Taxa: ${E.taxaTexto} | Vencimento: ${E.vencimentoStr}`)});let A=y(R,g.toUpperCase()),T=y(O,g.toUpperCase()),P=[];A&&(console.log("\u{1F50D} M\xE9dia ISENTOS calculada:",A),P.push({user_id:de,data_referencia:new Date().toISOString().split("T")[0],indexador:g.toUpperCase(),taxa_media:A,isento_imposto:!0})),T&&(console.log("\u{1F50D} M\xE9dia TRIBUTADOS calculada:",T),P.push({user_id:de,data_referencia:new Date().toISOString().split("T")[0],indexador:g.toUpperCase(),taxa_media:T,isento_imposto:!1}));for(let E of P)console.log("\u{1F4E9} Enviando taxa m\xE9dia para o Supabase:",E),await fetch(`${F0}/rest/v1/taxas_media_xp`,{method:"POST",headers:{"Content-Type":"application/json",apikey:S0,Authorization:`Bearer ${Vr}`,Prefer:"resolution=merge-duplicates"},body:JSON.stringify(E)});if(k){let{taxaEfetiva:E,taxa:I,nome:j,vencimentoStr:$,valorMinimo:q,botao:C}=k,D=Jr(j);if(console.log(`\u{1F4CA} Melhor ativo encontrado: '${j}' com taxa efetiva ${E}%`),C.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise(G=>setTimeout(G,100)),rt(C),await new Promise(G=>setTimeout(G,500)),q>x){console.warn(`\u26D4 Saldo insuficiente: m\xEDnimo R$${q} > saldo R$${x}`);return}let F=Math.min(x,a),B=Math.max(q,F);if(!await Mo(B,q))return;await Ko(),await Go(),await new Promise(G=>setTimeout(G,500)),await Vo();let W=await Xo(n);if(Pt.push({ativo:j,classe:g.toUpperCase(),taxaInformada:I.toFixed(2)+"%",taxaEfetiva:E.toFixed(2)+(D?"% (isento IR)":"%"),valorMinimo:"R$ "+q.toLocaleString("pt-BR",{minimumFractionDigits:2}),valorComprado:"R$ "+B.toLocaleString("pt-BR",{minimumFractionDigits:2}),vencimentoISO:$,vencimentoBR:(()=>{let[G,H,we]=$.split("-");return`${we}/${H}/${G}`})(),horarioCompra:new Date().toLocaleString("pt-BR")}),console.log("\u{1F4DD} Ativo registrado no logCompras:",Pt[Pt.length-1]),W)await Qo();else{console.warn("\u26A0\uFE0F A senha eletr\xF4nica n\xE3o p\xF4de ser digitada.");continue}}}}let p=Date.now();console.log(`\u23F1 Tempo para comprar os ativos: ${((p-e)/1e3).toFixed(2)} segundos`)}if(Pt.length>0){console.log("\u{1F680} Enviando dados para Supabase..."),console.log("Id o cliente:",de);let t=await fetch(`${F0}/rest/v1/ativos_comprados`,{method:"POST",headers:{apikey:S0,Authorization:`Bearer ${Vr}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(Pt.map(r=>({user_id:de,nome_ativo:r.ativo,indexador:r.classe.toLowerCase(),data_hora_compra:new Date().toISOString(),taxa_contratada:r.taxaInformada,taxa_grossup:r.taxaEfetiva,valor_minimo:parseFloat(r.valorMinimo.replace(/[R$\.\s]/g,"").replace(",",".")),valor_aplicado:Number(r.valorComprado?.toString().replace("R$","").replace(/\./g,"").replace(",",".").trim()),vencimento:r.vencimentoISO??null})))});t.ok?console.log("\u2705 Compras registradas no Supabase com sucesso!"):console.error("\u274C Erro ao salvar no Supabase:",await t.text()),de?chrome.runtime.sendMessage({type:"FECHAR_FATURA_VARIAVEL",user_id:de}):console.warn("\u26A0\uFE0F user_id n\xE3o est\xE1 dispon\xEDvel.")}}catch(t){console.error("Erro no script:",t)}}})();
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)
*/
